ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 2
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"TFT_TEST.cpp"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text._ZN5daisy8patch_sm12DaisyPatchSMD2Ev,"axG",%progbits,_ZN5daisy8patch_sm12DaisyPatch
  17              		.align	1
  18              		.p2align 2,,3
  19              		.weak	_ZN5daisy8patch_sm12DaisyPatchSMD2Ev
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv5-d16
  26              	_ZN5daisy8patch_sm12DaisyPatchSMD2Ev:
  27              	.LVL0:
  28              	.LFB2529:
  29              		.file 1 "../../libDaisy//src/daisy_patch_sm.h"
   1:../../libDaisy//src/daisy_patch_sm.h **** #pragma once
   2:../../libDaisy//src/daisy_patch_sm.h **** 
   3:../../libDaisy//src/daisy_patch_sm.h **** #include "daisy.h"
   4:../../libDaisy//src/daisy_patch_sm.h **** 
   5:../../libDaisy//src/daisy_patch_sm.h **** namespace daisy
   6:../../libDaisy//src/daisy_patch_sm.h **** {
   7:../../libDaisy//src/daisy_patch_sm.h **** namespace patch_sm
   8:../../libDaisy//src/daisy_patch_sm.h **** {
   9:../../libDaisy//src/daisy_patch_sm.h ****     /** Accessors for the Analog Controls. 
  10:../../libDaisy//src/daisy_patch_sm.h ****      *  These cover the 8x Bipolar CV inputs
  11:../../libDaisy//src/daisy_patch_sm.h ****      *  as well as the 4x 0-3V3 ADC inputs on
  12:../../libDaisy//src/daisy_patch_sm.h ****      *  the hardware 
  13:../../libDaisy//src/daisy_patch_sm.h ****      * 
  14:../../libDaisy//src/daisy_patch_sm.h ****      *  When reading a value with DaisyPatchSM::GetAdcValue()
  15:../../libDaisy//src/daisy_patch_sm.h ****      * 
  16:../../libDaisy//src/daisy_patch_sm.h ****      *  patch.GetAdcValue(patch_sm::CV_1);
  17:../../libDaisy//src/daisy_patch_sm.h ****      */
  18:../../libDaisy//src/daisy_patch_sm.h ****     enum
  19:../../libDaisy//src/daisy_patch_sm.h ****     {
  20:../../libDaisy//src/daisy_patch_sm.h ****         CV_1 = 0,
  21:../../libDaisy//src/daisy_patch_sm.h ****         CV_2,
  22:../../libDaisy//src/daisy_patch_sm.h ****         CV_3,
  23:../../libDaisy//src/daisy_patch_sm.h ****         CV_4,
  24:../../libDaisy//src/daisy_patch_sm.h ****         CV_5,
  25:../../libDaisy//src/daisy_patch_sm.h ****         CV_6,
  26:../../libDaisy//src/daisy_patch_sm.h ****         CV_7,
  27:../../libDaisy//src/daisy_patch_sm.h ****         CV_8,
  28:../../libDaisy//src/daisy_patch_sm.h ****         ADC_9,
  29:../../libDaisy//src/daisy_patch_sm.h ****         ADC_10,
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 2


  30:../../libDaisy//src/daisy_patch_sm.h ****         ADC_11,
  31:../../libDaisy//src/daisy_patch_sm.h ****         ADC_12,
  32:../../libDaisy//src/daisy_patch_sm.h ****         ADC_LAST,
  33:../../libDaisy//src/daisy_patch_sm.h ****     };
  34:../../libDaisy//src/daisy_patch_sm.h **** 
  35:../../libDaisy//src/daisy_patch_sm.h ****     /** Enum for addressing the CV Outputs via the WriteCvOut function. */
  36:../../libDaisy//src/daisy_patch_sm.h ****     enum
  37:../../libDaisy//src/daisy_patch_sm.h ****     {
  38:../../libDaisy//src/daisy_patch_sm.h ****         CV_OUT_BOTH = 0,
  39:../../libDaisy//src/daisy_patch_sm.h ****         CV_OUT_1,
  40:../../libDaisy//src/daisy_patch_sm.h ****         CV_OUT_2,
  41:../../libDaisy//src/daisy_patch_sm.h ****     };
  42:../../libDaisy//src/daisy_patch_sm.h **** 
  43:../../libDaisy//src/daisy_patch_sm.h **** 
  44:../../libDaisy//src/daisy_patch_sm.h ****     /** @brief Board support file for DaisyPatchSM hardware
  45:../../libDaisy//src/daisy_patch_sm.h ****      *  @author shensley
  46:../../libDaisy//src/daisy_patch_sm.h ****      *  @ingroup boards
  47:../../libDaisy//src/daisy_patch_sm.h ****      * 
  48:../../libDaisy//src/daisy_patch_sm.h ****      *  Daisy Patch SM is a complete Eurorack module DSP engine.
  49:../../libDaisy//src/daisy_patch_sm.h ****      *  Based on the Daisy Seed, with circuits added for 
  50:../../libDaisy//src/daisy_patch_sm.h ****      *  interfacing directly with eurorack modular synthesizers.
  51:../../libDaisy//src/daisy_patch_sm.h ****      */
  52:../../libDaisy//src/daisy_patch_sm.h ****     class DaisyPatchSM
  53:../../libDaisy//src/daisy_patch_sm.h ****     {
  54:../../libDaisy//src/daisy_patch_sm.h ****       public:
  55:../../libDaisy//src/daisy_patch_sm.h ****         /** Helper for mapping pins, and accessing them using the `GetPin` function */
  56:../../libDaisy//src/daisy_patch_sm.h ****         enum class PinBank
  57:../../libDaisy//src/daisy_patch_sm.h ****         {
  58:../../libDaisy//src/daisy_patch_sm.h ****             A,
  59:../../libDaisy//src/daisy_patch_sm.h ****             B,
  60:../../libDaisy//src/daisy_patch_sm.h ****             C,
  61:../../libDaisy//src/daisy_patch_sm.h ****             D
  62:../../libDaisy//src/daisy_patch_sm.h ****         };
  63:../../libDaisy//src/daisy_patch_sm.h **** 
  64:../../libDaisy//src/daisy_patch_sm.h ****         DaisyPatchSM() {}
  65:../../libDaisy//src/daisy_patch_sm.h ****         ~DaisyPatchSM() {}
  30              		.loc 1 65 9 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  35              	.LBB207:
  36              	.LBI207:
  37              		.file 2 "../../libDaisy//src/hid/gatein.h"
   1:../../libDaisy//src/hid/gatein.h **** #pragma once
   2:../../libDaisy//src/hid/gatein.h **** #ifndef DSY_GATEIN_H
   3:../../libDaisy//src/hid/gatein.h **** #define DSY_GATEIN_H
   4:../../libDaisy//src/hid/gatein.h **** #include "per/gpio.h"
   5:../../libDaisy//src/hid/gatein.h **** 
   6:../../libDaisy//src/hid/gatein.h **** namespace daisy
   7:../../libDaisy//src/hid/gatein.h **** {
   8:../../libDaisy//src/hid/gatein.h **** /**
   9:../../libDaisy//src/hid/gatein.h ****    @brief Generic Class for handling gate inputs through GPIO.
  10:../../libDaisy//src/hid/gatein.h ****    @author Stephen Hensley
  11:../../libDaisy//src/hid/gatein.h ****    @date    March 2020
  12:../../libDaisy//src/hid/gatein.h ****    @ingroup controls
  13:../../libDaisy//src/hid/gatein.h **** */
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 3


  14:../../libDaisy//src/hid/gatein.h **** class GateIn
  15:../../libDaisy//src/hid/gatein.h **** {
  16:../../libDaisy//src/hid/gatein.h ****   public:
  17:../../libDaisy//src/hid/gatein.h ****     /** GateIn 
  18:../../libDaisy//src/hid/gatein.h ****     Constructor 
  19:../../libDaisy//src/hid/gatein.h ****     */
  20:../../libDaisy//src/hid/gatein.h ****     GateIn() {}
  21:../../libDaisy//src/hid/gatein.h ****     /** GateIn~
  22:../../libDaisy//src/hid/gatein.h ****     Destructor 
  23:../../libDaisy//src/hid/gatein.h ****     */
  24:../../libDaisy//src/hid/gatein.h ****     ~GateIn() {}
  38              		.loc 2 24 5 view .LVU1
  39              		.loc 2 24 5 is_stmt 0 view .LVU2
  40              	.LBE207:
  41              	.LBB208:
  42              	.LBI208:
  43              		.loc 2 24 5 is_stmt 1 view .LVU3
  44              		.loc 2 24 5 is_stmt 0 view .LVU4
  45              	.LBE208:
  46              	.LBB209:
  47              	.LBI209:
  48              		.file 3 "../../libDaisy//src/dev/codec_pcm3060.h"
   1:../../libDaisy//src/dev/codec_pcm3060.h **** #pragma once
   2:../../libDaisy//src/dev/codec_pcm3060.h **** #ifndef DSY_CODEC_PCM3060_H
   3:../../libDaisy//src/dev/codec_pcm3060.h **** #define DSY_CODEC_PCM3060_H
   4:../../libDaisy//src/dev/codec_pcm3060.h **** #include "per/i2c.h"
   5:../../libDaisy//src/dev/codec_pcm3060.h **** namespace daisy
   6:../../libDaisy//src/dev/codec_pcm3060.h **** {
   7:../../libDaisy//src/dev/codec_pcm3060.h **** /**
   8:../../libDaisy//src/dev/codec_pcm3060.h ****  * @brief Driver for the TI PCM3060 Audio Codec.
   9:../../libDaisy//src/dev/codec_pcm3060.h ****  * @addtogroup codec
  10:../../libDaisy//src/dev/codec_pcm3060.h ****  * 
  11:../../libDaisy//src/dev/codec_pcm3060.h ****  * For now this is a limited interface that uses I2C to communicate with the PCM3060
  12:../../libDaisy//src/dev/codec_pcm3060.h ****  * The device can also be accessed with SPI, which is not yet supported.
  13:../../libDaisy//src/dev/codec_pcm3060.h ****  * 
  14:../../libDaisy//src/dev/codec_pcm3060.h ****  * For now all registers are set to their defaults, and the Init function will 
  15:../../libDaisy//src/dev/codec_pcm3060.h ****  * perform a MRST and SRST before setting the format to 24bit LJ, and disabling 
  16:../../libDaisy//src/dev/codec_pcm3060.h ****  * power save for both the ADC and DAC.
  17:../../libDaisy//src/dev/codec_pcm3060.h ****  *
  18:../../libDaisy//src/dev/codec_pcm3060.h ****  */
  19:../../libDaisy//src/dev/codec_pcm3060.h **** class Pcm3060
  20:../../libDaisy//src/dev/codec_pcm3060.h **** {
  21:../../libDaisy//src/dev/codec_pcm3060.h ****   public:
  22:../../libDaisy//src/dev/codec_pcm3060.h ****     enum class Result
  23:../../libDaisy//src/dev/codec_pcm3060.h ****     {
  24:../../libDaisy//src/dev/codec_pcm3060.h ****         OK,
  25:../../libDaisy//src/dev/codec_pcm3060.h ****         ERR,
  26:../../libDaisy//src/dev/codec_pcm3060.h ****     };
  27:../../libDaisy//src/dev/codec_pcm3060.h **** 
  28:../../libDaisy//src/dev/codec_pcm3060.h ****     Pcm3060() {}
  29:../../libDaisy//src/dev/codec_pcm3060.h ****     ~Pcm3060() {}
  49              		.loc 3 29 5 is_stmt 1 view .LVU5
  50              		.loc 3 29 5 is_stmt 0 view .LVU6
  51              	.LBE209:
  52              	.LBB210:
  53              	.LBI210:
  54              		.file 4 "../../libDaisy//src/hid/usb.h"
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 4


   1:../../libDaisy//src/hid/usb.h **** #pragma once
   2:../../libDaisy//src/hid/usb.h **** #ifndef DSY_HID_USB_H
   3:../../libDaisy//src/hid/usb.h **** #define DSY_HID_USB_H
   4:../../libDaisy//src/hid/usb.h **** #include <stdint.h>
   5:../../libDaisy//src/hid/usb.h **** #include <stdlib.h>
   6:../../libDaisy//src/hid/usb.h **** 
   7:../../libDaisy//src/hid/usb.h **** namespace daisy
   8:../../libDaisy//src/hid/usb.h **** /** @addtogroup human_interface
   9:../../libDaisy//src/hid/usb.h ****     @{
  10:../../libDaisy//src/hid/usb.h **** */
  11:../../libDaisy//src/hid/usb.h **** 
  12:../../libDaisy//src/hid/usb.h **** {
  13:../../libDaisy//src/hid/usb.h **** /** 
  14:../../libDaisy//src/hid/usb.h ****     @brief Interface for initializing and using the USB Peripherals on the daisy
  15:../../libDaisy//src/hid/usb.h ****     @author Stephen Hensley
  16:../../libDaisy//src/hid/usb.h ****     @date December 2019
  17:../../libDaisy//src/hid/usb.h **** */
  18:../../libDaisy//src/hid/usb.h **** class UsbHandle
  19:../../libDaisy//src/hid/usb.h **** {
  20:../../libDaisy//src/hid/usb.h ****   public:
  21:../../libDaisy//src/hid/usb.h ****     /** Return values for USBHandle Functions */
  22:../../libDaisy//src/hid/usb.h ****     enum class Result
  23:../../libDaisy//src/hid/usb.h ****     {
  24:../../libDaisy//src/hid/usb.h ****         OK,
  25:../../libDaisy//src/hid/usb.h ****         ERR,
  26:../../libDaisy//src/hid/usb.h ****     };
  27:../../libDaisy//src/hid/usb.h **** 
  28:../../libDaisy//src/hid/usb.h ****     /** Specified which of the two USB Peripherals to initialize. */
  29:../../libDaisy//src/hid/usb.h ****     enum UsbPeriph
  30:../../libDaisy//src/hid/usb.h ****     {
  31:../../libDaisy//src/hid/usb.h ****         FS_INTERNAL, /**< Internal pin */
  32:../../libDaisy//src/hid/usb.h ****         FS_EXTERNAL, /**< FS External D+ pin is Pin 38 (GPIO32). FS External D- pin is Pin 37 (GPIO
  33:../../libDaisy//src/hid/usb.h ****         FS_BOTH,     /**< Both */
  34:../../libDaisy//src/hid/usb.h ****     };
  35:../../libDaisy//src/hid/usb.h **** 
  36:../../libDaisy//src/hid/usb.h **** 
  37:../../libDaisy//src/hid/usb.h ****     /** Function called upon reception of a buffer */
  38:../../libDaisy//src/hid/usb.h ****     typedef void (*ReceiveCallback)(uint8_t* buff, uint32_t* len);
  39:../../libDaisy//src/hid/usb.h **** 
  40:../../libDaisy//src/hid/usb.h ****     UsbHandle() {}
  41:../../libDaisy//src/hid/usb.h **** 
  42:../../libDaisy//src/hid/usb.h ****     ~UsbHandle() {}
  55              		.loc 4 42 5 is_stmt 1 view .LVU7
  56              		.loc 4 42 5 is_stmt 0 view .LVU8
  57              	.LBE210:
  58              	.LBB211:
  59              	.LBI211:
  60              		.file 5 "../../libDaisy//src/per/adc.h"
   1:../../libDaisy//src/per/adc.h **** #pragma once
   2:../../libDaisy//src/per/adc.h **** #ifndef DSY_ADC_H
   3:../../libDaisy//src/per/adc.h **** #define DSY_ADC_H /**< Macro */
   4:../../libDaisy//src/per/adc.h **** #include <stdint.h>
   5:../../libDaisy//src/per/adc.h **** #include <stdlib.h>
   6:../../libDaisy//src/per/adc.h **** #include "daisy_core.h"
   7:../../libDaisy//src/per/adc.h **** #include "per/gpio.h"
   8:../../libDaisy//src/per/adc.h **** 
   9:../../libDaisy//src/per/adc.h **** #define DSY_ADC_MAX_CHANNELS 16 /**< Maximum number of ADC channels */
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 5


  10:../../libDaisy//src/per/adc.h **** 
  11:../../libDaisy//src/per/adc.h **** namespace daisy
  12:../../libDaisy//src/per/adc.h **** {
  13:../../libDaisy//src/per/adc.h **** /** @addtogroup per_analog
  14:../../libDaisy//src/per/adc.h ****     @{
  15:../../libDaisy//src/per/adc.h **** */
  16:../../libDaisy//src/per/adc.h **** 
  17:../../libDaisy//src/per/adc.h **** /* While there may not be many configuration options here,
  18:../../libDaisy//src/per/adc.h **** using a struct like this allows us to add more configuration
  19:../../libDaisy//src/per/adc.h **** later without breaking existing functionality.
  20:../../libDaisy//src/per/adc.h **** */
  21:../../libDaisy//src/per/adc.h **** 
  22:../../libDaisy//src/per/adc.h **** /** @brief   Configuration Structure for an ADC Channel 
  23:../../libDaisy//src/per/adc.h ****  *  @details This can be used to configure a a single input, 
  24:../../libDaisy//src/per/adc.h ****  *           or a multiplexed input, allowing up to 8 inputs on 
  25:../../libDaisy//src/per/adc.h ****  *           one channel.
  26:../../libDaisy//src/per/adc.h ****  *  @note    Sharing data lines to multiple muxes _is_ possible, but
  27:../../libDaisy//src/per/adc.h ****  *           each channel sharing data lines must be set to the maximum
  28:../../libDaisy//src/per/adc.h ****  *           number of channels, even if some multiplexers have fewer
  29:../../libDaisy//src/per/adc.h ****  *           inputs connected.
  30:../../libDaisy//src/per/adc.h **** */
  31:../../libDaisy//src/per/adc.h **** struct AdcChannelConfig
  32:../../libDaisy//src/per/adc.h **** {
  33:../../libDaisy//src/per/adc.h ****     /** Which pin to use for multiplexing */
  34:../../libDaisy//src/per/adc.h ****     enum MuxPin
  35:../../libDaisy//src/per/adc.h ****     {
  36:../../libDaisy//src/per/adc.h ****         MUX_SEL_0,    /**< & */
  37:../../libDaisy//src/per/adc.h ****         MUX_SEL_1,    /**< & */
  38:../../libDaisy//src/per/adc.h ****         MUX_SEL_2,    /**< & */
  39:../../libDaisy//src/per/adc.h ****         MUX_SEL_LAST, /**< & */
  40:../../libDaisy//src/per/adc.h ****     };
  41:../../libDaisy//src/per/adc.h **** 
  42:../../libDaisy//src/per/adc.h ****     /** Initializes a single ADC pin as an ADC. 
  43:../../libDaisy//src/per/adc.h ****     \param pin Pin to init.
  44:../../libDaisy//src/per/adc.h ****      */
  45:../../libDaisy//src/per/adc.h ****     void InitSingle(dsy_gpio_pin pin);
  46:../../libDaisy//src/per/adc.h **** 
  47:../../libDaisy//src/per/adc.h ****     /** 
  48:../../libDaisy//src/per/adc.h ****     Initializes a single ADC pin as a Multiplexed ADC.
  49:../../libDaisy//src/per/adc.h ****     Requires a CD405X Multiplexer connected to the pin.
  50:../../libDaisy//src/per/adc.h ****     You only need to supply the mux pins that are required,
  51:../../libDaisy//src/per/adc.h ****     e.g. a 4052 mux would only require mux_0 and mux_1.
  52:../../libDaisy//src/per/adc.h ****     Internal Callbacks handle the pin addressing.
  53:../../libDaisy//src/per/adc.h ****     \param mux_channels must be 1-8
  54:../../libDaisy//src/per/adc.h ****     \param mux_0 First mux pin
  55:../../libDaisy//src/per/adc.h ****     \param mux_1 Second mux pin
  56:../../libDaisy//src/per/adc.h ****     \param mux_2 Third mux pin
  57:../../libDaisy//src/per/adc.h ****     \param adc_pin &
  58:../../libDaisy//src/per/adc.h ****     */
  59:../../libDaisy//src/per/adc.h ****     void InitMux(dsy_gpio_pin adc_pin,
  60:../../libDaisy//src/per/adc.h ****                  size_t       mux_channels,
  61:../../libDaisy//src/per/adc.h ****                  dsy_gpio_pin mux_0,
  62:../../libDaisy//src/per/adc.h ****                  dsy_gpio_pin mux_1 = {DSY_GPIOX, 0},
  63:../../libDaisy//src/per/adc.h ****                  dsy_gpio_pin mux_2 = {DSY_GPIOX, 0});
  64:../../libDaisy//src/per/adc.h **** 
  65:../../libDaisy//src/per/adc.h ****     dsy_gpio pin_;                   /**< & */
  66:../../libDaisy//src/per/adc.h ****     dsy_gpio mux_pin_[MUX_SEL_LAST]; /**< & */
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 6


  67:../../libDaisy//src/per/adc.h ****     uint8_t  mux_channels_;          /**< & */
  68:../../libDaisy//src/per/adc.h **** };
  69:../../libDaisy//src/per/adc.h **** 
  70:../../libDaisy//src/per/adc.h **** /**
  71:../../libDaisy//src/per/adc.h ****    @brief Handler for analog to digital conversion
  72:../../libDaisy//src/per/adc.h **** */
  73:../../libDaisy//src/per/adc.h **** class AdcHandle
  74:../../libDaisy//src/per/adc.h **** {
  75:../../libDaisy//src/per/adc.h ****   public:
  76:../../libDaisy//src/per/adc.h ****     /** Supported oversampling amounts */
  77:../../libDaisy//src/per/adc.h ****     enum OverSampling
  78:../../libDaisy//src/per/adc.h ****     {
  79:../../libDaisy//src/per/adc.h ****         OVS_NONE, /**< & */
  80:../../libDaisy//src/per/adc.h ****         OVS_4,    /**< & */
  81:../../libDaisy//src/per/adc.h ****         OVS_8,    /**< & */
  82:../../libDaisy//src/per/adc.h ****         OVS_16,   /**< & */
  83:../../libDaisy//src/per/adc.h ****         OVS_32,   /**< & */
  84:../../libDaisy//src/per/adc.h ****         OVS_64,   /**< & */
  85:../../libDaisy//src/per/adc.h ****         OVS_128,  /**< & */
  86:../../libDaisy//src/per/adc.h ****         OVS_256,  /**< & */
  87:../../libDaisy//src/per/adc.h ****         OVS_512,  /**< & */
  88:../../libDaisy//src/per/adc.h ****         OVS_1024, /**< & */
  89:../../libDaisy//src/per/adc.h ****         OVS_LAST, /**< & */
  90:../../libDaisy//src/per/adc.h ****     };
  91:../../libDaisy//src/per/adc.h **** 
  92:../../libDaisy//src/per/adc.h ****     AdcHandle() {}
  93:../../libDaisy//src/per/adc.h ****     ~AdcHandle() {}
  61              		.loc 5 93 5 is_stmt 1 view .LVU9
  62              		.loc 5 93 5 is_stmt 0 view .LVU10
  63              	.LBE211:
  64              	.LBB212:
  65              	.LBI212:
  66              		.file 6 "../../libDaisy//src/hid/audio.h"
   1:../../libDaisy//src/hid/audio.h **** #ifndef DSY_AUDIO_H
   2:../../libDaisy//src/hid/audio.h **** #define DSY_AUDIO_H /**< & */
   3:../../libDaisy//src/hid/audio.h **** 
   4:../../libDaisy//src/hid/audio.h **** #include "per/sai.h"
   5:../../libDaisy//src/hid/audio.h **** 
   6:../../libDaisy//src/hid/audio.h **** namespace daisy
   7:../../libDaisy//src/hid/audio.h **** {
   8:../../libDaisy//src/hid/audio.h **** /** @brief Audio Engine Handle
   9:../../libDaisy//src/hid/audio.h ****  *  @ingroup audio 
  10:../../libDaisy//src/hid/audio.h ****  *  @details This class allows for higher level access to an audio engine.
  11:../../libDaisy//src/hid/audio.h ****  *           If you're using a SOM like the DaisySeed or DaisyPatchSM (or any 
  12:../../libDaisy//src/hid/audio.h ****  *            board that includes one of those objects) then the intialization
  13:../../libDaisy//src/hid/audio.h ****  *            is already taken  care of.
  14:../../libDaisy//src/hid/audio.h ****  *           If you're setting up your own custom hardware, or need to make changes
  15:../../libDaisy//src/hid/audio.h ****  *           you will have to take the following steps:
  16:../../libDaisy//src/hid/audio.h ****  *             1. Create and Initialize an SaiHandle or two depending on your requirements
  17:../../libDaisy//src/hid/audio.h ****  *             2. Initialize the Audio Handle with the desired settings and the Initialized SaiHand
  18:../../libDaisy//src/hid/audio.h ****  *             3. If the connected codec requires special configuration or initialization, do so
  19:../../libDaisy//src/hid/audio.h ****  *             4. Write a callback method using either the AudioCallback or the InterleavingAudioCa
  20:../../libDaisy//src/hid/audio.h ****  *             5. Start the Audio using one of the StartAudio function
  21:../../libDaisy//src/hid/audio.h ****  */
  22:../../libDaisy//src/hid/audio.h **** class AudioHandle
  23:../../libDaisy//src/hid/audio.h **** {
  24:../../libDaisy//src/hid/audio.h ****   public:
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 7


  25:../../libDaisy//src/hid/audio.h ****     /** Manually configurable details about the Audio Engine */
  26:../../libDaisy//src/hid/audio.h ****     /** TODO: Figure out how to get samplerate in here. */
  27:../../libDaisy//src/hid/audio.h ****     struct Config
  28:../../libDaisy//src/hid/audio.h ****     {
  29:../../libDaisy//src/hid/audio.h ****         /** number of samples to process per callback */
  30:../../libDaisy//src/hid/audio.h ****         size_t blocksize;
  31:../../libDaisy//src/hid/audio.h **** 
  32:../../libDaisy//src/hid/audio.h ****         /**< Sample rate of audio */
  33:../../libDaisy//src/hid/audio.h ****         SaiHandle::Config::SampleRate samplerate;
  34:../../libDaisy//src/hid/audio.h **** 
  35:../../libDaisy//src/hid/audio.h ****         /** factor for adjustment before and after callback for hardware that may have extra headro
  36:../../libDaisy//src/hid/audio.h ****         float postgain;
  37:../../libDaisy//src/hid/audio.h **** 
  38:../../libDaisy//src/hid/audio.h ****         /** factor for additional one-sided compensation to audio path for hardware that may
  39:../../libDaisy//src/hid/audio.h ****          *  have unequal input/output ranges
  40:../../libDaisy//src/hid/audio.h ****          */
  41:../../libDaisy//src/hid/audio.h ****         float output_compensation;
  42:../../libDaisy//src/hid/audio.h **** 
  43:../../libDaisy//src/hid/audio.h ****         /** Sets default values for config struct */
  44:../../libDaisy//src/hid/audio.h ****         Config()
  45:../../libDaisy//src/hid/audio.h ****         : blocksize(48),
  46:../../libDaisy//src/hid/audio.h ****           samplerate(SaiHandle::Config::SampleRate::SAI_48KHZ),
  47:../../libDaisy//src/hid/audio.h ****           postgain(1.f),
  48:../../libDaisy//src/hid/audio.h ****           output_compensation(1.f)
  49:../../libDaisy//src/hid/audio.h ****         {
  50:../../libDaisy//src/hid/audio.h ****         }
  51:../../libDaisy//src/hid/audio.h ****     };
  52:../../libDaisy//src/hid/audio.h **** 
  53:../../libDaisy//src/hid/audio.h ****     enum class Result
  54:../../libDaisy//src/hid/audio.h ****     {
  55:../../libDaisy//src/hid/audio.h ****         OK,
  56:../../libDaisy//src/hid/audio.h ****         ERR,
  57:../../libDaisy//src/hid/audio.h ****     };
  58:../../libDaisy//src/hid/audio.h **** 
  59:../../libDaisy//src/hid/audio.h ****     /** Non-Interleaving input buffer
  60:../../libDaisy//src/hid/audio.h ****      * Buffer arranged by float[chn][sample] 
  61:../../libDaisy//src/hid/audio.h ****      * const so that the user can't modify the input
  62:../../libDaisy//src/hid/audio.h ****      */
  63:../../libDaisy//src/hid/audio.h ****     typedef const float* const* InputBuffer;
  64:../../libDaisy//src/hid/audio.h **** 
  65:../../libDaisy//src/hid/audio.h ****     /** Non-Interleaving output buffer
  66:../../libDaisy//src/hid/audio.h ****      * Arranged by float[chn][sample] 
  67:../../libDaisy//src/hid/audio.h ****      */
  68:../../libDaisy//src/hid/audio.h ****     typedef float** OutputBuffer;
  69:../../libDaisy//src/hid/audio.h **** 
  70:../../libDaisy//src/hid/audio.h ****     /** Type for a Non-Interleaving audio callback 
  71:../../libDaisy//src/hid/audio.h ****      * Non-Interleaving audio callbacks in daisy will be of this type
  72:../../libDaisy//src/hid/audio.h ****      */
  73:../../libDaisy//src/hid/audio.h ****     typedef void (*AudioCallback)(InputBuffer  in,
  74:../../libDaisy//src/hid/audio.h ****                                   OutputBuffer out,
  75:../../libDaisy//src/hid/audio.h ****                                   size_t       size);
  76:../../libDaisy//src/hid/audio.h **** 
  77:../../libDaisy//src/hid/audio.h ****     /** Interleaving Input buffer
  78:../../libDaisy//src/hid/audio.h ****      ** audio is prepared as { L0, R0, L1, R1, . . . LN, RN }]
  79:../../libDaisy//src/hid/audio.h ****      ** this is const, as the user shouldn't modify it
  80:../../libDaisy//src/hid/audio.h ****     */
  81:../../libDaisy//src/hid/audio.h ****     typedef const float* InterleavingInputBuffer;
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 8


  82:../../libDaisy//src/hid/audio.h **** 
  83:../../libDaisy//src/hid/audio.h ****     /** Interleaving Output buffer 
  84:../../libDaisy//src/hid/audio.h ****      ** audio is prepared as { L0, R0, L1, R1, . . . LN, RN }
  85:../../libDaisy//src/hid/audio.h ****     */
  86:../../libDaisy//src/hid/audio.h ****     typedef float* InterleavingOutputBuffer;
  87:../../libDaisy//src/hid/audio.h **** 
  88:../../libDaisy//src/hid/audio.h ****     /** Interleaving Audio Callback 
  89:../../libDaisy//src/hid/audio.h ****      * Interleaving audio callbacks in daisy must be of this type
  90:../../libDaisy//src/hid/audio.h ****      */
  91:../../libDaisy//src/hid/audio.h ****     typedef void (*InterleavingAudioCallback)(InterleavingInputBuffer  in,
  92:../../libDaisy//src/hid/audio.h ****                                               InterleavingOutputBuffer out,
  93:../../libDaisy//src/hid/audio.h ****                                               size_t                   size);
  94:../../libDaisy//src/hid/audio.h **** 
  95:../../libDaisy//src/hid/audio.h ****     AudioHandle() : pimpl_(nullptr) {}
  96:../../libDaisy//src/hid/audio.h ****     ~AudioHandle() {}
  67              		.loc 6 96 5 is_stmt 1 view .LVU11
  68              		.loc 6 96 5 is_stmt 0 view .LVU12
  69              	.LBE212:
  70              	.LBB213:
  71              	.LBI213:
  72              		.file 7 "../../libDaisy//src/sys/system.h"
   1:../../libDaisy//src/sys/system.h **** #ifndef DSY_SYSTEM_H
   2:../../libDaisy//src/sys/system.h **** #define DSY_SYSTEM_H
   3:../../libDaisy//src/sys/system.h **** 
   4:../../libDaisy//src/sys/system.h **** #ifndef UNIT_TEST // for unit tests, a dummy implementation is provided below
   5:../../libDaisy//src/sys/system.h **** 
   6:../../libDaisy//src/sys/system.h **** #include <cstdint>
   7:../../libDaisy//src/sys/system.h **** #include "per/tim.h"
   8:../../libDaisy//src/sys/system.h **** 
   9:../../libDaisy//src/sys/system.h **** namespace daisy
  10:../../libDaisy//src/sys/system.h **** {
  11:../../libDaisy//src/sys/system.h **** /** A handle for interacting with the Core System. 
  12:../../libDaisy//src/sys/system.h ****  ** This includes the Clock tree, MPU, global DMA initialization,
  13:../../libDaisy//src/sys/system.h ****  ** cache handling, and any other necessary global initiailzation
  14:../../libDaisy//src/sys/system.h ****  **
  15:../../libDaisy//src/sys/system.h ****  ** @author shensley
  16:../../libDaisy//src/sys/system.h ****  ** @ingroup system
  17:../../libDaisy//src/sys/system.h ****  */
  18:../../libDaisy//src/sys/system.h **** class System
  19:../../libDaisy//src/sys/system.h **** {
  20:../../libDaisy//src/sys/system.h ****   public:
  21:../../libDaisy//src/sys/system.h ****     /** Contains settings for initializing the System */
  22:../../libDaisy//src/sys/system.h ****     struct Config
  23:../../libDaisy//src/sys/system.h ****     {
  24:../../libDaisy//src/sys/system.h ****         /** Specifies the system clock frequency that feeds APB/AHB clocks, etc. */
  25:../../libDaisy//src/sys/system.h ****         enum class SysClkFreq
  26:../../libDaisy//src/sys/system.h ****         {
  27:../../libDaisy//src/sys/system.h ****             FREQ_400MHZ,
  28:../../libDaisy//src/sys/system.h ****             FREQ_480MHZ,
  29:../../libDaisy//src/sys/system.h ****         };
  30:../../libDaisy//src/sys/system.h **** 
  31:../../libDaisy//src/sys/system.h ****         /** Method to call on the struct to set to defaults
  32:../../libDaisy//src/sys/system.h ****          ** CPU Freq set to 400MHz
  33:../../libDaisy//src/sys/system.h ****          ** Cache Enabled 
  34:../../libDaisy//src/sys/system.h ****          ** */
  35:../../libDaisy//src/sys/system.h ****         void Defaults()
  36:../../libDaisy//src/sys/system.h ****         {
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 9


  37:../../libDaisy//src/sys/system.h ****             cpu_freq    = SysClkFreq::FREQ_400MHZ;
  38:../../libDaisy//src/sys/system.h ****             use_dcache  = true;
  39:../../libDaisy//src/sys/system.h ****             use_icache  = true;
  40:../../libDaisy//src/sys/system.h ****             skip_clocks = false;
  41:../../libDaisy//src/sys/system.h ****         }
  42:../../libDaisy//src/sys/system.h **** 
  43:../../libDaisy//src/sys/system.h ****         /** Method to call on the struct to set to boost mode:
  44:../../libDaisy//src/sys/system.h ****          ** CPU Freq set to 480MHz
  45:../../libDaisy//src/sys/system.h ****          ** Cache Enabled 
  46:../../libDaisy//src/sys/system.h ****          ** */
  47:../../libDaisy//src/sys/system.h ****         void Boost()
  48:../../libDaisy//src/sys/system.h ****         {
  49:../../libDaisy//src/sys/system.h ****             cpu_freq    = SysClkFreq::FREQ_480MHZ;
  50:../../libDaisy//src/sys/system.h ****             use_dcache  = true;
  51:../../libDaisy//src/sys/system.h ****             use_icache  = true;
  52:../../libDaisy//src/sys/system.h ****             skip_clocks = false;
  53:../../libDaisy//src/sys/system.h ****         }
  54:../../libDaisy//src/sys/system.h **** 
  55:../../libDaisy//src/sys/system.h ****         SysClkFreq cpu_freq;
  56:../../libDaisy//src/sys/system.h ****         bool       use_dcache;
  57:../../libDaisy//src/sys/system.h ****         bool       use_icache;
  58:../../libDaisy//src/sys/system.h ****         bool       skip_clocks;
  59:../../libDaisy//src/sys/system.h ****     };
  60:../../libDaisy//src/sys/system.h **** 
  61:../../libDaisy//src/sys/system.h ****     /** Describes the different regions of memory available to the Daisy
  62:../../libDaisy//src/sys/system.h ****      * 
  63:../../libDaisy//src/sys/system.h ****      */
  64:../../libDaisy//src/sys/system.h ****     enum MemoryRegion
  65:../../libDaisy//src/sys/system.h ****     {
  66:../../libDaisy//src/sys/system.h ****         INTERNAL_FLASH = 0,
  67:../../libDaisy//src/sys/system.h ****         ITCMRAM,
  68:../../libDaisy//src/sys/system.h ****         DTCMRAM,
  69:../../libDaisy//src/sys/system.h ****         SRAM_D1,
  70:../../libDaisy//src/sys/system.h ****         SRAM_D2,
  71:../../libDaisy//src/sys/system.h ****         SRAM_D3,
  72:../../libDaisy//src/sys/system.h ****         SDRAM,
  73:../../libDaisy//src/sys/system.h ****         QSPI,
  74:../../libDaisy//src/sys/system.h ****         INVALID_ADDRESS,
  75:../../libDaisy//src/sys/system.h ****     };
  76:../../libDaisy//src/sys/system.h **** 
  77:../../libDaisy//src/sys/system.h ****     System() {}
  78:../../libDaisy//src/sys/system.h ****     ~System() {}
  73              		.loc 7 78 5 is_stmt 1 view .LVU13
  74              		.loc 7 78 5 is_stmt 0 view .LVU14
  75              	.LBE213:
  76              		.loc 1 65 26 view .LVU15
  77 0000 7047     		bx	lr
  78              		.cfi_endproc
  79              	.LFE2529:
  81              		.weak	_ZN5daisy8patch_sm12DaisyPatchSMD1Ev
  82              		.thumb_set _ZN5daisy8patch_sm12DaisyPatchSMD1Ev,_ZN5daisy8patch_sm12DaisyPatchSMD2Ev
  83 0002 00BF     		.section	.text._Z13AudioCallbackPKPKfPPfj,"ax",%progbits
  84              		.align	1
  85              		.p2align 2,,3
  86              		.global	_Z13AudioCallbackPKPKfPPfj
  87              		.syntax unified
  88              		.thumb
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 10


  89              		.thumb_func
  90              		.fpu fpv5-d16
  92              	_Z13AudioCallbackPKPKfPPfj:
  93              	.LVL1:
  94              	.LFB4838:
  95              		.file 8 "TFT_TEST.cpp"
   1:TFT_TEST.cpp  **** #include "daisy_patch_sm.h"
   2:TFT_TEST.cpp  **** #include "daisysp.h"
   3:TFT_TEST.cpp  **** #include "ili9341_ui_driver.hpp"
   4:TFT_TEST.cpp  **** 
   5:TFT_TEST.cpp  **** using namespace daisy;
   6:TFT_TEST.cpp  **** using namespace patch_sm;
   7:TFT_TEST.cpp  **** using namespace daisysp;
   8:TFT_TEST.cpp  **** using DisplayInit = ILI9341SpiTransport;
   9:TFT_TEST.cpp  **** using DisplayUi = UiDriver;
  10:TFT_TEST.cpp  **** 
  11:TFT_TEST.cpp  **** DaisyPatchSM	hw;
  12:TFT_TEST.cpp  **** DisplayInit		di;
  13:TFT_TEST.cpp  **** DisplayUi		du;
  14:TFT_TEST.cpp  **** 
  15:TFT_TEST.cpp  **** void AudioCallback(AudioHandle::InputBuffer in, AudioHandle::OutputBuffer out, size_t size)
  16:TFT_TEST.cpp  **** {
  96              		.loc 8 16 1 is_stmt 1 view -0
  97              		.cfi_startproc
  98              		@ args = 0, pretend = 0, frame = 0
  99              		@ frame_needed = 0, uses_anonymous_args = 0
  17:TFT_TEST.cpp  **** 	hw.ProcessAllControls();
 100              		.loc 8 17 2 view .LVU17
 101              	.LBB214:
 102              	.LBI214:
  66:../../libDaisy//src/daisy_patch_sm.h **** 
  67:../../libDaisy//src/daisy_patch_sm.h ****         /** Initializes the memories, and core peripherals for the Daisy Patch SM */
  68:../../libDaisy//src/daisy_patch_sm.h ****         void Init();
  69:../../libDaisy//src/daisy_patch_sm.h **** 
  70:../../libDaisy//src/daisy_patch_sm.h ****         /** Starts a non-interleaving audio callback */
  71:../../libDaisy//src/daisy_patch_sm.h ****         void StartAudio(AudioHandle::AudioCallback cb);
  72:../../libDaisy//src/daisy_patch_sm.h **** 
  73:../../libDaisy//src/daisy_patch_sm.h ****         /** Starts an interleaving audio callback */
  74:../../libDaisy//src/daisy_patch_sm.h ****         void StartAudio(AudioHandle::InterleavingAudioCallback cb);
  75:../../libDaisy//src/daisy_patch_sm.h **** 
  76:../../libDaisy//src/daisy_patch_sm.h ****         /** Changes the callback that is executing.
  77:../../libDaisy//src/daisy_patch_sm.h ****          *  This may cause clicks if done while audio is processing.
  78:../../libDaisy//src/daisy_patch_sm.h ****          */
  79:../../libDaisy//src/daisy_patch_sm.h ****         void ChangeAudioCallback(AudioHandle::AudioCallback cb);
  80:../../libDaisy//src/daisy_patch_sm.h **** 
  81:../../libDaisy//src/daisy_patch_sm.h ****         /** Changes the callback that is executing.
  82:../../libDaisy//src/daisy_patch_sm.h ****          *  This may cause clicks if done while audio is processing.
  83:../../libDaisy//src/daisy_patch_sm.h ****          */
  84:../../libDaisy//src/daisy_patch_sm.h ****         void ChangeAudioCallback(AudioHandle::InterleavingAudioCallback cb);
  85:../../libDaisy//src/daisy_patch_sm.h **** 
  86:../../libDaisy//src/daisy_patch_sm.h ****         /** Stops the transmission of audio. */
  87:../../libDaisy//src/daisy_patch_sm.h ****         void StopAudio();
  88:../../libDaisy//src/daisy_patch_sm.h **** 
  89:../../libDaisy//src/daisy_patch_sm.h ****         /** Sets the number of samples processed in an audio callback. 
  90:../../libDaisy//src/daisy_patch_sm.h ****          *  This will only take effect on the next invocation of `StartAudio`
  91:../../libDaisy//src/daisy_patch_sm.h ****          */
  92:../../libDaisy//src/daisy_patch_sm.h ****         void SetAudioBlockSize(size_t size);
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 11


  93:../../libDaisy//src/daisy_patch_sm.h **** 
  94:../../libDaisy//src/daisy_patch_sm.h ****         /** Sets the samplerate for the audio engine 
  95:../../libDaisy//src/daisy_patch_sm.h ****          *  This will set it to the closest valid samplerate. Options being:
  96:../../libDaisy//src/daisy_patch_sm.h ****          *  8kHz, 16kHz, 32kHz, 48kHz, and 96kHz
  97:../../libDaisy//src/daisy_patch_sm.h ****          */
  98:../../libDaisy//src/daisy_patch_sm.h ****         void SetAudioSampleRate(float sr);
  99:../../libDaisy//src/daisy_patch_sm.h **** 
 100:../../libDaisy//src/daisy_patch_sm.h ****         void SetAudioSampleRate(SaiHandle::Config::SampleRate sample_rate);
 101:../../libDaisy//src/daisy_patch_sm.h **** 
 102:../../libDaisy//src/daisy_patch_sm.h ****         /** Returns the number of samples processed in an audio callback */
 103:../../libDaisy//src/daisy_patch_sm.h ****         size_t AudioBlockSize();
 104:../../libDaisy//src/daisy_patch_sm.h **** 
 105:../../libDaisy//src/daisy_patch_sm.h ****         /** Returns the audio engine's samplerate in Hz */
 106:../../libDaisy//src/daisy_patch_sm.h ****         float AudioSampleRate();
 107:../../libDaisy//src/daisy_patch_sm.h **** 
 108:../../libDaisy//src/daisy_patch_sm.h ****         /** Returns the rate at which the audio callback will be called in Hz */
 109:../../libDaisy//src/daisy_patch_sm.h ****         float AudioCallbackRate();
 110:../../libDaisy//src/daisy_patch_sm.h **** 
 111:../../libDaisy//src/daisy_patch_sm.h ****         /** Starts the Control ADCs 
 112:../../libDaisy//src/daisy_patch_sm.h ****          * 
 113:../../libDaisy//src/daisy_patch_sm.h ****          *  This is started automatically when Init() is called.
 114:../../libDaisy//src/daisy_patch_sm.h ****          */
 115:../../libDaisy//src/daisy_patch_sm.h ****         void StartAdc();
 116:../../libDaisy//src/daisy_patch_sm.h **** 
 117:../../libDaisy//src/daisy_patch_sm.h ****         /** Stops the Control ADCs */
 118:../../libDaisy//src/daisy_patch_sm.h ****         void StopAdc();
 119:../../libDaisy//src/daisy_patch_sm.h **** 
 120:../../libDaisy//src/daisy_patch_sm.h ****         /** Reads and filters all of the analog control inputs */
 121:../../libDaisy//src/daisy_patch_sm.h ****         void ProcessAnalogControls();
 122:../../libDaisy//src/daisy_patch_sm.h **** 
 123:../../libDaisy//src/daisy_patch_sm.h ****         /** Reads and debounces any of the digital control inputs 
 124:../../libDaisy//src/daisy_patch_sm.h ****          *  This does nothing on this board at this time.
 125:../../libDaisy//src/daisy_patch_sm.h ****          */
 126:../../libDaisy//src/daisy_patch_sm.h ****         void ProcessDigitalControls();
 127:../../libDaisy//src/daisy_patch_sm.h **** 
 128:../../libDaisy//src/daisy_patch_sm.h ****         /** Does both of the above */
 129:../../libDaisy//src/daisy_patch_sm.h ****         void ProcessAllControls()
 103              		.loc 1 129 14 view .LVU18
 104              	.LBB215:
 130:../../libDaisy//src/daisy_patch_sm.h ****         {
 131:../../libDaisy//src/daisy_patch_sm.h ****             ProcessAnalogControls();
 105              		.loc 1 131 13 view .LVU19
 106              	.LBE215:
 107              	.LBE214:
  16:TFT_TEST.cpp  **** 	hw.ProcessAllControls();
 108              		.loc 8 16 1 is_stmt 0 view .LVU20
 109 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 110              		.cfi_def_cfa_offset 24
 111              		.cfi_offset 3, -24
 112              		.cfi_offset 4, -20
 113              		.cfi_offset 5, -16
 114              		.cfi_offset 6, -12
 115              		.cfi_offset 7, -8
 116              		.cfi_offset 14, -4
  16:TFT_TEST.cpp  **** 	hw.ProcessAllControls();
 117              		.loc 8 16 1 view .LVU21
 118 0002 1546     		mov	r5, r2
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 12


 119 0004 0746     		mov	r7, r0
 120              	.LBB218:
 121              	.LBB216:
 122              		.loc 1 131 34 view .LVU22
 123 0006 0C48     		ldr	r0, .L11
 124              	.LVL2:
 125              		.loc 1 131 34 view .LVU23
 126              	.LBE216:
 127              	.LBE218:
  16:TFT_TEST.cpp  **** 	hw.ProcessAllControls();
 128              		.loc 8 16 1 view .LVU24
 129 0008 0E46     		mov	r6, r1
 130              	.LBB219:
 131              	.LBB217:
 132              		.loc 1 131 34 view .LVU25
 133 000a FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM21ProcessAnalogControlsEv
 134              	.LVL3:
 132:../../libDaisy//src/daisy_patch_sm.h ****             ProcessDigitalControls();
 135              		.loc 1 132 13 is_stmt 1 view .LVU26
 136              		.loc 1 132 35 is_stmt 0 view .LVU27
 137 000e 0A48     		ldr	r0, .L11
 138 0010 FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM22ProcessDigitalControlsEv
 139              	.LVL4:
 140              		.loc 1 132 35 view .LVU28
 141              	.LBE217:
 142              	.LBE219:
  18:TFT_TEST.cpp  **** 	for (size_t i = 0; i < size; i++)
 143              		.loc 8 18 2 is_stmt 1 view .LVU29
 144              	.LBB220:
 145              		.loc 8 18 23 view .LVU30
 146 0014 7DB1     		cbz	r5, .L3
 147 0016 3B68     		ldr	r3, [r7]
 148 0018 3468     		ldr	r4, [r6]
 149 001a 7868     		ldr	r0, [r7, #4]
 150 001c 03EB850C 		add	ip, r3, r5, lsl #2
 151 0020 7168     		ldr	r1, [r6, #4]
 152              	.LVL5:
 153              	.L5:
  19:TFT_TEST.cpp  **** 	{
  20:TFT_TEST.cpp  **** 		OUT_L[i] = IN_L[i];
 154              		.loc 8 20 3 discriminator 2 view .LVU31
 155              		.loc 8 20 20 is_stmt 0 discriminator 2 view .LVU32
 156 0022 53F8042B 		ldr	r2, [r3], #4	@ float
 157              		.loc 8 20 12 discriminator 2 view .LVU33
 158 0026 44F8042B 		str	r2, [r4], #4	@ float
  21:TFT_TEST.cpp  **** 		OUT_R[i] = IN_R[i];
 159              		.loc 8 21 3 is_stmt 1 discriminator 2 view .LVU34
  18:TFT_TEST.cpp  **** 	for (size_t i = 0; i < size; i++)
 160              		.loc 8 18 23 is_stmt 0 discriminator 2 view .LVU35
 161 002a 6345     		cmp	r3, ip
 162              		.loc 8 21 20 discriminator 2 view .LVU36
 163 002c 50F8042B 		ldr	r2, [r0], #4	@ float
 164              		.loc 8 21 12 discriminator 2 view .LVU37
 165 0030 41F8042B 		str	r2, [r1], #4	@ float
  18:TFT_TEST.cpp  **** 	for (size_t i = 0; i < size; i++)
 166              		.loc 8 18 2 is_stmt 1 discriminator 2 view .LVU38
  18:TFT_TEST.cpp  **** 	for (size_t i = 0; i < size; i++)
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 13


 167              		.loc 8 18 23 discriminator 2 view .LVU39
 168 0034 F5D1     		bne	.L5
 169              	.L3:
 170              	.LBE220:
  22:TFT_TEST.cpp  **** 	}
  23:TFT_TEST.cpp  **** }
 171              		.loc 8 23 1 is_stmt 0 view .LVU40
 172 0036 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 173              	.LVL6:
 174              	.L12:
 175              		.loc 8 23 1 view .LVU41
 176              		.align	2
 177              	.L11:
 178 0038 00000000 		.word	.LANCHOR0
 179              		.cfi_endproc
 180              	.LFE4838:
 182              		.section	.text._ZN19ILI9341SpiTransport4InitEv,"axG",%progbits,_ZN19ILI9341SpiTransport4InitEv,com
 183              		.align	1
 184              		.p2align 2,,3
 185              		.weak	_ZN19ILI9341SpiTransport4InitEv
 186              		.syntax unified
 187              		.thumb
 188              		.thumb_func
 189              		.fpu fpv5-d16
 191              	_ZN19ILI9341SpiTransport4InitEv:
 192              	.LVL7:
 193              	.LFB4793:
 194              		.file 9 "ili9341_ui_driver.hpp"
   1:ili9341_ui_driver.hpp **** #pragma once
   2:ili9341_ui_driver.hpp **** #ifndef ILI_UI_HPP
   3:ili9341_ui_driver.hpp **** #define ILI_UI_HPP
   4:ili9341_ui_driver.hpp **** 
   5:ili9341_ui_driver.hpp **** #include <cstring>
   6:ili9341_ui_driver.hpp **** 
   7:ili9341_ui_driver.hpp **** #include "daisy_seed.h"
   8:ili9341_ui_driver.hpp **** #include "daisy_patch_sm.h"
   9:ili9341_ui_driver.hpp **** #include "util/oled_fonts.h"
  10:ili9341_ui_driver.hpp **** #include "hid/disp/graphics_common.h"
  11:ili9341_ui_driver.hpp **** 
  12:ili9341_ui_driver.hpp **** using namespace daisy;
  13:ili9341_ui_driver.hpp **** using namespace patch_sm;
  14:ili9341_ui_driver.hpp **** 
  15:ili9341_ui_driver.hpp **** DaisyPatchSM       psm;
  16:ili9341_ui_driver.hpp **** 
  17:ili9341_ui_driver.hpp **** // #define SPI1_NSS 7    // LCD CS 3
  18:ili9341_ui_driver.hpp **** // #define SPI1_SCK 8    // LCD SCK 7
  19:ili9341_ui_driver.hpp **** // #define SPI1_MOSI 10  // LCD MOSI 6
  20:ili9341_ui_driver.hpp **** // #define ADC1_INP15 16 // PIN 23 - LCD RST 4
  21:ili9341_ui_driver.hpp **** // #define DAC1_OUT2 22  //PIN 29 - LCD DC 5
  22:ili9341_ui_driver.hpp **** 
  23:ili9341_ui_driver.hpp **** // #define SPI1_MISO 9 // Not used
  24:ili9341_ui_driver.hpp **** // #define I2C1_SCL 11
  25:ili9341_ui_driver.hpp **** // #define I2C1_SDA 12
  26:ili9341_ui_driver.hpp **** 
  27:ili9341_ui_driver.hpp **** enum TFT_COLOR
  28:ili9341_ui_driver.hpp **** {
  29:ili9341_ui_driver.hpp ****     COLOR_BLACK = 0,
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 14


  30:ili9341_ui_driver.hpp ****     COLOR_WHITE,
  31:ili9341_ui_driver.hpp ****     COLOR_BLUE,
  32:ili9341_ui_driver.hpp ****     COLOR_DARK_BLUE,
  33:ili9341_ui_driver.hpp ****     COLOR_CYAN,
  34:ili9341_ui_driver.hpp ****     COLOR_YELLOW,
  35:ili9341_ui_driver.hpp ****     COLOR_DARK_YELLOW,
  36:ili9341_ui_driver.hpp ****     COLOR_ORANGE,
  37:ili9341_ui_driver.hpp ****     COLOR_RED,
  38:ili9341_ui_driver.hpp ****     COLOR_DARK_RED,
  39:ili9341_ui_driver.hpp ****     COLOR_GREEN,
  40:ili9341_ui_driver.hpp ****     COLOR_DARK_GREEN,
  41:ili9341_ui_driver.hpp ****     COLOR_LIGHT_GREEN,
  42:ili9341_ui_driver.hpp ****     COLOR_GRAY,
  43:ili9341_ui_driver.hpp ****     COLOR_DARK_GRAY,
  44:ili9341_ui_driver.hpp ****     COLOR_LIGHT_GRAY,
  45:ili9341_ui_driver.hpp ****     COLOR_MEDIUM_GRAY,
  46:ili9341_ui_driver.hpp ****     COLOR_ABL_BG,
  47:ili9341_ui_driver.hpp ****     COLOR_ABL_LINE,
  48:ili9341_ui_driver.hpp ****     COLOR_ABL_D_LINE,
  49:ili9341_ui_driver.hpp ****     COLOR_ABL_L_GRAY,
  50:ili9341_ui_driver.hpp ****     COLOR_ABL_M_GRAY,
  51:ili9341_ui_driver.hpp ****     NUMBER_OF_TFT_COLORS
  52:ili9341_ui_driver.hpp **** };
  53:ili9341_ui_driver.hpp **** 
  54:ili9341_ui_driver.hpp **** /**
  55:ili9341_ui_driver.hpp ****  * SPI Transport for ILI9341 TFT display devices
  56:ili9341_ui_driver.hpp ****  */
  57:ili9341_ui_driver.hpp **** class ILI9341SpiTransport
  58:ili9341_ui_driver.hpp **** {
  59:ili9341_ui_driver.hpp ****   public:
  60:ili9341_ui_driver.hpp ****     void Init()
 195              		.loc 9 60 10 is_stmt 1 view -0
 196              		.cfi_startproc
 197              		@ args = 0, pretend = 0, frame = 40
 198              		@ frame_needed = 0, uses_anonymous_args = 0
  61:ili9341_ui_driver.hpp ****     {
  62:ili9341_ui_driver.hpp ****         // Initialize SPI
  63:ili9341_ui_driver.hpp ****         SpiHandle::Config spi_config;
 199              		.loc 9 63 9 view .LVU43
  60:ili9341_ui_driver.hpp ****     {
 200              		.loc 9 60 10 is_stmt 0 view .LVU44
 201 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 202              		.cfi_def_cfa_offset 24
 203              		.cfi_offset 4, -24
 204              		.cfi_offset 5, -20
 205              		.cfi_offset 6, -16
 206              		.cfi_offset 7, -12
 207              		.cfi_offset 8, -8
 208              		.cfi_offset 14, -4
  64:ili9341_ui_driver.hpp ****         spi_config.periph    = SpiHandle::Config::Peripheral::SPI_2;
  65:ili9341_ui_driver.hpp ****         spi_config.mode      = SpiHandle::Config::Mode::MASTER;
  66:ili9341_ui_driver.hpp ****         spi_config.direction = SpiHandle::Config::Direction::TWO_LINES_TX_ONLY;
  67:ili9341_ui_driver.hpp ****         spi_config.clock_polarity  = SpiHandle::Config::ClockPolarity::LOW;
  68:ili9341_ui_driver.hpp ****         spi_config.baud_prescaler  = SpiHandle::Config::BaudPrescaler::PS_2;
  69:ili9341_ui_driver.hpp ****         spi_config.clock_phase     = SpiHandle::Config::ClockPhase::ONE_EDGE;
  70:ili9341_ui_driver.hpp ****         spi_config.nss             = SpiHandle::Config::NSS::HARD_OUTPUT;
  71:ili9341_ui_driver.hpp ****         spi_config.datasize        = 8;
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 15


  72:ili9341_ui_driver.hpp ****         spi_config.pin_config.sclk = psm.GetPin(DaisyPatchSM::PinBank::D, 10);;
 209              		.loc 9 72 77 view .LVU45
 210 0004 264F     		ldr	r7, .L15
  60:ili9341_ui_driver.hpp ****     {
 211              		.loc 9 60 10 view .LVU46
 212 0006 8AB0     		sub	sp, sp, #40
 213              		.cfi_def_cfa_offset 64
 214              	.LVL8:
 215              	.LBB221:
 216              	.LBI221:
 217              		.file 10 "../../libDaisy//src/per/spi.h"
   1:../../libDaisy//src/per/spi.h **** #pragma once
   2:../../libDaisy//src/per/spi.h **** #ifndef DSY_SPI_H
   3:../../libDaisy//src/per/spi.h **** #define DSY_SPI_H
   4:../../libDaisy//src/per/spi.h **** 
   5:../../libDaisy//src/per/spi.h **** #include "daisy_core.h"
   6:../../libDaisy//src/per/spi.h **** 
   7:../../libDaisy//src/per/spi.h **** /* TODO:
   8:../../libDaisy//src/per/spi.h **** - Add documentation
   9:../../libDaisy//src/per/spi.h **** - Add IT
  10:../../libDaisy//src/per/spi.h **** */
  11:../../libDaisy//src/per/spi.h **** 
  12:../../libDaisy//src/per/spi.h **** namespace daisy
  13:../../libDaisy//src/per/spi.h **** {
  14:../../libDaisy//src/per/spi.h **** /** @addtogroup serial
  15:../../libDaisy//src/per/spi.h **** @{
  16:../../libDaisy//src/per/spi.h **** */
  17:../../libDaisy//src/per/spi.h **** 
  18:../../libDaisy//src/per/spi.h **** /**  Handler for serial peripheral interface */
  19:../../libDaisy//src/per/spi.h **** class SpiHandle
  20:../../libDaisy//src/per/spi.h **** {
  21:../../libDaisy//src/per/spi.h ****   public:
  22:../../libDaisy//src/per/spi.h ****     struct Config
  23:../../libDaisy//src/per/spi.h ****     {
  24:../../libDaisy//src/per/spi.h ****         enum class Peripheral
  25:../../libDaisy//src/per/spi.h ****         {
  26:../../libDaisy//src/per/spi.h ****             SPI_1,
  27:../../libDaisy//src/per/spi.h ****             SPI_2,
  28:../../libDaisy//src/per/spi.h ****             SPI_3,
  29:../../libDaisy//src/per/spi.h ****             SPI_4,
  30:../../libDaisy//src/per/spi.h ****             SPI_5,
  31:../../libDaisy//src/per/spi.h ****             SPI_6,
  32:../../libDaisy//src/per/spi.h ****         };
  33:../../libDaisy//src/per/spi.h **** 
  34:../../libDaisy//src/per/spi.h ****         enum class Mode
  35:../../libDaisy//src/per/spi.h ****         {
  36:../../libDaisy//src/per/spi.h ****             MASTER,
  37:../../libDaisy//src/per/spi.h ****             SLAVE,
  38:../../libDaisy//src/per/spi.h ****         };
  39:../../libDaisy//src/per/spi.h **** 
  40:../../libDaisy//src/per/spi.h ****         enum class Direction
  41:../../libDaisy//src/per/spi.h ****         {
  42:../../libDaisy//src/per/spi.h ****             TWO_LINES,
  43:../../libDaisy//src/per/spi.h ****             TWO_LINES_TX_ONLY,
  44:../../libDaisy//src/per/spi.h ****             TWO_LINES_RX_ONLY,
  45:../../libDaisy//src/per/spi.h ****             ONE_LINE,
  46:../../libDaisy//src/per/spi.h ****         };
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 16


  47:../../libDaisy//src/per/spi.h **** 
  48:../../libDaisy//src/per/spi.h ****         enum class ClockPolarity
  49:../../libDaisy//src/per/spi.h ****         {
  50:../../libDaisy//src/per/spi.h ****             LOW,
  51:../../libDaisy//src/per/spi.h ****             HIGH,
  52:../../libDaisy//src/per/spi.h ****         };
  53:../../libDaisy//src/per/spi.h **** 
  54:../../libDaisy//src/per/spi.h ****         enum class ClockPhase
  55:../../libDaisy//src/per/spi.h ****         {
  56:../../libDaisy//src/per/spi.h ****             ONE_EDGE,
  57:../../libDaisy//src/per/spi.h ****             TWO_EDGE,
  58:../../libDaisy//src/per/spi.h ****         };
  59:../../libDaisy//src/per/spi.h **** 
  60:../../libDaisy//src/per/spi.h ****         enum class NSS
  61:../../libDaisy//src/per/spi.h ****         {
  62:../../libDaisy//src/per/spi.h ****             SOFT,
  63:../../libDaisy//src/per/spi.h ****             HARD_INPUT,
  64:../../libDaisy//src/per/spi.h ****             HARD_OUTPUT,
  65:../../libDaisy//src/per/spi.h ****         };
  66:../../libDaisy//src/per/spi.h **** 
  67:../../libDaisy//src/per/spi.h ****         enum class BaudPrescaler
  68:../../libDaisy//src/per/spi.h ****         {
  69:../../libDaisy//src/per/spi.h ****             PS_2,
  70:../../libDaisy//src/per/spi.h ****             PS_4,
  71:../../libDaisy//src/per/spi.h ****             PS_8,
  72:../../libDaisy//src/per/spi.h ****             PS_16,
  73:../../libDaisy//src/per/spi.h ****             PS_32,
  74:../../libDaisy//src/per/spi.h ****             PS_64,
  75:../../libDaisy//src/per/spi.h ****             PS_128,
  76:../../libDaisy//src/per/spi.h ****             PS_256,
  77:../../libDaisy//src/per/spi.h ****         };
  78:../../libDaisy//src/per/spi.h **** 
  79:../../libDaisy//src/per/spi.h ****         struct
  80:../../libDaisy//src/per/spi.h ****         {
  81:../../libDaisy//src/per/spi.h ****             dsy_gpio_pin sclk; /**< & */
  82:../../libDaisy//src/per/spi.h ****             dsy_gpio_pin miso; /**< & */
  83:../../libDaisy//src/per/spi.h ****             dsy_gpio_pin mosi; /**< & */
  84:../../libDaisy//src/per/spi.h ****             dsy_gpio_pin nss;  /**< & */
  85:../../libDaisy//src/per/spi.h ****         } pin_config;
  86:../../libDaisy//src/per/spi.h **** 
  87:../../libDaisy//src/per/spi.h ****         Config()
 218              		.loc 10 87 9 is_stmt 1 view .LVU47
 219              	.LBB222:
 220              	.LBB223:
  88:../../libDaisy//src/per/spi.h ****         {
  89:../../libDaisy//src/per/spi.h ****             // user must specify periph, mode, direction, nss, and pin_config
  90:../../libDaisy//src/per/spi.h ****             datasize       = 8;
 221              		.loc 10 90 13 view .LVU48
 222              	.LBE223:
 223              	.LBE222:
 224              	.LBE221:
  64:ili9341_ui_driver.hpp ****         spi_config.mode      = SpiHandle::Config::Mode::MASTER;
 225              		.loc 9 64 30 is_stmt 0 view .LVU49
 226 0008 0125     		movs	r5, #1
 227              	.LBB230:
 228              	.LBB227:
 229              	.LBB224:
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 17


  91:../../libDaisy//src/per/spi.h ****             clock_polarity = ClockPolarity::LOW;
 230              		.loc 10 91 28 view .LVU50
 231 000a 0026     		movs	r6, #0
  90:../../libDaisy//src/per/spi.h ****             clock_polarity = ClockPolarity::LOW;
 232              		.loc 10 90 28 view .LVU51
 233 000c 0823     		movs	r3, #8
 234              	.LBE224:
 235              	.LBE227:
 236              	.LBE230:
  70:ili9341_ui_driver.hpp ****         spi_config.datasize        = 8;
 237              		.loc 9 70 36 view .LVU52
 238 000e 4FF00208 		mov	r8, #2
  60:ili9341_ui_driver.hpp ****     {
 239              		.loc 9 60 10 view .LVU53
 240 0012 0446     		mov	r4, r0
 241              		.loc 9 72 77 view .LVU54
 242 0014 0A22     		movs	r2, #10
 243 0016 0321     		movs	r1, #3
 244 0018 3846     		mov	r0, r7
 245              	.LVL9:
 246              	.LBB231:
 247              	.LBB228:
 248              	.LBB225:
  90:../../libDaisy//src/per/spi.h ****             clock_polarity = ClockPolarity::LOW;
 249              		.loc 10 90 28 view .LVU55
 250 001a 0593     		str	r3, [sp, #20]
 251              		.loc 10 91 13 is_stmt 1 view .LVU56
 252              	.LBE225:
 253              	.LBE228:
 254              	.LBE231:
  66:ili9341_ui_driver.hpp ****         spi_config.clock_polarity  = SpiHandle::Config::ClockPolarity::LOW;
 255              		.loc 9 66 30 is_stmt 0 view .LVU57
 256 001c 0495     		str	r5, [sp, #16]
 257              	.LBB232:
 258              	.LBB229:
 259              	.LBB226:
  92:../../libDaisy//src/per/spi.h ****             clock_phase    = ClockPhase::ONE_EDGE;
 260              		.loc 10 92 28 view .LVU58
 261 001e CDE90666 		strd	r6, r6, [sp, #24]
  93:../../libDaisy//src/per/spi.h ****             baud_prescaler = BaudPrescaler::PS_8;
 262              		.loc 10 93 13 is_stmt 1 view .LVU59
 263              	.LVL10:
 264              		.loc 10 93 13 is_stmt 0 view .LVU60
 265              	.LBE226:
 266              	.LBE229:
 267              	.LBE232:
  64:ili9341_ui_driver.hpp ****         spi_config.mode      = SpiHandle::Config::Mode::MASTER;
 268              		.loc 9 64 9 is_stmt 1 view .LVU61
  65:ili9341_ui_driver.hpp ****         spi_config.direction = SpiHandle::Config::Direction::TWO_LINES_TX_ONLY;
 269              		.loc 9 65 30 is_stmt 0 view .LVU62
 270 0022 CDE90256 		strd	r5, r6, [sp, #8]
  66:ili9341_ui_driver.hpp ****         spi_config.clock_polarity  = SpiHandle::Config::ClockPolarity::LOW;
 271              		.loc 9 66 9 is_stmt 1 view .LVU63
  67:ili9341_ui_driver.hpp ****         spi_config.baud_prescaler  = SpiHandle::Config::BaudPrescaler::PS_2;
 272              		.loc 9 67 9 view .LVU64
  68:ili9341_ui_driver.hpp ****         spi_config.clock_phase     = SpiHandle::Config::ClockPhase::ONE_EDGE;
 273              		.loc 9 68 9 view .LVU65
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 18


  70:ili9341_ui_driver.hpp ****         spi_config.datasize        = 8;
 274              		.loc 9 70 36 is_stmt 0 view .LVU66
 275 0026 CDE90886 		strd	r8, r6, [sp, #32]
  71:ili9341_ui_driver.hpp ****         spi_config.pin_config.sclk = psm.GetPin(DaisyPatchSM::PinBank::D, 10);;
 276              		.loc 9 71 9 is_stmt 1 view .LVU67
 277              		.loc 9 72 9 view .LVU68
 278              		.loc 9 72 77 is_stmt 0 view .LVU69
 279 002a FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM6GetPinENS1_7PinBankEi
 280              	.LVL11:
  73:ili9341_ui_driver.hpp ****         spi_config.pin_config.mosi = psm.GetPin(DaisyPatchSM::PinBank::D, 9);
 281              		.loc 9 73 76 view .LVU70
 282 002e 0922     		movs	r2, #9
  72:ili9341_ui_driver.hpp ****         spi_config.pin_config.mosi = psm.GetPin(DaisyPatchSM::PinBank::D, 9);
 283              		.loc 9 72 77 view .LVU71
 284 0030 ADF80000 		strh	r0, [sp]	@ movhi
  72:ili9341_ui_driver.hpp ****         spi_config.pin_config.mosi = psm.GetPin(DaisyPatchSM::PinBank::D, 9);
 285              		.loc 9 72 79 is_stmt 1 view .LVU72
 286              		.loc 9 73 9 view .LVU73
 287              		.loc 9 73 76 is_stmt 0 view .LVU74
 288 0034 0321     		movs	r1, #3
 289 0036 3846     		mov	r0, r7
 290 0038 FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM6GetPinENS1_7PinBankEi
 291              	.LVL12:
  74:ili9341_ui_driver.hpp ****         spi_config.pin_config.nss  = psm.GetPin(DaisyPatchSM::PinBank::D, 1);
 292              		.loc 9 74 76 view .LVU75
 293 003c 2A46     		mov	r2, r5
  73:ili9341_ui_driver.hpp ****         spi_config.pin_config.mosi = psm.GetPin(DaisyPatchSM::PinBank::D, 9);
 294              		.loc 9 73 76 view .LVU76
 295 003e ADF80400 		strh	r0, [sp, #4]	@ movhi
 296              		.loc 9 74 9 is_stmt 1 view .LVU77
 297              		.loc 9 74 76 is_stmt 0 view .LVU78
 298 0042 0321     		movs	r1, #3
 299 0044 3846     		mov	r0, r7
 300 0046 FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM6GetPinENS1_7PinBankEi
 301              	.LVL13:
  75:ili9341_ui_driver.hpp ****         // spi_config.pin_config.miso = {DSY_GPIOX, 0}; // not used
  76:ili9341_ui_driver.hpp **** 
  77:ili9341_ui_driver.hpp **** 
  78:ili9341_ui_driver.hpp ****         // v0.1 mix up
  79:ili9341_ui_driver.hpp ****         //auto dc_pin    = psm.GetPin(DaisyPatchSM::PinBank::A, 2);
  80:ili9341_ui_driver.hpp ****         //auto reset_pin = psm.GetPin(DaisyPatchSM::PinBank::A, 3);
  81:ili9341_ui_driver.hpp ****         // auto dc_pin    = 22;
  82:ili9341_ui_driver.hpp ****         // auto reset_pin = 16;
  83:ili9341_ui_driver.hpp **** 
  84:ili9341_ui_driver.hpp **** 
  85:ili9341_ui_driver.hpp ****         // DC pin
  86:ili9341_ui_driver.hpp ****         pin_dc_.mode = DSY_GPIO_MODE_OUTPUT_PP;
  87:ili9341_ui_driver.hpp ****         pin_dc_.pin  = psm.GetPin(DaisyPatchSM::PinBank::A, 2);
 302              		.loc 9 87 62 view .LVU79
 303 004a 4246     		mov	r2, r8
 304 004c 3146     		mov	r1, r6
  74:ili9341_ui_driver.hpp ****         spi_config.pin_config.nss  = psm.GetPin(DaisyPatchSM::PinBank::D, 1);
 305              		.loc 9 74 76 view .LVU80
 306 004e ADF80600 		strh	r0, [sp, #6]	@ movhi
  86:ili9341_ui_driver.hpp ****         pin_dc_.pin  = psm.GetPin(DaisyPatchSM::PinBank::A, 2);
 307              		.loc 9 86 9 is_stmt 1 view .LVU81
  86:ili9341_ui_driver.hpp ****         pin_dc_.pin  = psm.GetPin(DaisyPatchSM::PinBank::A, 2);
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 19


 308              		.loc 9 86 22 is_stmt 0 view .LVU82
 309 0052 A575     		strb	r5, [r4, #22]
 310              		.loc 9 87 9 is_stmt 1 view .LVU83
 311              		.loc 9 87 62 is_stmt 0 view .LVU84
 312 0054 3846     		mov	r0, r7
 313 0056 FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM6GetPinENS1_7PinBankEi
 314              	.LVL14:
 315 005a 2346     		mov	r3, r4
 316 005c 23F8140F 		strh	r0, [r3, #20]!	@ movhi
  88:ili9341_ui_driver.hpp ****         dsy_gpio_init(&pin_dc_);
 317              		.loc 9 88 9 is_stmt 1 view .LVU85
 318              		.loc 9 88 22 is_stmt 0 view .LVU86
 319 0060 1846     		mov	r0, r3
 320 0062 FFF7FEFF 		bl	dsy_gpio_init
 321              	.LVL15:
  89:ili9341_ui_driver.hpp ****         // Reset pin
  90:ili9341_ui_driver.hpp ****         pin_reset_.mode = DSY_GPIO_MODE_OUTPUT_PP;
 322              		.loc 9 90 9 is_stmt 1 view .LVU87
  91:ili9341_ui_driver.hpp ****         pin_reset_.pin  = psm.GetPin(DaisyPatchSM::PinBank::A, 3);
 323              		.loc 9 91 65 is_stmt 0 view .LVU88
 324 0066 3146     		mov	r1, r6
 325 0068 0322     		movs	r2, #3
 326 006a 3846     		mov	r0, r7
  90:ili9341_ui_driver.hpp ****         pin_reset_.pin  = psm.GetPin(DaisyPatchSM::PinBank::A, 3);
 327              		.loc 9 90 25 view .LVU89
 328 006c A574     		strb	r5, [r4, #18]
 329              		.loc 9 91 9 is_stmt 1 view .LVU90
 330              		.loc 9 91 65 is_stmt 0 view .LVU91
 331 006e FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM6GetPinENS1_7PinBankEi
 332              	.LVL16:
 333 0072 2346     		mov	r3, r4
 334 0074 23F8100F 		strh	r0, [r3, #16]!	@ movhi
  92:ili9341_ui_driver.hpp ****         dsy_gpio_init(&pin_reset_);
 335              		.loc 9 92 9 is_stmt 1 view .LVU92
 336              		.loc 9 92 22 is_stmt 0 view .LVU93
 337 0078 1846     		mov	r0, r3
 338 007a FFF7FEFF 		bl	dsy_gpio_init
 339              	.LVL17:
  93:ili9341_ui_driver.hpp ****         // CS pin
  94:ili9341_ui_driver.hpp ****         pin_cs_.mode = DSY_GPIO_MODE_OUTPUT_PP;
 340              		.loc 9 94 9 is_stmt 1 view .LVU94
  95:ili9341_ui_driver.hpp ****         pin_cs_.pin  = spi_config.pin_config.nss;
 341              		.loc 9 95 22 is_stmt 0 view .LVU95
 342 007e BDF80630 		ldrh	r3, [sp, #6]
 343 0082 2046     		mov	r0, r4
  94:ili9341_ui_driver.hpp ****         pin_cs_.pin  = spi_config.pin_config.nss;
 344              		.loc 9 94 22 view .LVU96
 345 0084 A576     		strb	r5, [r4, #26]
 346              		.loc 9 95 9 is_stmt 1 view .LVU97
 347              		.loc 9 95 22 is_stmt 0 view .LVU98
 348 0086 20F8183F 		strh	r3, [r0, #24]!	@ movhi
  96:ili9341_ui_driver.hpp ****         dsy_gpio_init(&pin_cs_);
 349              		.loc 9 96 9 is_stmt 1 view .LVU99
 350              		.loc 9 96 22 is_stmt 0 view .LVU100
 351 008a FFF7FEFF 		bl	dsy_gpio_init
 352              	.LVL18:
  97:ili9341_ui_driver.hpp **** 
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 20


  98:ili9341_ui_driver.hpp ****         spi_.Init(spi_config);
 353              		.loc 9 98 9 is_stmt 1 view .LVU101
 354              		.loc 9 98 18 is_stmt 0 view .LVU102
 355 008e 6946     		mov	r1, sp
 356 0090 04F10C00 		add	r0, r4, #12
 357 0094 FFF7FEFF 		bl	_ZN5daisy9SpiHandle4InitERKNS0_6ConfigE
 358              	.LVL19:
  99:ili9341_ui_driver.hpp ****     };
 359              		.loc 9 99 5 view .LVU103
 360 0098 0AB0     		add	sp, sp, #40
 361              		.cfi_def_cfa_offset 24
 362              		@ sp needed
 363 009a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 364              	.LVL20:
 365              	.L16:
 366              		.loc 9 99 5 view .LVU104
 367 009e 00BF     		.align	2
 368              	.L15:
 369 00a0 00000000 		.word	.LANCHOR1
 370              		.cfi_endproc
 371              	.LFE4793:
 373              		.section	.text.startup.main,"ax",%progbits
 374              		.align	1
 375              		.p2align 2,,3
 376              		.global	main
 377              		.syntax unified
 378              		.thumb
 379              		.thumb_func
 380              		.fpu fpv5-d16
 382              	main:
 383              	.LFB4839:
  24:TFT_TEST.cpp  **** 
  25:TFT_TEST.cpp  **** int main(void)
  26:TFT_TEST.cpp  **** {
 384              		.loc 8 26 1 is_stmt 1 view -0
 385              		.cfi_startproc
 386              		@ Volatile: function does not return.
 387              		@ args = 0, pretend = 0, frame = 0
 388              		@ frame_needed = 0, uses_anonymous_args = 0
  27:TFT_TEST.cpp  **** 	di.Init();
 389              		.loc 8 27 2 view .LVU106
 390              		.loc 8 27 9 is_stmt 0 view .LVU107
 391 0000 4A48     		ldr	r0, .L41
  26:TFT_TEST.cpp  **** 	di.Init();
 392              		.loc 8 26 1 view .LVU108
 393 0002 80B5     		push	{r7, lr}
 394              		.cfi_def_cfa_offset 8
 395              		.cfi_offset 7, -8
 396              		.cfi_offset 14, -4
 397              		.loc 8 27 9 view .LVU109
 398 0004 FFF7FEFF 		bl	_ZN19ILI9341SpiTransport4InitEv
 399              	.LVL21:
  28:TFT_TEST.cpp  **** 	du.DrawRect(4,4,100,100,COLOR_RED);
 400              		.loc 8 28 2 is_stmt 1 view .LVU110
 401              	.LBB279:
 402              	.LBI279:
 100:ili9341_ui_driver.hpp **** 
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 21


 101:ili9341_ui_driver.hpp ****     void Reset()
 102:ili9341_ui_driver.hpp ****     {
 103:ili9341_ui_driver.hpp ****         dsy_gpio_write(&pin_reset_, 0);
 104:ili9341_ui_driver.hpp ****         System::Delay(100);
 105:ili9341_ui_driver.hpp ****         dsy_gpio_write(&pin_reset_, 1);
 106:ili9341_ui_driver.hpp ****         System::Delay(100);
 107:ili9341_ui_driver.hpp ****     }
 108:ili9341_ui_driver.hpp **** 
 109:ili9341_ui_driver.hpp ****     // an internal function to handle SPI DMA callbacks
 110:ili9341_ui_driver.hpp ****     // called when an DMA transmission completes and the next driver must be updated
 111:ili9341_ui_driver.hpp ****     static void TxCompleteCallback(void* context, SpiHandle::Result result)
 112:ili9341_ui_driver.hpp ****     {
 113:ili9341_ui_driver.hpp ****         if(result == SpiHandle::Result::OK)
 114:ili9341_ui_driver.hpp ****         {
 115:ili9341_ui_driver.hpp ****             auto transport     = static_cast<ILI9341SpiTransport*>(context);
 116:ili9341_ui_driver.hpp ****             auto transfer_size = transport->GetTransferSize();
 117:ili9341_ui_driver.hpp ****             transport->remaining_buff -= transfer_size;
 118:ili9341_ui_driver.hpp ****             if(transport->remaining_buff > 0)
 119:ili9341_ui_driver.hpp ****             {
 120:ili9341_ui_driver.hpp ****                 transport->SendDataDMA(
 121:ili9341_ui_driver.hpp ****                     &frm_buf[full_screen_buf - transport->remaining_buff],
 122:ili9341_ui_driver.hpp ****                     transfer_size);
 123:ili9341_ui_driver.hpp ****             }
 124:ili9341_ui_driver.hpp ****             else
 125:ili9341_ui_driver.hpp ****             {
 126:ili9341_ui_driver.hpp ****                 transport->dma_busy = false;
 127:ili9341_ui_driver.hpp ****             }
 128:ili9341_ui_driver.hpp ****         }
 129:ili9341_ui_driver.hpp ****     }
 130:ili9341_ui_driver.hpp **** 
 131:ili9341_ui_driver.hpp ****     uint32_t GetTransferSize()
 132:ili9341_ui_driver.hpp ****     {
 133:ili9341_ui_driver.hpp ****         return remaining_buff < buf_chunk_size ? remaining_buff
 134:ili9341_ui_driver.hpp ****                                                : buf_chunk_size;
 135:ili9341_ui_driver.hpp ****     }
 136:ili9341_ui_driver.hpp **** 
 137:ili9341_ui_driver.hpp ****     void SendCommand(uint8_t cmd)
 138:ili9341_ui_driver.hpp ****     {
 139:ili9341_ui_driver.hpp ****         dsy_gpio_write(&pin_dc_, 0);
 140:ili9341_ui_driver.hpp ****         spi_.BlockingTransmit(&cmd, 1);
 141:ili9341_ui_driver.hpp ****     };
 142:ili9341_ui_driver.hpp **** 
 143:ili9341_ui_driver.hpp ****     SpiHandle::Result SendData(uint8_t* buff, size_t size)
 144:ili9341_ui_driver.hpp ****     {
 145:ili9341_ui_driver.hpp ****         dsy_gpio_write(&pin_dc_, 1);
 146:ili9341_ui_driver.hpp ****         return spi_.BlockingTransmit(buff, size);
 147:ili9341_ui_driver.hpp ****     };
 148:ili9341_ui_driver.hpp **** 
 149:ili9341_ui_driver.hpp ****     SpiHandle::Result SendDataDMA(uint8_t* buff, size_t size)
 150:ili9341_ui_driver.hpp ****     {
 151:ili9341_ui_driver.hpp ****         dsy_gpio_write(&pin_dc_, 1);
 152:ili9341_ui_driver.hpp ****         return spi_.DmaTransmit(buff, size, nullptr, &TxCompleteCallback, this);
 153:ili9341_ui_driver.hpp ****     };
 154:ili9341_ui_driver.hpp **** 
 155:ili9341_ui_driver.hpp **** 
 156:ili9341_ui_driver.hpp ****     SpiHandle::Result SendDataDMA()
 157:ili9341_ui_driver.hpp ****     {
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 22


 158:ili9341_ui_driver.hpp ****         dsy_gpio_write(&pin_dc_, 1);
 159:ili9341_ui_driver.hpp ****         remaining_buff = full_screen_buf;
 160:ili9341_ui_driver.hpp ****         dma_busy       = true;
 161:ili9341_ui_driver.hpp ****         return spi_.DmaTransmit(
 162:ili9341_ui_driver.hpp ****             frm_buf, buf_chunk_size, nullptr, &TxCompleteCallback, this);
 163:ili9341_ui_driver.hpp ****     };
 164:ili9341_ui_driver.hpp **** 
 165:ili9341_ui_driver.hpp ****     void SetAddressWindow(uint16_t x0, uint16_t y0, uint16_t x1, uint16_t y1)
 166:ili9341_ui_driver.hpp ****     {
 167:ili9341_ui_driver.hpp ****         // column address set
 168:ili9341_ui_driver.hpp ****         SendCommand(0x2A); // CASET
 169:ili9341_ui_driver.hpp ****         {
 170:ili9341_ui_driver.hpp ****             uint8_t data[4] = {static_cast<uint8_t>((x0 >> 8) & 0xFF),
 171:ili9341_ui_driver.hpp ****                                static_cast<uint8_t>(x0 & 0xFF),
 172:ili9341_ui_driver.hpp ****                                static_cast<uint8_t>((x1 >> 8) & 0xFF),
 173:ili9341_ui_driver.hpp ****                                static_cast<uint8_t>(x1 & 0xFF)};
 174:ili9341_ui_driver.hpp ****             SendData(data, 4);
 175:ili9341_ui_driver.hpp ****         }
 176:ili9341_ui_driver.hpp **** 
 177:ili9341_ui_driver.hpp ****         // row address set
 178:ili9341_ui_driver.hpp ****         SendCommand(0x2B); // RASET
 179:ili9341_ui_driver.hpp ****         {
 180:ili9341_ui_driver.hpp ****             uint8_t data[4] = {static_cast<uint8_t>((y0 >> 8) & 0xFF),
 181:ili9341_ui_driver.hpp ****                                static_cast<uint8_t>(y0 & 0xFF),
 182:ili9341_ui_driver.hpp ****                                static_cast<uint8_t>((y1 >> 8) & 0xFF),
 183:ili9341_ui_driver.hpp ****                                static_cast<uint8_t>(y1 & 0xFF)};
 184:ili9341_ui_driver.hpp ****             SendData(data, 4);
 185:ili9341_ui_driver.hpp ****         }
 186:ili9341_ui_driver.hpp **** 
 187:ili9341_ui_driver.hpp ****         // write to RAM
 188:ili9341_ui_driver.hpp ****         SendCommand(0x2C); // RAMWR
 189:ili9341_ui_driver.hpp ****     }
 190:ili9341_ui_driver.hpp **** 
 191:ili9341_ui_driver.hpp ****     void PaintPixel(uint32_t id, uint32_t color)
 192:ili9341_ui_driver.hpp ****     {
 193:ili9341_ui_driver.hpp ****         frm_buf[id]     = color >> 8;
 194:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 195:ili9341_ui_driver.hpp ****     }
 196:ili9341_ui_driver.hpp **** 
 197:ili9341_ui_driver.hpp ****     bool           dma_busy       = false;
 198:ili9341_ui_driver.hpp ****     uint32_t       remaining_buff = 0;
 199:ili9341_ui_driver.hpp ****     const uint16_t buf_chunk_size = 51200; // UINT16_MAX
 200:ili9341_ui_driver.hpp **** 
 201:ili9341_ui_driver.hpp ****     static uint32_t const full_screen_buf = 153600; // 320 * 240 * 2
 202:ili9341_ui_driver.hpp ****     static uint8_t DMA_BUFFER_MEM_SECTION frm_buf[full_screen_buf];
 203:ili9341_ui_driver.hpp **** 
 204:ili9341_ui_driver.hpp ****   private:
 205:ili9341_ui_driver.hpp ****     SpiHandle spi_;
 206:ili9341_ui_driver.hpp ****     dsy_gpio  pin_reset_;
 207:ili9341_ui_driver.hpp ****     dsy_gpio  pin_dc_;
 208:ili9341_ui_driver.hpp ****     dsy_gpio  pin_cs_;
 209:ili9341_ui_driver.hpp **** };
 210:ili9341_ui_driver.hpp **** 
 211:ili9341_ui_driver.hpp **** 
 212:ili9341_ui_driver.hpp **** /**
 213:ili9341_ui_driver.hpp ****  * A driver implementation for the ILI9341
 214:ili9341_ui_driver.hpp ****  */
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 23


 215:ili9341_ui_driver.hpp **** // class ILI9341Driver
 216:ili9341_ui_driver.hpp **** class UiDriver
 217:ili9341_ui_driver.hpp **** {
 218:ili9341_ui_driver.hpp ****   public:
 219:ili9341_ui_driver.hpp ****     enum class Orientation
 220:ili9341_ui_driver.hpp ****     {
 221:ili9341_ui_driver.hpp ****         Default = 0,
 222:ili9341_ui_driver.hpp ****         RRight,
 223:ili9341_ui_driver.hpp ****         RLeft,
 224:ili9341_ui_driver.hpp ****         UpsideDown,
 225:ili9341_ui_driver.hpp ****     };
 226:ili9341_ui_driver.hpp **** 
 227:ili9341_ui_driver.hpp ****     void Init()
 228:ili9341_ui_driver.hpp ****     {
 229:ili9341_ui_driver.hpp ****         screen_update_period_ = 17; // 17 is roughly 60Hz
 230:ili9341_ui_driver.hpp ****         screen_update_last_   = System::GetNow();
 231:ili9341_ui_driver.hpp ****         InitPalette();
 232:ili9341_ui_driver.hpp **** 
 233:ili9341_ui_driver.hpp ****         InitDriver();
 234:ili9341_ui_driver.hpp ****     }
 235:ili9341_ui_driver.hpp **** 
 236:ili9341_ui_driver.hpp ****     void InitDriver()
 237:ili9341_ui_driver.hpp ****     {
 238:ili9341_ui_driver.hpp ****         transport_.Init();
 239:ili9341_ui_driver.hpp **** 
 240:ili9341_ui_driver.hpp ****         SetOrientation(Orientation::RLeft);
 241:ili9341_ui_driver.hpp **** 
 242:ili9341_ui_driver.hpp ****         transport_.Reset();
 243:ili9341_ui_driver.hpp **** 
 244:ili9341_ui_driver.hpp ****         //Software Reset
 245:ili9341_ui_driver.hpp ****         transport_.SendCommand(0x01);
 246:ili9341_ui_driver.hpp ****         System::Delay(100); // TODO: maybe less?
 247:ili9341_ui_driver.hpp **** 
 248:ili9341_ui_driver.hpp ****         // command list is based on https://github.com/martnak/STM32-ILI9341
 249:ili9341_ui_driver.hpp **** 
 250:ili9341_ui_driver.hpp ****         // POWER CONTROL A
 251:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xCB);
 252:ili9341_ui_driver.hpp ****         {
 253:ili9341_ui_driver.hpp ****             uint8_t data[5] = {0x39, 0x2C, 0x00, 0x34, 0x02};
 254:ili9341_ui_driver.hpp ****             transport_.SendData(data, 5);
 255:ili9341_ui_driver.hpp ****         }
 256:ili9341_ui_driver.hpp **** 
 257:ili9341_ui_driver.hpp ****         // POWER CONTROL B
 258:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xCF);
 259:ili9341_ui_driver.hpp ****         {
 260:ili9341_ui_driver.hpp ****             uint8_t data[3] = {0x00, 0xC1, 0x30};
 261:ili9341_ui_driver.hpp ****             transport_.SendData(data, 3);
 262:ili9341_ui_driver.hpp ****         }
 263:ili9341_ui_driver.hpp **** 
 264:ili9341_ui_driver.hpp ****         // DRIVER TIMING CONTROL A
 265:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xE8);
 266:ili9341_ui_driver.hpp ****         {
 267:ili9341_ui_driver.hpp ****             uint8_t data[3] = {0x85, 0x00, 0x78};
 268:ili9341_ui_driver.hpp ****             transport_.SendData(data, 3);
 269:ili9341_ui_driver.hpp ****         }
 270:ili9341_ui_driver.hpp **** 
 271:ili9341_ui_driver.hpp ****         // DRIVER TIMING CONTROL B
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 24


 272:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xEA);
 273:ili9341_ui_driver.hpp ****         {
 274:ili9341_ui_driver.hpp ****             uint8_t data[2] = {0x00, 0x00};
 275:ili9341_ui_driver.hpp ****             transport_.SendData(data, 2);
 276:ili9341_ui_driver.hpp ****         }
 277:ili9341_ui_driver.hpp **** 
 278:ili9341_ui_driver.hpp ****         // POWER ON SEQUENCE CONTROL
 279:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xED);
 280:ili9341_ui_driver.hpp ****         {
 281:ili9341_ui_driver.hpp ****             uint8_t data[4] = {0x64, 0x03, 0x12, 0x81};
 282:ili9341_ui_driver.hpp ****             transport_.SendData(data, 4);
 283:ili9341_ui_driver.hpp ****         }
 284:ili9341_ui_driver.hpp **** 
 285:ili9341_ui_driver.hpp ****         // PUMP RATIO CONTROL
 286:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xF7);
 287:ili9341_ui_driver.hpp ****         {
 288:ili9341_ui_driver.hpp ****             uint8_t data[1] = {0x20};
 289:ili9341_ui_driver.hpp ****             transport_.SendData(data, 1);
 290:ili9341_ui_driver.hpp ****         }
 291:ili9341_ui_driver.hpp **** 
 292:ili9341_ui_driver.hpp ****         // POWER CONTROL,VRH[5:0]
 293:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xC0);
 294:ili9341_ui_driver.hpp ****         {
 295:ili9341_ui_driver.hpp ****             uint8_t data[1] = {0x23};
 296:ili9341_ui_driver.hpp ****             transport_.SendData(data, 1);
 297:ili9341_ui_driver.hpp ****         }
 298:ili9341_ui_driver.hpp **** 
 299:ili9341_ui_driver.hpp ****         // POWER CONTROL,SAP[2:0];BT[3:0]
 300:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xC1);
 301:ili9341_ui_driver.hpp ****         {
 302:ili9341_ui_driver.hpp ****             uint8_t data[1] = {0x10};
 303:ili9341_ui_driver.hpp ****             transport_.SendData(data, 1);
 304:ili9341_ui_driver.hpp ****         }
 305:ili9341_ui_driver.hpp **** 
 306:ili9341_ui_driver.hpp ****         // VCM CONTROL
 307:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xC5);
 308:ili9341_ui_driver.hpp ****         {
 309:ili9341_ui_driver.hpp ****             uint8_t data[2] = {0x3E, 0x28};
 310:ili9341_ui_driver.hpp ****             transport_.SendData(data, 2);
 311:ili9341_ui_driver.hpp ****         }
 312:ili9341_ui_driver.hpp **** 
 313:ili9341_ui_driver.hpp ****         // VCM CONTROL 2
 314:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xC7);
 315:ili9341_ui_driver.hpp ****         {
 316:ili9341_ui_driver.hpp ****             uint8_t data[1] = {0x86};
 317:ili9341_ui_driver.hpp ****             transport_.SendData(data, 1);
 318:ili9341_ui_driver.hpp ****         }
 319:ili9341_ui_driver.hpp **** 
 320:ili9341_ui_driver.hpp ****         // MEMORY ACCESS CONTROL
 321:ili9341_ui_driver.hpp ****         transport_.SendCommand(0x36);
 322:ili9341_ui_driver.hpp ****         {
 323:ili9341_ui_driver.hpp ****             uint8_t data[1] = {0x48};
 324:ili9341_ui_driver.hpp ****             transport_.SendData(data, 1);
 325:ili9341_ui_driver.hpp ****         }
 326:ili9341_ui_driver.hpp **** 
 327:ili9341_ui_driver.hpp ****         // PIXEL FORMAT
 328:ili9341_ui_driver.hpp ****         transport_.SendCommand(0x3A);
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 25


 329:ili9341_ui_driver.hpp ****         {
 330:ili9341_ui_driver.hpp ****             uint8_t data[1] = {0x55};
 331:ili9341_ui_driver.hpp ****             transport_.SendData(data, 1);
 332:ili9341_ui_driver.hpp ****         }
 333:ili9341_ui_driver.hpp **** 
 334:ili9341_ui_driver.hpp ****         // FRAME RATIO CONTROL, STANDARD RGB COLOR
 335:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xB1);
 336:ili9341_ui_driver.hpp ****         {
 337:ili9341_ui_driver.hpp ****             uint8_t data[2] = {0x00, 0x18};
 338:ili9341_ui_driver.hpp ****             transport_.SendData(data, 2);
 339:ili9341_ui_driver.hpp ****         }
 340:ili9341_ui_driver.hpp **** 
 341:ili9341_ui_driver.hpp ****         // DISPLAY FUNCTION CONTROL
 342:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xB6);
 343:ili9341_ui_driver.hpp ****         {
 344:ili9341_ui_driver.hpp ****             uint8_t data[3] = {0x08, 0x82, 0x27};
 345:ili9341_ui_driver.hpp ****             transport_.SendData(data, 3);
 346:ili9341_ui_driver.hpp ****         }
 347:ili9341_ui_driver.hpp **** 
 348:ili9341_ui_driver.hpp ****         // 3GAMMA FUNCTION DISABLE
 349:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xF2);
 350:ili9341_ui_driver.hpp ****         {
 351:ili9341_ui_driver.hpp ****             uint8_t data[1] = {0x00};
 352:ili9341_ui_driver.hpp ****             transport_.SendData(data, 1);
 353:ili9341_ui_driver.hpp ****         }
 354:ili9341_ui_driver.hpp **** 
 355:ili9341_ui_driver.hpp ****         // GAMMA CURVE SELECTED
 356:ili9341_ui_driver.hpp ****         transport_.SendCommand(0x26);
 357:ili9341_ui_driver.hpp ****         {
 358:ili9341_ui_driver.hpp ****             uint8_t data[1] = {0x01};
 359:ili9341_ui_driver.hpp ****             transport_.SendData(data, 1);
 360:ili9341_ui_driver.hpp ****         }
 361:ili9341_ui_driver.hpp **** 
 362:ili9341_ui_driver.hpp ****         // POSITIVE GAMMA CORRECTION
 363:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xE0);
 364:ili9341_ui_driver.hpp ****         {
 365:ili9341_ui_driver.hpp ****             uint8_t data[15] = {0x0F,
 366:ili9341_ui_driver.hpp ****                                 0x31,
 367:ili9341_ui_driver.hpp ****                                 0x2B,
 368:ili9341_ui_driver.hpp ****                                 0x0C,
 369:ili9341_ui_driver.hpp ****                                 0x0E,
 370:ili9341_ui_driver.hpp ****                                 0x08,
 371:ili9341_ui_driver.hpp ****                                 0x4E,
 372:ili9341_ui_driver.hpp ****                                 0xF1,
 373:ili9341_ui_driver.hpp ****                                 0x37,
 374:ili9341_ui_driver.hpp ****                                 0x07,
 375:ili9341_ui_driver.hpp ****                                 0x10,
 376:ili9341_ui_driver.hpp ****                                 0x03,
 377:ili9341_ui_driver.hpp ****                                 0x0E,
 378:ili9341_ui_driver.hpp ****                                 0x09,
 379:ili9341_ui_driver.hpp ****                                 0x00};
 380:ili9341_ui_driver.hpp ****             transport_.SendData(data, 15);
 381:ili9341_ui_driver.hpp ****         }
 382:ili9341_ui_driver.hpp **** 
 383:ili9341_ui_driver.hpp ****         // NEGATIVE GAMMA CORRECTION
 384:ili9341_ui_driver.hpp ****         transport_.SendCommand(0xE1);
 385:ili9341_ui_driver.hpp ****         {
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 26


 386:ili9341_ui_driver.hpp ****             uint8_t data[15] = {0x00,
 387:ili9341_ui_driver.hpp ****                                 0x0E,
 388:ili9341_ui_driver.hpp ****                                 0x14,
 389:ili9341_ui_driver.hpp ****                                 0x03,
 390:ili9341_ui_driver.hpp ****                                 0x11,
 391:ili9341_ui_driver.hpp ****                                 0x07,
 392:ili9341_ui_driver.hpp ****                                 0x31,
 393:ili9341_ui_driver.hpp ****                                 0xC1,
 394:ili9341_ui_driver.hpp ****                                 0x48,
 395:ili9341_ui_driver.hpp ****                                 0x08,
 396:ili9341_ui_driver.hpp ****                                 0x0F,
 397:ili9341_ui_driver.hpp ****                                 0x0C,
 398:ili9341_ui_driver.hpp ****                                 0x31,
 399:ili9341_ui_driver.hpp ****                                 0x36,
 400:ili9341_ui_driver.hpp ****                                 0x0F};
 401:ili9341_ui_driver.hpp ****             transport_.SendData(data, 15);
 402:ili9341_ui_driver.hpp ****         }
 403:ili9341_ui_driver.hpp **** 
 404:ili9341_ui_driver.hpp ****         // EXIT SLEEP
 405:ili9341_ui_driver.hpp ****         transport_.SendCommand(0x11);
 406:ili9341_ui_driver.hpp ****         System::Delay(100);
 407:ili9341_ui_driver.hpp **** 
 408:ili9341_ui_driver.hpp ****         // TURN ON DISPLAY
 409:ili9341_ui_driver.hpp ****         transport_.SendCommand(0x29);
 410:ili9341_ui_driver.hpp **** 
 411:ili9341_ui_driver.hpp ****         // MADCTL
 412:ili9341_ui_driver.hpp ****         transport_.SendCommand(0x36);
 413:ili9341_ui_driver.hpp ****         System::Delay(10);
 414:ili9341_ui_driver.hpp **** 
 415:ili9341_ui_driver.hpp ****         {
 416:ili9341_ui_driver.hpp ****             uint8_t data[1] = {rotation};
 417:ili9341_ui_driver.hpp ****             transport_.SendData(data, 1);
 418:ili9341_ui_driver.hpp ****         }
 419:ili9341_ui_driver.hpp ****     };
 420:ili9341_ui_driver.hpp **** 
 421:ili9341_ui_driver.hpp ****     void SetOrientation(Orientation ori)
 422:ili9341_ui_driver.hpp ****     {
 423:ili9341_ui_driver.hpp ****         uint8_t ili_bgr = 0x08;
 424:ili9341_ui_driver.hpp ****         uint8_t ili_mx  = 0x40;
 425:ili9341_ui_driver.hpp ****         uint8_t ili_my  = 0x80;
 426:ili9341_ui_driver.hpp ****         uint8_t ili_mv  = 0x20;
 427:ili9341_ui_driver.hpp ****         switch(ori)
 428:ili9341_ui_driver.hpp ****         {
 429:ili9341_ui_driver.hpp ****             case Orientation::RRight:
 430:ili9341_ui_driver.hpp ****             {
 431:ili9341_ui_driver.hpp ****                 width    = 320;
 432:ili9341_ui_driver.hpp ****                 height   = 240;
 433:ili9341_ui_driver.hpp ****                 rotation = ili_mx | ili_my | ili_mv | ili_bgr;
 434:ili9341_ui_driver.hpp ****                 return;
 435:ili9341_ui_driver.hpp ****             }
 436:ili9341_ui_driver.hpp ****             case Orientation::RLeft:
 437:ili9341_ui_driver.hpp ****             {
 438:ili9341_ui_driver.hpp ****                 width    = 320;
 439:ili9341_ui_driver.hpp ****                 height   = 240;
 440:ili9341_ui_driver.hpp ****                 rotation = ili_mv | ili_bgr;
 441:ili9341_ui_driver.hpp ****                 return;
 442:ili9341_ui_driver.hpp ****             }
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 27


 443:ili9341_ui_driver.hpp ****             case Orientation::UpsideDown:
 444:ili9341_ui_driver.hpp ****             {
 445:ili9341_ui_driver.hpp ****                 width    = 240;
 446:ili9341_ui_driver.hpp ****                 height   = 320;
 447:ili9341_ui_driver.hpp ****                 rotation = ili_my | ili_bgr;
 448:ili9341_ui_driver.hpp ****                 return;
 449:ili9341_ui_driver.hpp ****             }
 450:ili9341_ui_driver.hpp ****             default:
 451:ili9341_ui_driver.hpp ****             {
 452:ili9341_ui_driver.hpp ****                 width    = 240;
 453:ili9341_ui_driver.hpp ****                 height   = 320;
 454:ili9341_ui_driver.hpp ****                 rotation = ili_mx | ili_bgr;
 455:ili9341_ui_driver.hpp ****             };
 456:ili9341_ui_driver.hpp ****         }
 457:ili9341_ui_driver.hpp ****     }
 458:ili9341_ui_driver.hpp **** 
 459:ili9341_ui_driver.hpp ****     Rectangle GetDrawableFrame() const
 460:ili9341_ui_driver.hpp ****     {
 461:ili9341_ui_driver.hpp ****         return Rectangle(int16_t(width), int16_t(height - header - footer))
 462:ili9341_ui_driver.hpp ****             .Translated(0, header + 1);
 463:ili9341_ui_driver.hpp ****     }
 464:ili9341_ui_driver.hpp **** 
 465:ili9341_ui_driver.hpp ****     void Fill(uint8_t color)
 466:ili9341_ui_driver.hpp ****     {
 467:ili9341_ui_driver.hpp ****         for(size_t i = 0; i < transport_.full_screen_buf / 2; i++)
 468:ili9341_ui_driver.hpp ****         {
 469:ili9341_ui_driver.hpp ****             transport_.PaintPixel(i * 2, tftPalette[color]);
 470:ili9341_ui_driver.hpp ****         }
 471:ili9341_ui_driver.hpp ****     };
 472:ili9341_ui_driver.hpp **** 
 473:ili9341_ui_driver.hpp ****     void FillArea(uint_fast16_t x,
 474:ili9341_ui_driver.hpp ****                   uint_fast16_t y,
 475:ili9341_ui_driver.hpp ****                   uint_fast16_t w,
 476:ili9341_ui_driver.hpp ****                   uint_fast16_t h,
 477:ili9341_ui_driver.hpp ****                   uint8_t       color)
 478:ili9341_ui_driver.hpp ****     {
 479:ili9341_ui_driver.hpp ****         // Loop through every Y sector
 480:ili9341_ui_driver.hpp ****         for(size_t i = 0; i < h; i++)
 481:ili9341_ui_driver.hpp ****         {
 482:ili9341_ui_driver.hpp ****             for(size_t j = 0; j < w; j++)
 483:ili9341_ui_driver.hpp ****             {
 484:ili9341_ui_driver.hpp ****                 DrawPixel(x + j, y + i, color);
 485:ili9341_ui_driver.hpp ****             }
 486:ili9341_ui_driver.hpp ****         }
 487:ili9341_ui_driver.hpp ****     };
 488:ili9341_ui_driver.hpp **** 
 489:ili9341_ui_driver.hpp ****     void FillRect(const Rectangle& rect, uint8_t color)
 490:ili9341_ui_driver.hpp ****     {
 491:ili9341_ui_driver.hpp ****         FillArea(
 492:ili9341_ui_driver.hpp ****             rect.GetX(), rect.GetY(), rect.GetWidth(), rect.GetHeight(), color);
 493:ili9341_ui_driver.hpp ****     };
 494:ili9341_ui_driver.hpp **** 
 495:ili9341_ui_driver.hpp ****     void DrawLine(uint_fast16_t x1,
 496:ili9341_ui_driver.hpp ****                   uint_fast16_t y1,
 497:ili9341_ui_driver.hpp ****                   uint_fast16_t x2,
 498:ili9341_ui_driver.hpp ****                   uint_fast16_t y2,
 499:ili9341_ui_driver.hpp ****                   uint8_t       color)
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 28


 500:ili9341_ui_driver.hpp ****     {
 501:ili9341_ui_driver.hpp ****         auto deltaX = abs((int_fast16_t)x2 - (int_fast16_t)x1);
 502:ili9341_ui_driver.hpp ****         auto deltaY = abs((int_fast16_t)y2 - (int_fast16_t)y1);
 503:ili9341_ui_driver.hpp ****         auto signX  = ((x1 < x2) ? 1 : -1);
 504:ili9341_ui_driver.hpp ****         auto signY  = ((y1 < y2) ? 1 : -1);
 505:ili9341_ui_driver.hpp ****         auto error  = deltaX - deltaY;
 506:ili9341_ui_driver.hpp **** 
 507:ili9341_ui_driver.hpp ****         // If we write "ChildType::DrawPixel(x2, y2, on);", we end up with
 508:ili9341_ui_driver.hpp ****         // all sorts of weird compiler errors when the Child class is a template
 509:ili9341_ui_driver.hpp ****         // class. The only way around this is to use this very verbose syntax:
 510:ili9341_ui_driver.hpp ****         DrawPixel(x2, y2, color);
 511:ili9341_ui_driver.hpp **** 
 512:ili9341_ui_driver.hpp ****         // NOTE: Possible optimization: draw horizontal and vertical lines via FillArea
 513:ili9341_ui_driver.hpp **** 
 514:ili9341_ui_driver.hpp ****         while((x1 != x2) || (y1 != y2))
 515:ili9341_ui_driver.hpp ****         {
 516:ili9341_ui_driver.hpp ****             DrawPixel(x1, y1, color);
 517:ili9341_ui_driver.hpp ****             auto error2 = error * 2;
 518:ili9341_ui_driver.hpp ****             if(error2 > -deltaY)
 519:ili9341_ui_driver.hpp ****             {
 520:ili9341_ui_driver.hpp ****                 error -= deltaY;
 521:ili9341_ui_driver.hpp ****                 x1 += signX;
 522:ili9341_ui_driver.hpp ****             }
 523:ili9341_ui_driver.hpp **** 
 524:ili9341_ui_driver.hpp ****             if(error2 < deltaX)
 525:ili9341_ui_driver.hpp ****             {
 526:ili9341_ui_driver.hpp ****                 error += deltaX;
 527:ili9341_ui_driver.hpp ****                 y1 += signY;
 528:ili9341_ui_driver.hpp ****             }
 529:ili9341_ui_driver.hpp ****         }
 530:ili9341_ui_driver.hpp ****     }
 531:ili9341_ui_driver.hpp **** 
 532:ili9341_ui_driver.hpp ****     void DrawRect(uint16_t x, uint16_t y, uint16_t w, uint16_t h, uint8_t color)
 403              		.loc 9 532 10 view .LVU111
 404              	.LBB280:
 533:ili9341_ui_driver.hpp ****     {
 534:ili9341_ui_driver.hpp ****         auto x2 = x + w;
 405              		.loc 9 534 9 view .LVU112
 535:ili9341_ui_driver.hpp ****         auto y2 = y + h;
 406              		.loc 9 535 9 view .LVU113
 536:ili9341_ui_driver.hpp ****         DrawLine(x, y, x, y2, color);
 407              		.loc 9 536 9 view .LVU114
 408              	.LBB281:
 409              	.LBI281:
 495:ili9341_ui_driver.hpp ****                   uint_fast16_t y1,
 410              		.loc 9 495 10 view .LVU115
 411              	.LBB282:
 501:ili9341_ui_driver.hpp ****         auto deltaY = abs((int_fast16_t)y2 - (int_fast16_t)y1);
 412              		.loc 9 501 9 view .LVU116
 502:ili9341_ui_driver.hpp ****         auto signX  = ((x1 < x2) ? 1 : -1);
 413              		.loc 9 502 9 view .LVU117
 503:ili9341_ui_driver.hpp ****         auto signY  = ((y1 < y2) ? 1 : -1);
 414              		.loc 9 503 9 view .LVU118
 504:ili9341_ui_driver.hpp ****         auto error  = deltaX - deltaY;
 415              		.loc 9 504 9 view .LVU119
 505:ili9341_ui_driver.hpp **** 
 416              		.loc 9 505 9 view .LVU120
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 29


 510:ili9341_ui_driver.hpp **** 
 417              		.loc 9 510 9 view .LVU121
 418              	.LBB283:
 419              	.LBI283:
 537:ili9341_ui_driver.hpp ****         DrawLine(x, y, x2, y, color);
 538:ili9341_ui_driver.hpp ****         DrawLine(x, y2, x2, y2, color);
 539:ili9341_ui_driver.hpp ****         DrawLine(x2, y, x2, y2, color);
 540:ili9341_ui_driver.hpp ****     }
 541:ili9341_ui_driver.hpp **** 
 542:ili9341_ui_driver.hpp ****     Rectangle GetBounds() const
 543:ili9341_ui_driver.hpp ****     {
 544:ili9341_ui_driver.hpp ****         return Rectangle(int16_t(width), int16_t(height));
 545:ili9341_ui_driver.hpp ****     }
 546:ili9341_ui_driver.hpp **** 
 547:ili9341_ui_driver.hpp ****     void DrawRect(const Rectangle& rect, uint8_t color)
 548:ili9341_ui_driver.hpp ****     {
 549:ili9341_ui_driver.hpp ****         DrawRect(
 550:ili9341_ui_driver.hpp ****             rect.GetX(), rect.GetY(), rect.GetWidth(), rect.GetHeight(), color);
 551:ili9341_ui_driver.hpp ****     }
 552:ili9341_ui_driver.hpp **** 
 553:ili9341_ui_driver.hpp ****     Rectangle WriteStringAligned(const char*    str,
 554:ili9341_ui_driver.hpp ****                                  const FontDef& font,
 555:ili9341_ui_driver.hpp ****                                  Rectangle      boundingBox,
 556:ili9341_ui_driver.hpp ****                                  Alignment      alignment,
 557:ili9341_ui_driver.hpp ****                                  uint8_t        color)
 558:ili9341_ui_driver.hpp ****     {
 559:ili9341_ui_driver.hpp ****         const auto alignedRect
 560:ili9341_ui_driver.hpp ****             = GetTextRect(str, font).AlignedWithin(boundingBox, alignment);
 561:ili9341_ui_driver.hpp ****         // SetCursor(alignedRect.GetX(), alignedRect.GetY());
 562:ili9341_ui_driver.hpp ****         WriteString(str, alignedRect.GetX(), alignedRect.GetY(), font, color);
 563:ili9341_ui_driver.hpp ****         return alignedRect;
 564:ili9341_ui_driver.hpp ****     }
 565:ili9341_ui_driver.hpp **** 
 566:ili9341_ui_driver.hpp ****     Rectangle GetTextRect(const char* text, const FontDef& font)
 567:ili9341_ui_driver.hpp ****     {
 568:ili9341_ui_driver.hpp ****         return {int16_t(strlen(text) * font.FontWidth), font.FontHeight};
 569:ili9341_ui_driver.hpp ****     }
 570:ili9341_ui_driver.hpp **** 
 571:ili9341_ui_driver.hpp ****     char WriteChar(char ch, FontDef font, uint8_t color)
 572:ili9341_ui_driver.hpp ****     {
 573:ili9341_ui_driver.hpp ****         // Check if character is valid
 574:ili9341_ui_driver.hpp ****         if(ch < 32 || ch > 126)
 575:ili9341_ui_driver.hpp ****             return 0;
 576:ili9341_ui_driver.hpp **** 
 577:ili9341_ui_driver.hpp ****         // Check remaining space on current line
 578:ili9341_ui_driver.hpp ****         if(width < (currentX_ + font.FontWidth)
 579:ili9341_ui_driver.hpp ****            || height < (currentY_ + font.FontHeight))
 580:ili9341_ui_driver.hpp ****         {
 581:ili9341_ui_driver.hpp ****             // Not enough space on current line
 582:ili9341_ui_driver.hpp ****             return 0;
 583:ili9341_ui_driver.hpp ****         }
 584:ili9341_ui_driver.hpp **** 
 585:ili9341_ui_driver.hpp ****         // Use the font to write
 586:ili9341_ui_driver.hpp ****         for(auto i = 0; i < font.FontHeight; i++)
 587:ili9341_ui_driver.hpp ****         {
 588:ili9341_ui_driver.hpp ****             auto b = font.data[(ch - 32) * font.FontHeight + i];
 589:ili9341_ui_driver.hpp ****             for(auto j = 0; j < font.FontWidth; j++)
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 30


 590:ili9341_ui_driver.hpp ****             {
 591:ili9341_ui_driver.hpp ****                 if((b << j) & 0x8000)
 592:ili9341_ui_driver.hpp ****                 {
 593:ili9341_ui_driver.hpp ****                     DrawPixel(currentX_ + j, (currentY_ + i), color);
 594:ili9341_ui_driver.hpp ****                 }
 595:ili9341_ui_driver.hpp ****                 // else
 596:ili9341_ui_driver.hpp ****                 // {
 597:ili9341_ui_driver.hpp ****                 // background color
 598:ili9341_ui_driver.hpp ****                 // DrawPixel(currentX_ + j, (currentY_ + i), COLOR_BLACK);
 599:ili9341_ui_driver.hpp ****                 // }
 600:ili9341_ui_driver.hpp ****             }
 601:ili9341_ui_driver.hpp ****         }
 602:ili9341_ui_driver.hpp **** 
 603:ili9341_ui_driver.hpp ****         // The current space is now taken
 604:ili9341_ui_driver.hpp ****         SetCursor(currentX_ + font.FontWidth, currentY_);
 605:ili9341_ui_driver.hpp **** 
 606:ili9341_ui_driver.hpp ****         // Return written char for validation
 607:ili9341_ui_driver.hpp ****         return ch;
 608:ili9341_ui_driver.hpp ****     }
 609:ili9341_ui_driver.hpp **** 
 610:ili9341_ui_driver.hpp ****     void WriteString(const char* str, uint16_t x, uint16_t y, FontDef font)
 611:ili9341_ui_driver.hpp ****     {
 612:ili9341_ui_driver.hpp ****         WriteString(str, x, y, font, COLOR_WHITE);
 613:ili9341_ui_driver.hpp ****     }
 614:ili9341_ui_driver.hpp **** 
 615:ili9341_ui_driver.hpp ****     void WriteString(const char* str,
 616:ili9341_ui_driver.hpp ****                      uint16_t    x,
 617:ili9341_ui_driver.hpp ****                      uint16_t    y,
 618:ili9341_ui_driver.hpp ****                      FontDef     font,
 619:ili9341_ui_driver.hpp ****                      uint8_t     color)
 620:ili9341_ui_driver.hpp ****     {
 621:ili9341_ui_driver.hpp ****         SetCursor(x, y);
 622:ili9341_ui_driver.hpp ****         // Write until null-byte
 623:ili9341_ui_driver.hpp ****         while(*str)
 624:ili9341_ui_driver.hpp ****         {
 625:ili9341_ui_driver.hpp ****             if(WriteChar(*str, font, color) != *str)
 626:ili9341_ui_driver.hpp ****             {
 627:ili9341_ui_driver.hpp ****                 // Char could not be written
 628:ili9341_ui_driver.hpp ****                 return;
 629:ili9341_ui_driver.hpp ****             }
 630:ili9341_ui_driver.hpp **** 
 631:ili9341_ui_driver.hpp ****             // Next char
 632:ili9341_ui_driver.hpp ****             str++;
 633:ili9341_ui_driver.hpp ****         }
 634:ili9341_ui_driver.hpp ****     }
 635:ili9341_ui_driver.hpp **** 
 636:ili9341_ui_driver.hpp ****     uint16_t GetStringWidth(const char* str, FontDef font)
 637:ili9341_ui_driver.hpp ****     {
 638:ili9341_ui_driver.hpp ****         uint16_t font_width = 0;
 639:ili9341_ui_driver.hpp ****         // Loop until null-byte
 640:ili9341_ui_driver.hpp ****         while(*str)
 641:ili9341_ui_driver.hpp ****         {
 642:ili9341_ui_driver.hpp ****             font_width += font.FontWidth;
 643:ili9341_ui_driver.hpp ****             str++;
 644:ili9341_ui_driver.hpp ****         }
 645:ili9341_ui_driver.hpp **** 
 646:ili9341_ui_driver.hpp ****         return font_width;
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 31


 647:ili9341_ui_driver.hpp ****     }
 648:ili9341_ui_driver.hpp **** 
 649:ili9341_ui_driver.hpp ****     void DrawCircle(int16_t x0, int16_t y0, int16_t r, uint8_t color)
 650:ili9341_ui_driver.hpp ****     {
 651:ili9341_ui_driver.hpp ****         int16_t f     = 1 - r;
 652:ili9341_ui_driver.hpp ****         int16_t ddF_x = 1;
 653:ili9341_ui_driver.hpp ****         int16_t ddF_y = -2 * r;
 654:ili9341_ui_driver.hpp ****         int16_t x     = 0;
 655:ili9341_ui_driver.hpp ****         int16_t y     = r;
 656:ili9341_ui_driver.hpp **** 
 657:ili9341_ui_driver.hpp ****         DrawPixel(x0, y0 + r, color);
 658:ili9341_ui_driver.hpp ****         DrawPixel(x0, y0 - r, color);
 659:ili9341_ui_driver.hpp ****         DrawPixel(x0 + r, y0, color);
 660:ili9341_ui_driver.hpp ****         DrawPixel(x0 - r, y0, color);
 661:ili9341_ui_driver.hpp **** 
 662:ili9341_ui_driver.hpp ****         while(x < y)
 663:ili9341_ui_driver.hpp ****         {
 664:ili9341_ui_driver.hpp ****             if(f >= 0)
 665:ili9341_ui_driver.hpp ****             {
 666:ili9341_ui_driver.hpp ****                 y--;
 667:ili9341_ui_driver.hpp ****                 ddF_y += 2;
 668:ili9341_ui_driver.hpp ****                 f += ddF_y;
 669:ili9341_ui_driver.hpp ****             }
 670:ili9341_ui_driver.hpp ****             x++;
 671:ili9341_ui_driver.hpp ****             ddF_x += 2;
 672:ili9341_ui_driver.hpp ****             f += ddF_x;
 673:ili9341_ui_driver.hpp **** 
 674:ili9341_ui_driver.hpp ****             DrawPixel(x0 + x, y0 + y, color);
 675:ili9341_ui_driver.hpp ****             DrawPixel(x0 - x, y0 + y, color);
 676:ili9341_ui_driver.hpp ****             DrawPixel(x0 + x, y0 - y, color);
 677:ili9341_ui_driver.hpp ****             DrawPixel(x0 - x, y0 - y, color);
 678:ili9341_ui_driver.hpp ****             DrawPixel(x0 + y, y0 + x, color);
 679:ili9341_ui_driver.hpp ****             DrawPixel(x0 - y, y0 + x, color);
 680:ili9341_ui_driver.hpp ****             DrawPixel(x0 + y, y0 - x, color);
 681:ili9341_ui_driver.hpp ****             DrawPixel(x0 - y, y0 - x, color);
 682:ili9341_ui_driver.hpp ****         }
 683:ili9341_ui_driver.hpp ****     }
 684:ili9341_ui_driver.hpp **** 
 685:ili9341_ui_driver.hpp ****     void DriteFastVLine(int16_t x, int16_t y, int16_t h, uint16_t color)
 686:ili9341_ui_driver.hpp ****     {
 687:ili9341_ui_driver.hpp ****         // Overwrite in subclasses if startWrite is defined!
 688:ili9341_ui_driver.hpp ****         // Can be just writeLine(x, y, x, y+h-1, color);
 689:ili9341_ui_driver.hpp ****         // or writeFillRect(x, y, 1, h, color);
 690:ili9341_ui_driver.hpp ****         DrawLine(x, y, x, y + h - 1, color);
 691:ili9341_ui_driver.hpp ****     }
 692:ili9341_ui_driver.hpp **** 
 693:ili9341_ui_driver.hpp ****     void FillCircle(int16_t x0, int16_t y0, int16_t r, uint16_t color)
 694:ili9341_ui_driver.hpp ****     {
 695:ili9341_ui_driver.hpp ****         // DriteFastVLine(x0, y0 - r, 2 * r + 1, color);
 696:ili9341_ui_driver.hpp ****         DrawLine(x0, y0, x0, y0 + 2 * r + 1, color);
 697:ili9341_ui_driver.hpp ****         FillCircleHelper(x0, y0, r, 3, 0, color);
 698:ili9341_ui_driver.hpp ****     }
 699:ili9341_ui_driver.hpp **** 
 700:ili9341_ui_driver.hpp ****     void FillCircleHelper(int16_t  x0,
 701:ili9341_ui_driver.hpp ****                           int16_t  y0,
 702:ili9341_ui_driver.hpp ****                           int16_t  r,
 703:ili9341_ui_driver.hpp ****                           uint8_t  cornername,
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 32


 704:ili9341_ui_driver.hpp ****                           int16_t  delta,
 705:ili9341_ui_driver.hpp ****                           uint16_t color)
 706:ili9341_ui_driver.hpp ****     {
 707:ili9341_ui_driver.hpp ****         int16_t f     = 1 - r;
 708:ili9341_ui_driver.hpp ****         int16_t ddF_x = 1;
 709:ili9341_ui_driver.hpp ****         int16_t ddF_y = -2 * r;
 710:ili9341_ui_driver.hpp ****         int16_t x     = 0;
 711:ili9341_ui_driver.hpp ****         int16_t y     = r;
 712:ili9341_ui_driver.hpp **** 
 713:ili9341_ui_driver.hpp ****         delta++;
 714:ili9341_ui_driver.hpp **** 
 715:ili9341_ui_driver.hpp ****         while(x < y)
 716:ili9341_ui_driver.hpp ****         {
 717:ili9341_ui_driver.hpp ****             if(f >= 0)
 718:ili9341_ui_driver.hpp ****             {
 719:ili9341_ui_driver.hpp ****                 y--;
 720:ili9341_ui_driver.hpp ****                 ddF_y += 2;
 721:ili9341_ui_driver.hpp ****                 f += ddF_y;
 722:ili9341_ui_driver.hpp ****             }
 723:ili9341_ui_driver.hpp ****             x++;
 724:ili9341_ui_driver.hpp ****             ddF_x += 2;
 725:ili9341_ui_driver.hpp ****             f += ddF_x;
 726:ili9341_ui_driver.hpp **** 
 727:ili9341_ui_driver.hpp ****             if(cornername & 0x1)
 728:ili9341_ui_driver.hpp ****             {
 729:ili9341_ui_driver.hpp ****                 DrawLine(
 730:ili9341_ui_driver.hpp ****                     x0 + x, y0 - y, x0 + x, y0 - y + 2 * y + delta - 1, color);
 731:ili9341_ui_driver.hpp ****                 DrawLine(
 732:ili9341_ui_driver.hpp ****                     x0 + y, y0 - x, x0 + y, y0 - x + 2 * x + delta - 1, color);
 733:ili9341_ui_driver.hpp **** 
 734:ili9341_ui_driver.hpp ****                 // DrawLine(x, y, x, y + h - 1, color);
 735:ili9341_ui_driver.hpp ****             }
 736:ili9341_ui_driver.hpp ****             if(cornername & 0x2)
 737:ili9341_ui_driver.hpp ****             {
 738:ili9341_ui_driver.hpp ****                 DrawLine(
 739:ili9341_ui_driver.hpp ****                     x0 - x, y0 - y, x0 - x, y0 - y + 2 * y + delta - 1, color);
 740:ili9341_ui_driver.hpp ****                 DrawLine(
 741:ili9341_ui_driver.hpp ****                     x0 - y, y0 - x, x0 - y, y0 - x + 2 * x + delta - 1, color);
 742:ili9341_ui_driver.hpp ****                 // DriteFastVLine(x0 - x, y0 - y, 2 * y + delta, color);
 743:ili9341_ui_driver.hpp ****                 // DriteFastVLine(x0 - y, y0 - x, 2 * x + delta, color);
 744:ili9341_ui_driver.hpp ****             }
 745:ili9341_ui_driver.hpp ****         }
 746:ili9341_ui_driver.hpp ****     }
 747:ili9341_ui_driver.hpp **** 
 748:ili9341_ui_driver.hpp ****     /** 
 749:ili9341_ui_driver.hpp ****     Moves the 'Cursor' position used for WriteChar, and WriteStr to the specified coordinate.
 750:ili9341_ui_driver.hpp ****     \param x x pos
 751:ili9341_ui_driver.hpp ****     \param y y pos
 752:ili9341_ui_driver.hpp ****     */
 753:ili9341_ui_driver.hpp ****     void SetCursor(uint16_t x, uint16_t y)
 754:ili9341_ui_driver.hpp ****     {
 755:ili9341_ui_driver.hpp ****         currentX_ = (x >= width) ? width - 1 : x;
 756:ili9341_ui_driver.hpp ****         currentY_ = (y >= height) ? height - 1 : y;
 757:ili9341_ui_driver.hpp ****     }
 758:ili9341_ui_driver.hpp **** 
 759:ili9341_ui_driver.hpp ****     void Update()
 760:ili9341_ui_driver.hpp ****     {
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 33


 761:ili9341_ui_driver.hpp ****         Start();
 762:ili9341_ui_driver.hpp ****         transport_.SendDataDMA();
 763:ili9341_ui_driver.hpp ****     }
 764:ili9341_ui_driver.hpp **** 
 765:ili9341_ui_driver.hpp ****     bool IsRender()
 766:ili9341_ui_driver.hpp ****     {
 767:ili9341_ui_driver.hpp ****         if(transport_.dma_busy == false)
 768:ili9341_ui_driver.hpp ****         {
 769:ili9341_ui_driver.hpp ****             diff = System::GetNow() - screen_update_last_;
 770:ili9341_ui_driver.hpp ****             if(diff > screen_update_period_)
 771:ili9341_ui_driver.hpp ****             {
 772:ili9341_ui_driver.hpp ****                 UpdateFrameRate();
 773:ili9341_ui_driver.hpp ****                 screen_update_last_ = System::GetNow();
 774:ili9341_ui_driver.hpp ****                 return true;
 775:ili9341_ui_driver.hpp ****             }
 776:ili9341_ui_driver.hpp ****         }
 777:ili9341_ui_driver.hpp **** 
 778:ili9341_ui_driver.hpp ****         return false;
 779:ili9341_ui_driver.hpp ****     }
 780:ili9341_ui_driver.hpp **** 
 781:ili9341_ui_driver.hpp ****     void UpdateFrameRate()
 782:ili9341_ui_driver.hpp ****     {
 783:ili9341_ui_driver.hpp ****         ++frames;
 784:ili9341_ui_driver.hpp ****         if(System::GetNow() - fps_update_last_ > 1000)
 785:ili9341_ui_driver.hpp ****         {
 786:ili9341_ui_driver.hpp ****             fps              = frames;
 787:ili9341_ui_driver.hpp ****             frames           = 0;
 788:ili9341_ui_driver.hpp ****             fps_update_last_ = System::GetNow();
 789:ili9341_ui_driver.hpp ****         }
 790:ili9341_ui_driver.hpp ****     }
 791:ili9341_ui_driver.hpp **** 
 792:ili9341_ui_driver.hpp ****     uint16_t fps = 0;
 793:ili9341_ui_driver.hpp **** 
 794:ili9341_ui_driver.hpp **** 
 795:ili9341_ui_driver.hpp ****   private:
 796:ili9341_ui_driver.hpp ****     void Start() { transport_.SetAddressWindow(0, 0, width - 1, height - 1); }
 797:ili9341_ui_driver.hpp **** 
 798:ili9341_ui_driver.hpp ****     void DrawPixel(uint_fast16_t x, uint_fast16_t y, uint8_t color)
 420              		.loc 9 798 10 view .LVU122
 421              	.LBB284:
 799:ili9341_ui_driver.hpp ****     {
 800:ili9341_ui_driver.hpp ****         if(x >= width || y >= height)
 422              		.loc 9 800 9 view .LVU123
 423              		.loc 9 800 17 is_stmt 0 view .LVU124
 424 0008 494A     		ldr	r2, .L41+4
 425 000a B2F88430 		ldrh	r3, [r2, #132]
 426              		.loc 9 800 9 view .LVU125
 427 000e 042B     		cmp	r3, #4
 428 0010 10D9     		bls	.L40
 429              		.loc 9 800 23 view .LVU126
 430 0012 B2F88610 		ldrh	r1, [r2, #134]
 431 0016 6829     		cmp	r1, #104
 432 0018 0CD9     		bls	.L40
 801:ili9341_ui_driver.hpp ****             return;
 802:ili9341_ui_driver.hpp **** 
 803:ili9341_ui_driver.hpp ****         auto id = 2 * (x + y * width);
 433              		.loc 9 803 9 is_stmt 1 view .LVU127
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 34


 434              		.loc 9 803 30 is_stmt 0 view .LVU128
 435 001a 6821     		movs	r1, #104
 804:ili9341_ui_driver.hpp **** 
 805:ili9341_ui_driver.hpp ****         // NOTE: Probably we should check the color id before accessing the array
 806:ili9341_ui_driver.hpp ****         transport_.PaintPixel(id, tftPalette[color]);
 436              		.loc 9 806 30 view .LVU129
 437 001c D06C     		ldr	r0, [r2, #76]
 438              	.LBB285:
 439              	.LBB286:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 440              		.loc 9 193 25 view .LVU130
 441 001e 454F     		ldr	r7, .L41+8
 442              	.LBE286:
 443              	.LBE285:
 803:ili9341_ui_driver.hpp **** 
 444              		.loc 9 803 30 view .LVU131
 445 0020 03FB01F1 		mul	r1, r3, r1
 446              	.LBB289:
 447              	.LBB287:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 448              		.loc 9 193 33 view .LVU132
 449 0024 040A     		lsrs	r4, r0, #8
 450              	.LBE287:
 451              	.LBE289:
 803:ili9341_ui_driver.hpp **** 
 452              		.loc 9 803 26 view .LVU133
 453 0026 0431     		adds	r1, r1, #4
 454              	.LVL22:
 455              		.loc 9 806 9 is_stmt 1 view .LVU134
 456              	.LBB290:
 457              	.LBI285:
 191:ili9341_ui_driver.hpp ****     {
 458              		.loc 9 191 10 view .LVU135
 459              	.LBB288:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 460              		.loc 9 193 9 view .LVU136
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 461              		.loc 9 193 25 is_stmt 0 view .LVU137
 462 0028 07F81140 		strb	r4, [r7, r1, lsl #1]
 194:ili9341_ui_driver.hpp ****     }
 463              		.loc 9 194 9 is_stmt 1 view .LVU138
 194:ili9341_ui_driver.hpp ****     }
 464              		.loc 9 194 25 is_stmt 0 view .LVU139
 465 002c 07EB4101 		add	r1, r7, r1, lsl #1
 466              	.LVL23:
 194:ili9341_ui_driver.hpp ****     }
 467              		.loc 9 194 25 view .LVU140
 468 0030 4870     		strb	r0, [r1, #1]
 469              	.LVL24:
 194:ili9341_ui_driver.hpp ****     }
 470              		.loc 9 194 25 view .LVU141
 471              	.LBE288:
 472              	.LBE290:
 473              	.LBE284:
 474              	.LBE283:
 514:ili9341_ui_driver.hpp ****         {
 475              		.loc 9 514 9 is_stmt 1 view .LVU142
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 35


 514:ili9341_ui_driver.hpp ****         {
 476              		.loc 9 514 26 view .LVU143
 477 0032 00E0     		b	.L18
 478              	.LVL25:
 479              	.L40:
 514:ili9341_ui_driver.hpp ****         {
 480              		.loc 9 514 26 is_stmt 0 view .LVU144
 481 0034 3F4F     		ldr	r7, .L41+8
 482              	.LVL26:
 483              	.L18:
 484              	.LBB291:
 485              	.LBB292:
 486              	.LBB293:
 487              		.loc 9 806 30 view .LVU145
 488 0036 D16C     		ldr	r1, [r2, #76]
 489 0038 07EBC306 		add	r6, r7, r3, lsl #3
 800:ili9341_ui_driver.hpp ****             return;
 490              		.loc 9 800 31 view .LVU146
 491 003c B2F886C0 		ldrh	ip, [r2, #134]
 492 0040 5C00     		lsls	r4, r3, #1
 493              	.LBB294:
 494              	.LBB295:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 495              		.loc 9 193 25 view .LVU147
 496 0042 C1F30725 		ubfx	r5, r1, #8, #8
 194:ili9341_ui_driver.hpp ****     }
 497              		.loc 9 194 25 view .LVU148
 498 0046 5FFA81FE 		uxtb	lr, r1
 499 004a 4FEAC308 		lsl	r8, r3, #3
 500 004e 0422     		movs	r2, #4
 501 0050 3146     		mov	r1, r6
 502 0052 3046     		mov	r0, r6
 503              	.L20:
 504              	.LVL27:
 194:ili9341_ui_driver.hpp ****     }
 505              		.loc 9 194 25 view .LVU149
 506              	.LBE295:
 507              	.LBE294:
 508              	.LBE293:
 509              	.LBE292:
 516:ili9341_ui_driver.hpp ****             auto error2 = error * 2;
 510              		.loc 9 516 13 is_stmt 1 view .LVU150
 511              	.LBB311:
 512              	.LBI292:
 798:ili9341_ui_driver.hpp ****     {
 513              		.loc 9 798 10 view .LVU151
 514              	.LBB306:
 800:ili9341_ui_driver.hpp ****             return;
 515              		.loc 9 800 9 view .LVU152
 803:ili9341_ui_driver.hpp **** 
 516              		.loc 9 803 9 view .LVU153
 517              		.loc 9 806 9 view .LVU154
 518              	.LBB301:
 519              	.LBI294:
 191:ili9341_ui_driver.hpp ****     {
 520              		.loc 9 191 10 view .LVU155
 521              	.LBB296:
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 36


 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 522              		.loc 9 193 9 view .LVU156
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 523              		.loc 9 193 9 is_stmt 0 view .LVU157
 524              	.LBE296:
 525              	.LBE301:
 526              	.LBE306:
 527              	.LBE311:
 517:ili9341_ui_driver.hpp ****             if(error2 > -deltaY)
 528              		.loc 9 517 13 is_stmt 1 view .LVU158
 518:ili9341_ui_driver.hpp ****             {
 529              		.loc 9 518 13 view .LVU159
 524:ili9341_ui_driver.hpp ****             {
 530              		.loc 9 524 13 view .LVU160
 526:ili9341_ui_driver.hpp ****                 y1 += signY;
 531              		.loc 9 526 17 view .LVU161
 527:ili9341_ui_driver.hpp ****             }
 532              		.loc 9 527 17 view .LVU162
 533              	.LBB312:
 534              	.LBB307:
 800:ili9341_ui_driver.hpp ****             return;
 535              		.loc 9 800 9 is_stmt 0 view .LVU163
 536 0054 042B     		cmp	r3, #4
 537 0056 04D9     		bls	.L19
 800:ili9341_ui_driver.hpp ****             return;
 538              		.loc 9 800 23 view .LVU164
 539 0058 9445     		cmp	ip, r2
 540 005a 02D9     		bls	.L19
 541              	.LBB302:
 542              	.LBB297:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 543              		.loc 9 193 25 view .LVU165
 544 005c 0572     		strb	r5, [r0, #8]
 194:ili9341_ui_driver.hpp ****     }
 545              		.loc 9 194 9 is_stmt 1 view .LVU166
 194:ili9341_ui_driver.hpp ****     }
 546              		.loc 9 194 25 is_stmt 0 view .LVU167
 547 005e 80F809E0 		strb	lr, [r0, #9]
 548              	.L19:
 549              	.LBE297:
 550              	.LBE302:
 551              	.LBE307:
 552              	.LBE312:
 527:ili9341_ui_driver.hpp ****             }
 553              		.loc 9 527 20 view .LVU168
 554 0062 0132     		adds	r2, r2, #1
 555              	.LVL28:
 527:ili9341_ui_driver.hpp ****             }
 556              		.loc 9 527 20 view .LVU169
 557              	.LBE291:
 514:ili9341_ui_driver.hpp ****         {
 558              		.loc 9 514 9 is_stmt 1 view .LVU170
 514:ili9341_ui_driver.hpp ****         {
 559              		.loc 9 514 26 view .LVU171
 560 0064 2044     		add	r0, r0, r4
 561 0066 682A     		cmp	r2, #104
 562 0068 F4D1     		bne	.L20
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 37


 563              	.LVL29:
 514:ili9341_ui_driver.hpp ****         {
 564              		.loc 9 514 26 is_stmt 0 view .LVU172
 565              	.LBE282:
 566              	.LBE281:
 537:ili9341_ui_driver.hpp ****         DrawLine(x, y2, x2, y2, color);
 567              		.loc 9 537 9 is_stmt 1 view .LVU173
 568              	.LBB322:
 569              	.LBI322:
 495:ili9341_ui_driver.hpp ****                   uint_fast16_t y1,
 570              		.loc 9 495 10 view .LVU174
 571              	.LBB323:
 501:ili9341_ui_driver.hpp ****         auto deltaY = abs((int_fast16_t)y2 - (int_fast16_t)y1);
 572              		.loc 9 501 9 view .LVU175
 502:ili9341_ui_driver.hpp ****         auto signX  = ((x1 < x2) ? 1 : -1);
 573              		.loc 9 502 9 view .LVU176
 503:ili9341_ui_driver.hpp ****         auto signY  = ((y1 < y2) ? 1 : -1);
 574              		.loc 9 503 9 view .LVU177
 504:ili9341_ui_driver.hpp ****         auto error  = deltaX - deltaY;
 575              		.loc 9 504 9 view .LVU178
 505:ili9341_ui_driver.hpp **** 
 576              		.loc 9 505 9 view .LVU179
 510:ili9341_ui_driver.hpp **** 
 577              		.loc 9 510 9 view .LVU180
 578              	.LBB324:
 579              	.LBI324:
 798:ili9341_ui_driver.hpp ****     {
 580              		.loc 9 798 10 view .LVU181
 581              	.LBB325:
 800:ili9341_ui_driver.hpp ****             return;
 582              		.loc 9 800 9 view .LVU182
 583 006a 682B     		cmp	r3, #104
 584 006c 08D9     		bls	.L21
 800:ili9341_ui_driver.hpp ****             return;
 585              		.loc 9 800 23 is_stmt 0 view .LVU183
 586 006e BCF1040F 		cmp	ip, #4
 587 0072 05D9     		bls	.L21
 803:ili9341_ui_driver.hpp **** 
 588              		.loc 9 803 9 is_stmt 1 view .LVU184
 589              	.LVL30:
 590              		.loc 9 806 9 view .LVU185
 591              	.LBB326:
 592              	.LBI326:
 191:ili9341_ui_driver.hpp ****     {
 593              		.loc 9 191 10 view .LVU186
 594              	.LBB327:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 595              		.loc 9 193 9 view .LVU187
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 596              		.loc 9 193 25 is_stmt 0 view .LVU188
 597 0074 07EB0802 		add	r2, r7, r8
 598 0078 82F8D050 		strb	r5, [r2, #208]
 194:ili9341_ui_driver.hpp ****     }
 599              		.loc 9 194 9 is_stmt 1 view .LVU189
 194:ili9341_ui_driver.hpp ****     }
 600              		.loc 9 194 25 is_stmt 0 view .LVU190
 601 007c 82F8D1E0 		strb	lr, [r2, #209]
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 38


 602              	.LVL31:
 194:ili9341_ui_driver.hpp ****     }
 603              		.loc 9 194 25 view .LVU191
 604              	.LBE327:
 605              	.LBE326:
 606              	.LBE325:
 607              	.LBE324:
 514:ili9341_ui_driver.hpp ****         {
 608              		.loc 9 514 9 is_stmt 1 view .LVU192
 514:ili9341_ui_driver.hpp ****         {
 609              		.loc 9 514 26 view .LVU193
 610              	.L21:
 514:ili9341_ui_driver.hpp ****         {
 611              		.loc 9 514 26 is_stmt 0 view .LVU194
 612 0080 701C     		adds	r0, r6, #1
 613              	.LBE323:
 614              	.LBE322:
 615              	.LBB338:
 616              	.LBB319:
 617              	.LBB316:
 618              	.LBB313:
 619              	.LBB308:
 620              	.LBB303:
 621              	.LBB298:
 194:ili9341_ui_driver.hpp ****     }
 622              		.loc 9 194 25 view .LVU195
 623 0082 0422     		movs	r2, #4
 624              	.L23:
 625              	.LVL32:
 194:ili9341_ui_driver.hpp ****     }
 626              		.loc 9 194 25 view .LVU196
 627              	.LBE298:
 628              	.LBE303:
 629              	.LBE308:
 630              	.LBE313:
 631              	.LBE316:
 632              	.LBE319:
 633              	.LBE338:
 634              	.LBB339:
 635              	.LBB337:
 636              	.LBB328:
 516:ili9341_ui_driver.hpp ****             auto error2 = error * 2;
 637              		.loc 9 516 13 is_stmt 1 view .LVU197
 638              	.LBB329:
 639              	.LBI329:
 798:ili9341_ui_driver.hpp ****     {
 640              		.loc 9 798 10 view .LVU198
 641              	.LBB330:
 800:ili9341_ui_driver.hpp ****             return;
 642              		.loc 9 800 9 view .LVU199
 803:ili9341_ui_driver.hpp **** 
 643              		.loc 9 803 9 view .LVU200
 644              		.loc 9 806 9 view .LVU201
 645              	.LBB331:
 646              	.LBI331:
 191:ili9341_ui_driver.hpp ****     {
 647              		.loc 9 191 10 view .LVU202
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 39


 648              	.LBB332:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 649              		.loc 9 193 9 view .LVU203
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 650              		.loc 9 193 9 is_stmt 0 view .LVU204
 651              	.LBE332:
 652              	.LBE331:
 653              	.LBE330:
 654              	.LBE329:
 517:ili9341_ui_driver.hpp ****             if(error2 > -deltaY)
 655              		.loc 9 517 13 is_stmt 1 view .LVU205
 518:ili9341_ui_driver.hpp ****             {
 656              		.loc 9 518 13 view .LVU206
 520:ili9341_ui_driver.hpp ****                 x1 += signX;
 657              		.loc 9 520 17 view .LVU207
 521:ili9341_ui_driver.hpp ****             }
 658              		.loc 9 521 17 view .LVU208
 659              	.LBB336:
 660              	.LBB335:
 800:ili9341_ui_driver.hpp ****             return;
 661              		.loc 9 800 9 is_stmt 0 view .LVU209
 662 0084 9342     		cmp	r3, r2
 663 0086 06D9     		bls	.L22
 800:ili9341_ui_driver.hpp ****             return;
 664              		.loc 9 800 23 view .LVU210
 665 0088 BCF1040F 		cmp	ip, #4
 666 008c 03D9     		bls	.L22
 667              	.LBB334:
 668              	.LBB333:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 669              		.loc 9 193 25 view .LVU211
 670 008e 06F81250 		strb	r5, [r6, r2, lsl #1]
 194:ili9341_ui_driver.hpp ****     }
 671              		.loc 9 194 9 is_stmt 1 view .LVU212
 194:ili9341_ui_driver.hpp ****     }
 672              		.loc 9 194 25 is_stmt 0 view .LVU213
 673 0092 00F812E0 		strb	lr, [r0, r2, lsl #1]
 674              	.L22:
 675              	.LBE333:
 676              	.LBE334:
 677              	.LBE335:
 678              	.LBE336:
 521:ili9341_ui_driver.hpp ****             }
 679              		.loc 9 521 20 view .LVU214
 680 0096 0132     		adds	r2, r2, #1
 681              	.LVL33:
 524:ili9341_ui_driver.hpp ****             {
 682              		.loc 9 524 13 is_stmt 1 view .LVU215
 524:ili9341_ui_driver.hpp ****             {
 683              		.loc 9 524 13 is_stmt 0 view .LVU216
 684              	.LBE328:
 514:ili9341_ui_driver.hpp ****         {
 685              		.loc 9 514 9 is_stmt 1 view .LVU217
 514:ili9341_ui_driver.hpp ****         {
 686              		.loc 9 514 26 view .LVU218
 687 0098 682A     		cmp	r2, #104
 688 009a F3D1     		bne	.L23
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 40


 689              	.LVL34:
 514:ili9341_ui_driver.hpp ****         {
 690              		.loc 9 514 26 is_stmt 0 view .LVU219
 691              	.LBE337:
 692              	.LBE339:
 538:ili9341_ui_driver.hpp ****         DrawLine(x2, y, x2, y2, color);
 693              		.loc 9 538 9 is_stmt 1 view .LVU220
 694              	.LBB340:
 695              	.LBI340:
 495:ili9341_ui_driver.hpp ****                   uint_fast16_t y1,
 696              		.loc 9 495 10 view .LVU221
 697              	.LBB341:
 501:ili9341_ui_driver.hpp ****         auto deltaY = abs((int_fast16_t)y2 - (int_fast16_t)y1);
 698              		.loc 9 501 9 view .LVU222
 502:ili9341_ui_driver.hpp ****         auto signX  = ((x1 < x2) ? 1 : -1);
 699              		.loc 9 502 9 view .LVU223
 503:ili9341_ui_driver.hpp ****         auto signY  = ((y1 < y2) ? 1 : -1);
 700              		.loc 9 503 9 view .LVU224
 504:ili9341_ui_driver.hpp ****         auto error  = deltaX - deltaY;
 701              		.loc 9 504 9 view .LVU225
 505:ili9341_ui_driver.hpp **** 
 702              		.loc 9 505 9 view .LVU226
 510:ili9341_ui_driver.hpp **** 
 703              		.loc 9 510 9 view .LVU227
 704              	.LBB342:
 705              	.LBI342:
 798:ili9341_ui_driver.hpp ****     {
 706              		.loc 9 798 10 view .LVU228
 707              	.LBB343:
 800:ili9341_ui_driver.hpp ****             return;
 708              		.loc 9 800 9 view .LVU229
 709 009c 682B     		cmp	r3, #104
 710 009e 09D9     		bls	.L24
 800:ili9341_ui_driver.hpp ****             return;
 711              		.loc 9 800 23 is_stmt 0 view .LVU230
 712 00a0 BCF1680F 		cmp	ip, #104
 713 00a4 06D9     		bls	.L24
 803:ili9341_ui_driver.hpp **** 
 714              		.loc 9 803 9 is_stmt 1 view .LVU231
 803:ili9341_ui_driver.hpp **** 
 715              		.loc 9 803 14 is_stmt 0 view .LVU232
 716 00a6 D022     		movs	r2, #208
 717 00a8 03FB0222 		mla	r2, r3, r2, r2
 718              	.LVL35:
 719              		.loc 9 806 9 is_stmt 1 view .LVU233
 720              	.LBB344:
 721              	.LBI344:
 191:ili9341_ui_driver.hpp ****     {
 722              		.loc 9 191 10 view .LVU234
 723              	.LBB345:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 724              		.loc 9 193 9 view .LVU235
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 725              		.loc 9 193 25 is_stmt 0 view .LVU236
 726 00ac BD54     		strb	r5, [r7, r2]
 194:ili9341_ui_driver.hpp ****     }
 727              		.loc 9 194 9 is_stmt 1 view .LVU237
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 41


 194:ili9341_ui_driver.hpp ****     }
 728              		.loc 9 194 25 is_stmt 0 view .LVU238
 729 00ae 3A44     		add	r2, r2, r7
 730              	.LVL36:
 194:ili9341_ui_driver.hpp ****     }
 731              		.loc 9 194 25 view .LVU239
 732 00b0 82F801E0 		strb	lr, [r2, #1]
 733              	.LVL37:
 194:ili9341_ui_driver.hpp ****     }
 734              		.loc 9 194 25 view .LVU240
 735              	.LBE345:
 736              	.LBE344:
 737              	.LBE343:
 738              	.LBE342:
 514:ili9341_ui_driver.hpp ****         {
 739              		.loc 9 514 9 is_stmt 1 view .LVU241
 514:ili9341_ui_driver.hpp ****         {
 740              		.loc 9 514 26 view .LVU242
 741              	.L24:
 514:ili9341_ui_driver.hpp ****         {
 742              		.loc 9 514 26 is_stmt 0 view .LVU243
 743 00b4 4FF0D008 		mov	r8, #208
 744              	.LBE341:
 745              	.LBE340:
 746              	.LBB356:
 747              	.LBB320:
 748              	.LBB317:
 749              	.LBB314:
 750              	.LBB309:
 751              	.LBB304:
 752              	.LBB299:
 194:ili9341_ui_driver.hpp ****     }
 753              		.loc 9 194 25 view .LVU244
 754 00b8 0422     		movs	r2, #4
 755 00ba 08FB03F8 		mul	r8, r8, r3
 756 00be 07EB0800 		add	r0, r7, r8
 757 00c2 461C     		adds	r6, r0, #1
 758              	.L26:
 759              	.LVL38:
 194:ili9341_ui_driver.hpp ****     }
 760              		.loc 9 194 25 view .LVU245
 761              	.LBE299:
 762              	.LBE304:
 763              	.LBE309:
 764              	.LBE314:
 765              	.LBE317:
 766              	.LBE320:
 767              	.LBE356:
 768              	.LBB357:
 769              	.LBB355:
 770              	.LBB346:
 516:ili9341_ui_driver.hpp ****             auto error2 = error * 2;
 771              		.loc 9 516 13 is_stmt 1 view .LVU246
 772              	.LBB347:
 773              	.LBI347:
 798:ili9341_ui_driver.hpp ****     {
 774              		.loc 9 798 10 view .LVU247
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 42


 775              	.LBB348:
 800:ili9341_ui_driver.hpp ****             return;
 776              		.loc 9 800 9 view .LVU248
 803:ili9341_ui_driver.hpp **** 
 777              		.loc 9 803 9 view .LVU249
 778              		.loc 9 806 9 view .LVU250
 779              	.LBB349:
 780              	.LBI349:
 191:ili9341_ui_driver.hpp ****     {
 781              		.loc 9 191 10 view .LVU251
 782              	.LBB350:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 783              		.loc 9 193 9 view .LVU252
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 784              		.loc 9 193 9 is_stmt 0 view .LVU253
 785              	.LBE350:
 786              	.LBE349:
 787              	.LBE348:
 788              	.LBE347:
 517:ili9341_ui_driver.hpp ****             if(error2 > -deltaY)
 789              		.loc 9 517 13 is_stmt 1 view .LVU254
 518:ili9341_ui_driver.hpp ****             {
 790              		.loc 9 518 13 view .LVU255
 520:ili9341_ui_driver.hpp ****                 x1 += signX;
 791              		.loc 9 520 17 view .LVU256
 521:ili9341_ui_driver.hpp ****             }
 792              		.loc 9 521 17 view .LVU257
 793              	.LBB354:
 794              	.LBB353:
 800:ili9341_ui_driver.hpp ****             return;
 795              		.loc 9 800 9 is_stmt 0 view .LVU258
 796 00c4 9342     		cmp	r3, r2
 797 00c6 06D9     		bls	.L25
 800:ili9341_ui_driver.hpp ****             return;
 798              		.loc 9 800 23 view .LVU259
 799 00c8 BCF1680F 		cmp	ip, #104
 800 00cc 03D9     		bls	.L25
 801              	.LBB352:
 802              	.LBB351:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 803              		.loc 9 193 25 view .LVU260
 804 00ce 00F81250 		strb	r5, [r0, r2, lsl #1]
 194:ili9341_ui_driver.hpp ****     }
 805              		.loc 9 194 9 is_stmt 1 view .LVU261
 194:ili9341_ui_driver.hpp ****     }
 806              		.loc 9 194 25 is_stmt 0 view .LVU262
 807 00d2 06F812E0 		strb	lr, [r6, r2, lsl #1]
 808              	.L25:
 809              	.LBE351:
 810              	.LBE352:
 811              	.LBE353:
 812              	.LBE354:
 521:ili9341_ui_driver.hpp ****             }
 813              		.loc 9 521 20 view .LVU263
 814 00d6 0132     		adds	r2, r2, #1
 815              	.LVL39:
 524:ili9341_ui_driver.hpp ****             {
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 43


 816              		.loc 9 524 13 is_stmt 1 view .LVU264
 524:ili9341_ui_driver.hpp ****             {
 817              		.loc 9 524 13 is_stmt 0 view .LVU265
 818              	.LBE346:
 514:ili9341_ui_driver.hpp ****         {
 819              		.loc 9 514 9 is_stmt 1 view .LVU266
 514:ili9341_ui_driver.hpp ****         {
 820              		.loc 9 514 26 view .LVU267
 821 00d8 682A     		cmp	r2, #104
 822 00da F3D1     		bne	.L26
 823              	.LVL40:
 514:ili9341_ui_driver.hpp ****         {
 824              		.loc 9 514 26 is_stmt 0 view .LVU268
 825              	.LBE355:
 826              	.LBE357:
 539:ili9341_ui_driver.hpp ****     }
 827              		.loc 9 539 9 is_stmt 1 view .LVU269
 828              	.LBB358:
 829              	.LBI358:
 495:ili9341_ui_driver.hpp ****                   uint_fast16_t y1,
 830              		.loc 9 495 10 view .LVU270
 831              	.LBB359:
 501:ili9341_ui_driver.hpp ****         auto deltaY = abs((int_fast16_t)y2 - (int_fast16_t)y1);
 832              		.loc 9 501 9 view .LVU271
 502:ili9341_ui_driver.hpp ****         auto signX  = ((x1 < x2) ? 1 : -1);
 833              		.loc 9 502 9 view .LVU272
 503:ili9341_ui_driver.hpp ****         auto signY  = ((y1 < y2) ? 1 : -1);
 834              		.loc 9 503 9 view .LVU273
 504:ili9341_ui_driver.hpp ****         auto error  = deltaX - deltaY;
 835              		.loc 9 504 9 view .LVU274
 505:ili9341_ui_driver.hpp **** 
 836              		.loc 9 505 9 view .LVU275
 510:ili9341_ui_driver.hpp **** 
 837              		.loc 9 510 9 view .LVU276
 838              	.LBB360:
 839              	.LBI360:
 798:ili9341_ui_driver.hpp ****     {
 840              		.loc 9 798 10 view .LVU277
 841              	.LBB361:
 800:ili9341_ui_driver.hpp ****             return;
 842              		.loc 9 800 9 view .LVU278
 843 00dc 682B     		cmp	r3, #104
 844 00de 07D9     		bls	.L27
 800:ili9341_ui_driver.hpp ****             return;
 845              		.loc 9 800 23 is_stmt 0 view .LVU279
 846 00e0 BCF1680F 		cmp	ip, #104
 847 00e4 04D9     		bls	.L27
 803:ili9341_ui_driver.hpp **** 
 848              		.loc 9 803 9 is_stmt 1 view .LVU280
 849              	.LVL41:
 850              		.loc 9 806 9 view .LVU281
 851              	.LBB362:
 852              	.LBI362:
 191:ili9341_ui_driver.hpp ****     {
 853              		.loc 9 191 10 view .LVU282
 854              	.LBB363:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 44


 855              		.loc 9 193 9 view .LVU283
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 856              		.loc 9 193 25 is_stmt 0 view .LVU284
 857 00e6 4744     		add	r7, r7, r8
 858 00e8 87F8D050 		strb	r5, [r7, #208]
 194:ili9341_ui_driver.hpp ****     }
 859              		.loc 9 194 9 is_stmt 1 view .LVU285
 194:ili9341_ui_driver.hpp ****     }
 860              		.loc 9 194 25 is_stmt 0 view .LVU286
 861 00ec 87F8D1E0 		strb	lr, [r7, #209]
 862              	.LVL42:
 194:ili9341_ui_driver.hpp ****     }
 863              		.loc 9 194 25 view .LVU287
 864              	.LBE363:
 865              	.LBE362:
 866              	.LBE361:
 867              	.LBE360:
 514:ili9341_ui_driver.hpp ****         {
 868              		.loc 9 514 9 is_stmt 1 view .LVU288
 514:ili9341_ui_driver.hpp ****         {
 869              		.loc 9 514 26 view .LVU289
 870              	.L27:
 514:ili9341_ui_driver.hpp ****         {
 871              		.loc 9 514 26 is_stmt 0 view .LVU290
 872              	.LBE359:
 873              	.LBE358:
 874              	.LBB374:
 875              	.LBB321:
 876              	.LBB318:
 877              	.LBB315:
 878              	.LBB310:
 879              	.LBB305:
 880              	.LBB300:
 194:ili9341_ui_driver.hpp ****     }
 881              		.loc 9 194 25 view .LVU291
 882 00f0 0422     		movs	r2, #4
 883              	.L29:
 884              	.LVL43:
 194:ili9341_ui_driver.hpp ****     }
 885              		.loc 9 194 25 view .LVU292
 886              	.LBE300:
 887              	.LBE305:
 888              	.LBE310:
 889              	.LBE315:
 890              	.LBE318:
 891              	.LBE321:
 892              	.LBE374:
 893              	.LBB375:
 894              	.LBB373:
 895              	.LBB364:
 516:ili9341_ui_driver.hpp ****             auto error2 = error * 2;
 896              		.loc 9 516 13 is_stmt 1 view .LVU293
 897              	.LBB365:
 898              	.LBI365:
 798:ili9341_ui_driver.hpp ****     {
 899              		.loc 9 798 10 view .LVU294
 900              	.LBB366:
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 45


 800:ili9341_ui_driver.hpp ****             return;
 901              		.loc 9 800 9 view .LVU295
 803:ili9341_ui_driver.hpp **** 
 902              		.loc 9 803 9 view .LVU296
 903              		.loc 9 806 9 view .LVU297
 904              	.LBB367:
 905              	.LBI367:
 191:ili9341_ui_driver.hpp ****     {
 906              		.loc 9 191 10 view .LVU298
 907              	.LBB368:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 908              		.loc 9 193 9 view .LVU299
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 909              		.loc 9 193 9 is_stmt 0 view .LVU300
 910              	.LBE368:
 911              	.LBE367:
 912              	.LBE366:
 913              	.LBE365:
 517:ili9341_ui_driver.hpp ****             if(error2 > -deltaY)
 914              		.loc 9 517 13 is_stmt 1 view .LVU301
 518:ili9341_ui_driver.hpp ****             {
 915              		.loc 9 518 13 view .LVU302
 524:ili9341_ui_driver.hpp ****             {
 916              		.loc 9 524 13 view .LVU303
 526:ili9341_ui_driver.hpp ****                 y1 += signY;
 917              		.loc 9 526 17 view .LVU304
 527:ili9341_ui_driver.hpp ****             }
 918              		.loc 9 527 17 view .LVU305
 919              	.LBB372:
 920              	.LBB371:
 800:ili9341_ui_driver.hpp ****             return;
 921              		.loc 9 800 9 is_stmt 0 view .LVU306
 922 00f2 682B     		cmp	r3, #104
 923 00f4 05D9     		bls	.L28
 800:ili9341_ui_driver.hpp ****             return;
 924              		.loc 9 800 23 view .LVU307
 925 00f6 9445     		cmp	ip, r2
 926 00f8 03D9     		bls	.L28
 927              	.LBB370:
 928              	.LBB369:
 193:ili9341_ui_driver.hpp ****         frm_buf[id + 1] = color & 0xFF;
 929              		.loc 9 193 25 view .LVU308
 930 00fa 81F8D050 		strb	r5, [r1, #208]
 194:ili9341_ui_driver.hpp ****     }
 931              		.loc 9 194 9 is_stmt 1 view .LVU309
 194:ili9341_ui_driver.hpp ****     }
 932              		.loc 9 194 25 is_stmt 0 view .LVU310
 933 00fe 81F8D1E0 		strb	lr, [r1, #209]
 934              	.L28:
 935              	.LBE369:
 936              	.LBE370:
 937              	.LBE371:
 938              	.LBE372:
 527:ili9341_ui_driver.hpp ****             }
 939              		.loc 9 527 20 view .LVU311
 940 0102 0132     		adds	r2, r2, #1
 941              	.LVL44:
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 46


 527:ili9341_ui_driver.hpp ****             }
 942              		.loc 9 527 20 view .LVU312
 943              	.LBE364:
 514:ili9341_ui_driver.hpp ****         {
 944              		.loc 9 514 9 is_stmt 1 view .LVU313
 514:ili9341_ui_driver.hpp ****         {
 945              		.loc 9 514 26 view .LVU314
 946 0104 2144     		add	r1, r1, r4
 947 0106 682A     		cmp	r2, #104
 948 0108 F3D1     		bne	.L29
 949              	.LVL45:
 514:ili9341_ui_driver.hpp ****         {
 950              		.loc 9 514 26 is_stmt 0 view .LVU315
 951              	.LBE373:
 952              	.LBE375:
 953              	.LBE280:
 954              	.LBE279:
  29:TFT_TEST.cpp  **** 	hw.Init();
 955              		.loc 8 29 2 is_stmt 1 view .LVU316
 956              		.loc 8 29 9 is_stmt 0 view .LVU317
 957 010a 0B48     		ldr	r0, .L41+12
 958 010c FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM4InitEv
 959              	.LVL46:
  30:TFT_TEST.cpp  **** 	hw.SetAudioBlockSize(4); // number of samples handled per callback
 960              		.loc 8 30 2 is_stmt 1 view .LVU318
 961              		.loc 8 30 22 is_stmt 0 view .LVU319
 962 0110 0421     		movs	r1, #4
 963 0112 0948     		ldr	r0, .L41+12
 964 0114 FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM17SetAudioBlockSizeEj
 965              	.LVL47:
  31:TFT_TEST.cpp  **** 	hw.SetAudioSampleRate(SaiHandle::Config::SampleRate::SAI_48KHZ);
 966              		.loc 8 31 2 is_stmt 1 view .LVU320
 967              		.loc 8 31 23 is_stmt 0 view .LVU321
 968 0118 0321     		movs	r1, #3
 969 011a 0748     		ldr	r0, .L41+12
 970 011c FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM18SetAudioSampleRateENS_9SaiHandle6Config10SampleRateE
 971              	.LVL48:
  32:TFT_TEST.cpp  **** 	hw.StartAudio(AudioCallback);
 972              		.loc 8 32 2 is_stmt 1 view .LVU322
 973              		.loc 8 32 15 is_stmt 0 view .LVU323
 974 0120 0649     		ldr	r1, .L41+16
 975 0122 0548     		ldr	r0, .L41+12
 976 0124 FFF7FEFF 		bl	_ZN5daisy8patch_sm12DaisyPatchSM10StartAudioEPFvPKPKfPPfjE
 977              	.LVL49:
 978              	.L30:
  33:TFT_TEST.cpp  **** 	while(1) {}
 979              		.loc 8 33 2 is_stmt 1 discriminator 1 view .LVU324
 980              		.loc 8 33 2 discriminator 1 view .LVU325
 981              		.loc 8 33 2 discriminator 1 view .LVU326
 982              		.loc 8 33 2 discriminator 1 view .LVU327
 983 0128 FEE7     		b	.L30
 984              	.L42:
 985 012a 00BF     		.align	2
 986              	.L41:
 987 012c 00000000 		.word	.LANCHOR2
 988 0130 00000000 		.word	.LANCHOR3
 989 0134 00000000 		.word	_ZN19ILI9341SpiTransport7frm_bufE
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 47


 990 0138 00000000 		.word	.LANCHOR0
 991 013c 00000000 		.word	_Z13AudioCallbackPKPKfPPfj
 992              		.cfi_endproc
 993              	.LFE4839:
 995              		.section	.text.startup._GLOBAL__sub_I_psm,"ax",%progbits
 996              		.align	1
 997              		.p2align 2,,3
 998              		.syntax unified
 999              		.thumb
 1000              		.thumb_func
 1001              		.fpu fpv5-d16
 1003              	_GLOBAL__sub_I_psm:
 1004              	.LFB5399:
  34:TFT_TEST.cpp  **** }
 1005              		.loc 8 34 1 view -0
 1006              		.cfi_startproc
 1007              		@ args = 0, pretend = 0, frame = 0
 1008              		@ frame_needed = 0, uses_anonymous_args = 0
 1009              	.LBB443:
 1010              	.LBI443:
 1011              		.loc 8 34 1 view .LVU329
 1012              	.LVL50:
 1013              	.LBB444:
 1014              	.LBB445:
 1015              	.LBI445:
  64:../../libDaisy//src/daisy_patch_sm.h ****         ~DaisyPatchSM() {}
 1016              		.loc 1 64 9 view .LVU330
 1017              	.LBB446:
 1018              	.LBB447:
 1019              	.LBI447:
  77:../../libDaisy//src/sys/system.h ****     ~System() {}
 1020              		.loc 7 77 5 view .LVU331
  77:../../libDaisy//src/sys/system.h ****     ~System() {}
 1021              		.loc 7 77 5 is_stmt 0 view .LVU332
 1022              	.LBE447:
 1023              	.LBB448:
 1024              	.LBI448:
 1025              		.file 11 "../../libDaisy//src/per/qspi.h"
   1:../../libDaisy//src/per/qspi.h **** #ifndef DSY_QSPI
   2:../../libDaisy//src/per/qspi.h **** #define DSY_QSPI /**< Macro */
   3:../../libDaisy//src/per/qspi.h **** 
   4:../../libDaisy//src/per/qspi.h **** #ifndef UNIT_TEST // for unit tests, a dummy implementation
   5:../../libDaisy//src/per/qspi.h **** 
   6:../../libDaisy//src/per/qspi.h **** #include <cstdint>
   7:../../libDaisy//src/per/qspi.h **** #include "daisy_core.h" // Added for dsy_gpio_pin typedef
   8:../../libDaisy//src/per/qspi.h **** 
   9:../../libDaisy//src/per/qspi.h **** #define DSY_QSPI_TEXT       \
  10:../../libDaisy//src/per/qspi.h ****     __attribute__((section( \
  11:../../libDaisy//src/per/qspi.h ****         ".qspiflash_text"))) /**< used for reading memory in memory_mapped mode. */
  12:../../libDaisy//src/per/qspi.h **** #define DSY_QSPI_DATA       \
  13:../../libDaisy//src/per/qspi.h ****     __attribute__((section( \
  14:../../libDaisy//src/per/qspi.h ****         ".qspiflash_data"))) /**< used for reading memory in memory_mapped mode. */
  15:../../libDaisy//src/per/qspi.h **** #define DSY_QSPI_BSS        \
  16:../../libDaisy//src/per/qspi.h ****     __attribute__((section( \
  17:../../libDaisy//src/per/qspi.h ****         ".qspiflash_bss"))) /**< used for reading memory in memory_mapped mode. */
  18:../../libDaisy//src/per/qspi.h **** 
  19:../../libDaisy//src/per/qspi.h **** namespace daisy
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 48


  20:../../libDaisy//src/per/qspi.h **** {
  21:../../libDaisy//src/per/qspi.h **** /** @addtogroup serial
  22:../../libDaisy//src/per/qspi.h **** @{
  23:../../libDaisy//src/per/qspi.h **** */
  24:../../libDaisy//src/per/qspi.h **** 
  25:../../libDaisy//src/per/qspi.h **** /** 
  26:../../libDaisy//src/per/qspi.h ****  Driver for QSPI peripheral to interface with external flash memory. \n 
  27:../../libDaisy//src/per/qspi.h ****     Currently supported QSPI Devices: \n 
  28:../../libDaisy//src/per/qspi.h ****     * IS25LP080D
  29:../../libDaisy//src/per/qspi.h **** */
  30:../../libDaisy//src/per/qspi.h **** class QSPIHandle
  31:../../libDaisy//src/per/qspi.h **** {
  32:../../libDaisy//src/per/qspi.h ****   public:
  33:../../libDaisy//src/per/qspi.h ****     enum Result
  34:../../libDaisy//src/per/qspi.h ****     {
  35:../../libDaisy//src/per/qspi.h ****         OK = 0,
  36:../../libDaisy//src/per/qspi.h ****         ERR
  37:../../libDaisy//src/per/qspi.h ****     };
  38:../../libDaisy//src/per/qspi.h **** 
  39:../../libDaisy//src/per/qspi.h ****     /** Indicates the current status of the module. 
  40:../../libDaisy//src/per/qspi.h ****          *  Warnings are indicated by a leading W.
  41:../../libDaisy//src/per/qspi.h ****          *  Errors are indicated by a leading E and cause an immediate exit.
  42:../../libDaisy//src/per/qspi.h ****          * 
  43:../../libDaisy//src/per/qspi.h ****          *  \param GOOD - No errors have been reported.
  44:../../libDaisy//src/per/qspi.h ****          *  \param E_HAL_ERROR - HAL code did not return HAL_OK.
  45:../../libDaisy//src/per/qspi.h ****          *  \param E_SWITCHING_MODES - An error was encountered while switching QSPI peripheral mod
  46:../../libDaisy//src/per/qspi.h ****          *  \param E_INVALID_MODE - QSPI should not be written to while the program is executing fr
  47:../../libDaisy//src/per/qspi.h ****          */
  48:../../libDaisy//src/per/qspi.h ****     enum Status
  49:../../libDaisy//src/per/qspi.h ****     {
  50:../../libDaisy//src/per/qspi.h ****         GOOD = 0,
  51:../../libDaisy//src/per/qspi.h ****         E_HAL_ERROR,
  52:../../libDaisy//src/per/qspi.h ****         E_SWITCHING_MODES,
  53:../../libDaisy//src/per/qspi.h ****         E_INVALID_MODE,
  54:../../libDaisy//src/per/qspi.h ****     };
  55:../../libDaisy//src/per/qspi.h **** 
  56:../../libDaisy//src/per/qspi.h ****     /** Configuration structure for interfacing with QSPI Driver */
  57:../../libDaisy//src/per/qspi.h ****     struct Config
  58:../../libDaisy//src/per/qspi.h ****     {
  59:../../libDaisy//src/per/qspi.h ****         /** Flash Devices supported. (Both of these are more-or-less the same, just different sizes
  60:../../libDaisy//src/per/qspi.h ****         enum Device
  61:../../libDaisy//src/per/qspi.h ****         {
  62:../../libDaisy//src/per/qspi.h ****             IS25LP080D,  /**< & */
  63:../../libDaisy//src/per/qspi.h ****             IS25LP064A,  /**< & */
  64:../../libDaisy//src/per/qspi.h ****             DEVICE_LAST, /**< & */
  65:../../libDaisy//src/per/qspi.h ****         };
  66:../../libDaisy//src/per/qspi.h **** 
  67:../../libDaisy//src/per/qspi.h ****         /** 
  68:../../libDaisy//src/per/qspi.h ****         Modes of operation.
  69:../../libDaisy//src/per/qspi.h ****         Memory Mapped mode: QSPI configured so that the QSPI can be
  70:../../libDaisy//src/per/qspi.h ****         read from starting address 0x90000000. Writing is not
  71:../../libDaisy//src/per/qspi.h ****         possible in this mode. \n 
  72:../../libDaisy//src/per/qspi.h ****         Indirect Polling mode: Device driver enabled. 
  73:../../libDaisy//src/per/qspi.h ****         */
  74:../../libDaisy//src/per/qspi.h ****         enum Mode
  75:../../libDaisy//src/per/qspi.h ****         {
  76:../../libDaisy//src/per/qspi.h ****             MEMORY_MAPPED,    /**< & */
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 49


  77:../../libDaisy//src/per/qspi.h ****             INDIRECT_POLLING, /**< & */
  78:../../libDaisy//src/per/qspi.h ****             MODE_LAST,
  79:../../libDaisy//src/per/qspi.h ****         };
  80:../../libDaisy//src/per/qspi.h **** 
  81:../../libDaisy//src/per/qspi.h ****         //SCK,  CE# (active low)
  82:../../libDaisy//src/per/qspi.h ****         struct
  83:../../libDaisy//src/per/qspi.h ****         {
  84:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin io0; /**< & */
  85:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin io1; /**< & */
  86:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin io2; /**< & */
  87:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin io3; /**< & */
  88:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin clk; /**< & */
  89:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin ncs; /**< & */
  90:../../libDaisy//src/per/qspi.h ****         } pin_config;
  91:../../libDaisy//src/per/qspi.h **** 
  92:../../libDaisy//src/per/qspi.h ****         Device device;
  93:../../libDaisy//src/per/qspi.h ****         Mode   mode;
  94:../../libDaisy//src/per/qspi.h ****     };
  95:../../libDaisy//src/per/qspi.h **** 
  96:../../libDaisy//src/per/qspi.h ****     /** 
  97:../../libDaisy//src/per/qspi.h ****         Initializes QSPI peripheral, and Resets, and prepares memory for access.
  98:../../libDaisy//src/per/qspi.h ****         \param config should be populated with the mode, device and pin_config before calling this 
  99:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 100:../../libDaisy//src/per/qspi.h ****         */
 101:../../libDaisy//src/per/qspi.h ****     Result Init(const Config& config);
 102:../../libDaisy//src/per/qspi.h **** 
 103:../../libDaisy//src/per/qspi.h ****     /** Returns the current config. */
 104:../../libDaisy//src/per/qspi.h ****     const Config& GetConfig() const;
 105:../../libDaisy//src/per/qspi.h **** 
 106:../../libDaisy//src/per/qspi.h ****     // Couldn't this just be called before anything else in init? That
 107:../../libDaisy//src/per/qspi.h ****     // would make manually calling it unnecessary.
 108:../../libDaisy//src/per/qspi.h ****     /** 
 109:../../libDaisy//src/per/qspi.h ****         Deinitializes the peripheral
 110:../../libDaisy//src/per/qspi.h ****         This should be called before reinitializing QSPI in a different mode.
 111:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 112:../../libDaisy//src/per/qspi.h ****         */
 113:../../libDaisy//src/per/qspi.h ****     Result DeInit();
 114:../../libDaisy//src/per/qspi.h **** 
 115:../../libDaisy//src/per/qspi.h ****     /** 
 116:../../libDaisy//src/per/qspi.h ****         Writes a single page to to the specified address on the QSPI chip.
 117:../../libDaisy//src/per/qspi.h ****         For IS25LP*, page size is 256 bytes.
 118:../../libDaisy//src/per/qspi.h ****         \param address Address to write to
 119:../../libDaisy//src/per/qspi.h ****         \param size Buffer size
 120:../../libDaisy//src/per/qspi.h ****         \param buffer Buffer to write
 121:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 122:../../libDaisy//src/per/qspi.h ****         */
 123:../../libDaisy//src/per/qspi.h ****     Result WritePage(uint32_t address, uint32_t size, uint8_t* buffer);
 124:../../libDaisy//src/per/qspi.h **** 
 125:../../libDaisy//src/per/qspi.h ****     /** 
 126:../../libDaisy//src/per/qspi.h ****         Writes data in buffer to to the QSPI. Starting at address to address+size 
 127:../../libDaisy//src/per/qspi.h ****         \param address Address to write to
 128:../../libDaisy//src/per/qspi.h ****         \param size Buffer size
 129:../../libDaisy//src/per/qspi.h ****         \param buffer Buffer to write
 130:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 131:../../libDaisy//src/per/qspi.h ****         */
 132:../../libDaisy//src/per/qspi.h ****     Result Write(uint32_t address, uint32_t size, uint8_t* buffer);
 133:../../libDaisy//src/per/qspi.h **** 
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 50


 134:../../libDaisy//src/per/qspi.h ****     /** 
 135:../../libDaisy//src/per/qspi.h ****         Erases the area specified on the chip.
 136:../../libDaisy//src/per/qspi.h ****         Erasures will happen by 4K, 32K or 64K increments.
 137:../../libDaisy//src/per/qspi.h ****         Smallest erase possible is 4kB at a time. (on IS25LP*)
 138:../../libDaisy//src/per/qspi.h ****         \param start_addr Address to begin erasing from
 139:../../libDaisy//src/per/qspi.h ****         \param end_addr  Address to stop erasing at
 140:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 141:../../libDaisy//src/per/qspi.h ****         */
 142:../../libDaisy//src/per/qspi.h ****     Result Erase(uint32_t start_addr, uint32_t end_addr);
 143:../../libDaisy//src/per/qspi.h **** 
 144:../../libDaisy//src/per/qspi.h ****     /**  
 145:../../libDaisy//src/per/qspi.h ****          Erases a single sector of the chip.  
 146:../../libDaisy//src/per/qspi.h ****         TODO: Document the size of this function. 
 147:../../libDaisy//src/per/qspi.h ****         \param address Address of sector to erase
 148:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 149:../../libDaisy//src/per/qspi.h ****         */
 150:../../libDaisy//src/per/qspi.h ****     Result EraseSector(uint32_t address);
 151:../../libDaisy//src/per/qspi.h **** 
 152:../../libDaisy//src/per/qspi.h ****     /** Returns the current class status. Useful for debugging.
 153:../../libDaisy//src/per/qspi.h ****      *  \returns Status
 154:../../libDaisy//src/per/qspi.h ****      */
 155:../../libDaisy//src/per/qspi.h ****     Status GetStatus();
 156:../../libDaisy//src/per/qspi.h **** 
 157:../../libDaisy//src/per/qspi.h ****     /** Returns a pointer to the actual memory used 
 158:../../libDaisy//src/per/qspi.h ****      *  The memory at this address is read-only
 159:../../libDaisy//src/per/qspi.h ****      *  to write to it use the Write function.
 160:../../libDaisy//src/per/qspi.h ****      * 
 161:../../libDaisy//src/per/qspi.h ****      *  \param offset returns the pointer starting this 
 162:../../libDaisy//src/per/qspi.h ****      *                many bytes into the memory
 163:../../libDaisy//src/per/qspi.h ****     */
 164:../../libDaisy//src/per/qspi.h ****     void* GetData(uint32_t offset = 0);
 165:../../libDaisy//src/per/qspi.h **** 
 166:../../libDaisy//src/per/qspi.h ****     QSPIHandle() : pimpl_(nullptr) {}
 1026              		.loc 11 166 5 is_stmt 1 view .LVU333
 1027              	.LBE448:
 1028              	.LBE446:
 1029              	.LBE445:
 1030              	.LBE444:
 1031              	.LBE443:
 1032              		.loc 8 34 1 is_stmt 0 view .LVU334
 1033 0000 10B5     		push	{r4, lr}
 1034              		.cfi_def_cfa_offset 8
 1035              		.cfi_offset 4, -8
 1036              		.cfi_offset 14, -4
 1037              	.LBB525:
 1038              	.LBB522:
 1039              	.LBB474:
 1040              	.LBB471:
 1041              	.LBB451:
 1042              	.LBB449:
 1043              	.LBB450:
 1044              		.loc 11 166 34 view .LVU335
 1045 0002 1448     		ldr	r0, .L45
 1046 0004 0024     		movs	r4, #0
 1047              	.LBE450:
 1048              	.LBE449:
 1049              	.LBE451:
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 51


 1050              	.LBE471:
 1051              	.LBE474:
  15:ili9341_ui_driver.hpp **** 
 1052              		.loc 9 15 20 view .LVU336
 1053 0006 144A     		ldr	r2, .L45+4
 1054 0008 1449     		ldr	r1, .L45+8
 1055              	.LBB475:
 1056              	.LBB472:
 1057              	.LBB452:
 1058              	.LBB453:
 1059              	.LBB454:
 1060              	.LBB455:
 1061              	.LBB456:
 1062              		.file 12 "../../libDaisy//src/per/i2c.h"
   1:../../libDaisy//src/per/i2c.h **** #pragma once
   2:../../libDaisy//src/per/i2c.h **** #include "daisy_core.h"
   3:../../libDaisy//src/per/i2c.h **** 
   4:../../libDaisy//src/per/i2c.h **** namespace daisy
   5:../../libDaisy//src/per/i2c.h **** {
   6:../../libDaisy//src/per/i2c.h **** /** A handle for interacting with an I2C peripheral. This is a dumb
   7:../../libDaisy//src/per/i2c.h ****  *  gateway that internally points to one of the four I2C peripherals
   8:../../libDaisy//src/per/i2c.h ****  *  after it was initialised. It can then be copied and passed around.
   9:../../libDaisy//src/per/i2c.h ****  *  Use an I2CHandle like this:
  10:../../libDaisy//src/per/i2c.h ****  *  
  11:../../libDaisy//src/per/i2c.h ****  *      // setup the configuration
  12:../../libDaisy//src/per/i2c.h ****  *      I2CHandle::Config i2c_conf;
  13:../../libDaisy//src/per/i2c.h ****  *      i2c_conf.periph = I2CHandle::Config::Peripheral::I2C_1;
  14:../../libDaisy//src/per/i2c.h ****  *      i2c_conf.speed  = I2CHandle::Config::Speed::I2C_400KHZ;
  15:../../libDaisy//src/per/i2c.h ****  *      i2c_conf.mode   = I2CHandle::Config::Mode::Master;
  16:../../libDaisy//src/per/i2c.h ****  *      i2c_conf.pin_config.scl  = {DSY_GPIOB, 8};
  17:../../libDaisy//src/per/i2c.h ****  *      i2c_conf.pin_config.sda  = {DSY_GPIOB, 9};
  18:../../libDaisy//src/per/i2c.h ****  *      // initialise the peripheral
  19:../../libDaisy//src/per/i2c.h ****  *      I2CHandle i2c;
  20:../../libDaisy//src/per/i2c.h ****  *      i2c.Init(i2c_conf);
  21:../../libDaisy//src/per/i2c.h ****  *      // now i2c points to the corresponding peripheral and can be used.
  22:../../libDaisy//src/per/i2c.h ****  *      i2c.TransmitBlocking( ... );
  23:../../libDaisy//src/per/i2c.h ****  */
  24:../../libDaisy//src/per/i2c.h **** class I2CHandle
  25:../../libDaisy//src/per/i2c.h **** {
  26:../../libDaisy//src/per/i2c.h ****   public:
  27:../../libDaisy//src/per/i2c.h ****     /** Contains settings for initialising an I2C interface. */
  28:../../libDaisy//src/per/i2c.h ****     struct Config
  29:../../libDaisy//src/per/i2c.h ****     {
  30:../../libDaisy//src/per/i2c.h ****         /** Specifies whether the interface will operate in master or slave mode. */
  31:../../libDaisy//src/per/i2c.h ****         enum class Mode
  32:../../libDaisy//src/per/i2c.h ****         {
  33:../../libDaisy//src/per/i2c.h ****             I2C_MASTER,
  34:../../libDaisy//src/per/i2c.h ****             I2C_SLAVE,
  35:../../libDaisy//src/per/i2c.h ****         };
  36:../../libDaisy//src/per/i2c.h **** 
  37:../../libDaisy//src/per/i2c.h ****         /** Specifices the internal peripheral to use (these are mapped to different pins on the ha
  38:../../libDaisy//src/per/i2c.h ****         enum class Peripheral
  39:../../libDaisy//src/per/i2c.h ****         {
  40:../../libDaisy//src/per/i2c.h ****             I2C_1 = 0, /**< & */
  41:../../libDaisy//src/per/i2c.h ****             I2C_2,     /**< & */
  42:../../libDaisy//src/per/i2c.h ****             I2C_3,     /**< & */
  43:../../libDaisy//src/per/i2c.h ****             I2C_4,     /**< & */
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 52


  44:../../libDaisy//src/per/i2c.h ****         };
  45:../../libDaisy//src/per/i2c.h **** 
  46:../../libDaisy//src/per/i2c.h ****         /** Rate at which the clock/data will be sent/received. The device being used will have max
  47:../../libDaisy//src/per/i2c.h ****          *  1MHZ Mode is currently 886kHz
  48:../../libDaisy//src/per/i2c.h ****          */
  49:../../libDaisy//src/per/i2c.h ****         enum class Speed
  50:../../libDaisy//src/per/i2c.h ****         {
  51:../../libDaisy//src/per/i2c.h ****             I2C_100KHZ, /**< & */
  52:../../libDaisy//src/per/i2c.h ****             I2C_400KHZ, /**< & */
  53:../../libDaisy//src/per/i2c.h ****             I2C_1MHZ,   /**< & */
  54:../../libDaisy//src/per/i2c.h ****         };
  55:../../libDaisy//src/per/i2c.h **** 
  56:../../libDaisy//src/per/i2c.h ****         Peripheral periph; /**< & */
  57:../../libDaisy//src/per/i2c.h ****         struct
  58:../../libDaisy//src/per/i2c.h ****         {
  59:../../libDaisy//src/per/i2c.h ****             dsy_gpio_pin scl; /**< & */
  60:../../libDaisy//src/per/i2c.h ****             dsy_gpio_pin sda; /**< & */
  61:../../libDaisy//src/per/i2c.h ****         } pin_config;         /**< & */
  62:../../libDaisy//src/per/i2c.h **** 
  63:../../libDaisy//src/per/i2c.h ****         Speed speed; /**< & */
  64:../../libDaisy//src/per/i2c.h ****         Mode  mode;  /**< & */
  65:../../libDaisy//src/per/i2c.h ****         // 0x10 is chosen as a default to avoid conflicts with reserved addresses
  66:../../libDaisy//src/per/i2c.h ****         uint8_t address = 0x10; /**< & */
  67:../../libDaisy//src/per/i2c.h ****     };
  68:../../libDaisy//src/per/i2c.h **** 
  69:../../libDaisy//src/per/i2c.h ****     /** Return values for I2C functions. */
  70:../../libDaisy//src/per/i2c.h ****     enum class Result
  71:../../libDaisy//src/per/i2c.h ****     {
  72:../../libDaisy//src/per/i2c.h ****         OK, /**< & */
  73:../../libDaisy//src/per/i2c.h ****         ERR /**< & */
  74:../../libDaisy//src/per/i2c.h ****     };
  75:../../libDaisy//src/per/i2c.h **** 
  76:../../libDaisy//src/per/i2c.h ****     enum class Direction
  77:../../libDaisy//src/per/i2c.h ****     {
  78:../../libDaisy//src/per/i2c.h ****         TRANSMIT, /**< & */
  79:../../libDaisy//src/per/i2c.h ****         RECEIVE,  /**< & */
  80:../../libDaisy//src/per/i2c.h ****     };
  81:../../libDaisy//src/per/i2c.h **** 
  82:../../libDaisy//src/per/i2c.h ****     I2CHandle() : pimpl_(nullptr) {}
 1063              		.loc 12 82 33 view .LVU337
 1064 000a 0462     		str	r4, [r0, #32]
 1065              	.LBE456:
 1066              	.LBE455:
 1067              	.LBE454:
 1068              	.LBE453:
 1069              	.LBE452:
 1070              	.LBB459:
 1071              	.LBB460:
 1072              	.LBB461:
 1073              		.file 13 "../../libDaisy//src/per/dac.h"
   1:../../libDaisy//src/per/dac.h **** #pragma once
   2:../../libDaisy//src/per/dac.h **** #ifndef DSY_DAC_H
   3:../../libDaisy//src/per/dac.h **** #define DSY_DAC_H
   4:../../libDaisy//src/per/dac.h **** 
   5:../../libDaisy//src/per/dac.h **** #include "daisy_core.h"
   6:../../libDaisy//src/per/dac.h **** 
   7:../../libDaisy//src/per/dac.h **** namespace daisy
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 53


   8:../../libDaisy//src/per/dac.h **** {
   9:../../libDaisy//src/per/dac.h **** /** @brief DAC handle for Built-in DAC Peripheral 
  10:../../libDaisy//src/per/dac.h ****  *  @ingroup per_analog
  11:../../libDaisy//src/per/dac.h ****  ** 
  12:../../libDaisy//src/per/dac.h ****  ** For now only Normal Mode is supported,
  13:../../libDaisy//src/per/dac.h ****  ** Sample and hold mode provides reduced power consumption, but requires a bit more setup.
  14:../../libDaisy//src/per/dac.h ****  **
  15:../../libDaisy//src/per/dac.h ****  ** For now connecting the DAC through other internal peripherals is also not supported.
  16:../../libDaisy//src/per/dac.h ****  **
  17:../../libDaisy//src/per/dac.h ****  ** Since the DAC channels have dedicated pins we don't need to pass in a pin config like with
  18:../../libDaisy//src/per/dac.h ****  ** other modules. However, it is still important to not try to use the DAC pins for anything else.
  19:../../libDaisy//src/per/dac.h ****  ** DAC Channel 1 is on PA4, and DAC Channel 2 is on PA5
  20:../../libDaisy//src/per/dac.h ****  ***/
  21:../../libDaisy//src/per/dac.h **** class DacHandle
  22:../../libDaisy//src/per/dac.h **** {
  23:../../libDaisy//src/per/dac.h ****   public:
  24:../../libDaisy//src/per/dac.h ****     /** Return Values for the DacHandle class */
  25:../../libDaisy//src/per/dac.h ****     enum class Result
  26:../../libDaisy//src/per/dac.h ****     {
  27:../../libDaisy//src/per/dac.h ****         OK,
  28:../../libDaisy//src/per/dac.h ****         ERR,
  29:../../libDaisy//src/per/dac.h ****     };
  30:../../libDaisy//src/per/dac.h **** 
  31:../../libDaisy//src/per/dac.h ****     /** Selects which channel(s) will be configured for use. */
  32:../../libDaisy//src/per/dac.h ****     enum class Channel
  33:../../libDaisy//src/per/dac.h ****     {
  34:../../libDaisy//src/per/dac.h ****         ONE,
  35:../../libDaisy//src/per/dac.h ****         TWO,
  36:../../libDaisy//src/per/dac.h ****         BOTH,
  37:../../libDaisy//src/per/dac.h ****     };
  38:../../libDaisy//src/per/dac.h **** 
  39:../../libDaisy//src/per/dac.h ****     /** Sets the Mode for the DAC channels.
  40:../../libDaisy//src/per/dac.h ****      **
  41:../../libDaisy//src/per/dac.h ****      ** Polling mode uses the blocking mode to transmit a single value at a time.
  42:../../libDaisy//src/per/dac.h ****      **
  43:../../libDaisy//src/per/dac.h ****      ** DMA mode uses a buffer, and periodically transmits it triggering a 
  44:../../libDaisy//src/per/dac.h ****      ** callback to fill the buffer when it is ready for more samples.
  45:../../libDaisy//src/per/dac.h ****      ***/
  46:../../libDaisy//src/per/dac.h ****     enum class Mode
  47:../../libDaisy//src/per/dac.h ****     {
  48:../../libDaisy//src/per/dac.h ****         POLLING,
  49:../../libDaisy//src/per/dac.h ****         DMA,
  50:../../libDaisy//src/per/dac.h ****     };
  51:../../libDaisy//src/per/dac.h **** 
  52:../../libDaisy//src/per/dac.h ****     /** Sets the number of bits per sample transmitted out of the DAC.
  53:../../libDaisy//src/per/dac.h ****      ** The output range will be: 0V - VDDA
  54:../../libDaisy//src/per/dac.h ****      ** The resolution will be roughly: bitdepth / (VDDA - 0V) 
  55:../../libDaisy//src/per/dac.h ****      ***/
  56:../../libDaisy//src/per/dac.h ****     enum class BitDepth
  57:../../libDaisy//src/per/dac.h ****     {
  58:../../libDaisy//src/per/dac.h ****         BITS_8,
  59:../../libDaisy//src/per/dac.h ****         BITS_12
  60:../../libDaisy//src/per/dac.h ****     };
  61:../../libDaisy//src/per/dac.h **** 
  62:../../libDaisy//src/per/dac.h ****     /** Sets whether the DAC output is buffered for higher drive ability. */
  63:../../libDaisy//src/per/dac.h ****     enum class BufferState
  64:../../libDaisy//src/per/dac.h ****     {
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 54


  65:../../libDaisy//src/per/dac.h ****         ENABLED,
  66:../../libDaisy//src/per/dac.h ****         DISABLED,
  67:../../libDaisy//src/per/dac.h ****     };
  68:../../libDaisy//src/per/dac.h **** 
  69:../../libDaisy//src/per/dac.h ****     /** Configuration structure for initializing the DAC structure. */
  70:../../libDaisy//src/per/dac.h ****     struct Config
  71:../../libDaisy//src/per/dac.h ****     {
  72:../../libDaisy//src/per/dac.h ****         /** Target Samplerate in Hz used to configure the internal 
  73:../../libDaisy//src/per/dac.h ****          ** timebase for DMA mode. Does nothing in POLLING mode.
  74:../../libDaisy//src/per/dac.h ****          ** If the value is 0 at Init time this will default to 48000Hz 
  75:../../libDaisy//src/per/dac.h ****          ** otherwise the driver will attempt meet the target.*/
  76:../../libDaisy//src/per/dac.h ****         uint32_t target_samplerate;
  77:../../libDaisy//src/per/dac.h **** 
  78:../../libDaisy//src/per/dac.h ****         Channel     chn;
  79:../../libDaisy//src/per/dac.h ****         Mode        mode;
  80:../../libDaisy//src/per/dac.h ****         BitDepth    bitdepth;
  81:../../libDaisy//src/per/dac.h ****         BufferState buff_state;
  82:../../libDaisy//src/per/dac.h ****     };
  83:../../libDaisy//src/per/dac.h **** 
  84:../../libDaisy//src/per/dac.h ****     DacHandle() : pimpl_(nullptr) {}
 1074              		.loc 13 84 33 view .LVU338
 1075 000c 8462     		str	r4, [r0, #40]
 1076              	.LBE461:
 1077              	.LBE460:
 1078              	.LBE459:
 1079              	.LBB462:
 1080              	.LBB463:
 1081              	.LBB464:
  95:../../libDaisy//src/hid/audio.h ****     ~AudioHandle() {}
 1082              		.loc 6 95 35 view .LVU339
 1083 000e C0E90344 		strd	r4, r4, [r0, #12]
 1084              	.LVL51:
  95:../../libDaisy//src/hid/audio.h ****     ~AudioHandle() {}
 1085              		.loc 6 95 35 view .LVU340
 1086              	.LBE464:
 1087              	.LBE463:
 1088              	.LBE462:
 1089              	.LBB465:
 1090              	.LBI465:
  92:../../libDaisy//src/per/adc.h ****     ~AdcHandle() {}
 1091              		.loc 5 92 5 is_stmt 1 view .LVU341
  92:../../libDaisy//src/per/adc.h ****     ~AdcHandle() {}
 1092              		.loc 5 92 5 is_stmt 0 view .LVU342
 1093              	.LBE465:
 1094              	.LBB466:
 1095              	.LBI466:
  40:../../libDaisy//src/hid/usb.h **** 
 1096              		.loc 4 40 5 is_stmt 1 view .LVU343
  40:../../libDaisy//src/hid/usb.h **** 
 1097              		.loc 4 40 5 is_stmt 0 view .LVU344
 1098              	.LBE466:
 1099              	.LBB467:
 1100              	.LBI452:
  28:../../libDaisy//src/dev/codec_pcm3060.h ****     ~Pcm3060() {}
 1101              		.loc 3 28 5 is_stmt 1 view .LVU345
 1102              	.LBB458:
 1103              	.LBB457:
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 55


 1104              	.LBI454:
 1105              		.loc 12 82 5 view .LVU346
 1106              		.loc 12 82 5 is_stmt 0 view .LVU347
 1107              	.LBE457:
 1108              	.LBE458:
 1109              	.LBE467:
 1110              	.LBB468:
 1111              	.LBI459:
 1112              		.loc 13 84 5 is_stmt 1 view .LVU348
 1113              		.loc 13 84 5 is_stmt 0 view .LVU349
 1114              	.LBE468:
 1115              	.LBE472:
 1116              	.LBE475:
 1117              	.LBE522:
 1118              	.LBE525:
  64:../../libDaisy//src/daisy_patch_sm.h ****         ~DaisyPatchSM() {}
 1119              		.loc 1 64 24 is_stmt 1 view .LVU350
 1120              	.LBB526:
 1121              	.LBB523:
 1122              	.LBB476:
 1123              	.LBB473:
 1124              	.LBB469:
 1125              	.LBI469:
  20:../../libDaisy//src/hid/gatein.h ****     /** GateIn~
 1126              		.loc 2 20 5 view .LVU351
  20:../../libDaisy//src/hid/gatein.h ****     /** GateIn~
 1127              		.loc 2 20 5 is_stmt 0 view .LVU352
 1128              	.LBE469:
 1129              	.LBB470:
 1130              	.LBI470:
  20:../../libDaisy//src/hid/gatein.h ****     /** GateIn~
 1131              		.loc 2 20 5 is_stmt 1 view .LVU353
  20:../../libDaisy//src/hid/gatein.h ****     /** GateIn~
 1132              		.loc 2 20 5 is_stmt 0 view .LVU354
 1133              	.LBE470:
 1134              	.LBE473:
 1135              	.LBE476:
  15:ili9341_ui_driver.hpp **** 
 1136              		.loc 9 15 20 view .LVU355
 1137 0012 FFF7FEFF 		bl	__aeabi_atexit
 1138              	.LVL52:
 1139              	.LBB477:
 1140              	.LBI477:
  64:../../libDaisy//src/daisy_patch_sm.h ****         ~DaisyPatchSM() {}
 1141              		.loc 1 64 9 is_stmt 1 view .LVU356
 1142              	.LBB478:
 1143              	.LBB479:
 1144              	.LBI479:
  77:../../libDaisy//src/sys/system.h ****     ~System() {}
 1145              		.loc 7 77 5 view .LVU357
  77:../../libDaisy//src/sys/system.h ****     ~System() {}
 1146              		.loc 7 77 5 is_stmt 0 view .LVU358
 1147              	.LBE479:
 1148              	.LBB480:
 1149              	.LBI480:
 1150              		.loc 11 166 5 is_stmt 1 view .LVU359
 1151              	.LBB481:
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 56


 1152              	.LBB482:
 1153              		.loc 11 166 34 is_stmt 0 view .LVU360
 1154 0016 1248     		ldr	r0, .L45+12
 1155              	.LBE482:
 1156              	.LBE481:
 1157              	.LBE480:
 1158              	.LBE478:
 1159              	.LBE477:
  11:TFT_TEST.cpp  **** DisplayInit		di;
 1160              		.loc 8 11 14 view .LVU361
 1161 0018 0F4A     		ldr	r2, .L45+4
 1162 001a 1049     		ldr	r1, .L45+8
 1163              	.LBB504:
 1164              	.LBB502:
 1165              	.LBB483:
 1166              	.LBB484:
 1167              	.LBB485:
 1168              	.LBB486:
 1169              	.LBB487:
 1170              		.loc 12 82 33 view .LVU362
 1171 001c 0462     		str	r4, [r0, #32]
 1172              	.LBE487:
 1173              	.LBE486:
 1174              	.LBE485:
 1175              	.LBE484:
 1176              	.LBE483:
 1177              	.LBB490:
 1178              	.LBB491:
 1179              	.LBB492:
 1180              		.loc 13 84 33 view .LVU363
 1181 001e 8462     		str	r4, [r0, #40]
 1182              	.LBE492:
 1183              	.LBE491:
 1184              	.LBE490:
 1185              	.LBB493:
 1186              	.LBB494:
 1187              	.LBB495:
  95:../../libDaisy//src/hid/audio.h ****     ~AudioHandle() {}
 1188              		.loc 6 95 35 view .LVU364
 1189 0020 C0E90344 		strd	r4, r4, [r0, #12]
 1190              	.LVL53:
  95:../../libDaisy//src/hid/audio.h ****     ~AudioHandle() {}
 1191              		.loc 6 95 35 view .LVU365
 1192              	.LBE495:
 1193              	.LBE494:
 1194              	.LBE493:
 1195              	.LBB496:
 1196              	.LBI496:
  92:../../libDaisy//src/per/adc.h ****     ~AdcHandle() {}
 1197              		.loc 5 92 5 is_stmt 1 view .LVU366
  92:../../libDaisy//src/per/adc.h ****     ~AdcHandle() {}
 1198              		.loc 5 92 5 is_stmt 0 view .LVU367
 1199              	.LBE496:
 1200              	.LBB497:
 1201              	.LBI497:
  40:../../libDaisy//src/hid/usb.h **** 
 1202              		.loc 4 40 5 is_stmt 1 view .LVU368
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 57


  40:../../libDaisy//src/hid/usb.h **** 
 1203              		.loc 4 40 5 is_stmt 0 view .LVU369
 1204              	.LBE497:
 1205              	.LBB498:
 1206              	.LBI483:
  28:../../libDaisy//src/dev/codec_pcm3060.h ****     ~Pcm3060() {}
 1207              		.loc 3 28 5 is_stmt 1 view .LVU370
 1208              	.LBB489:
 1209              	.LBB488:
 1210              	.LBI485:
 1211              		.loc 12 82 5 view .LVU371
 1212              		.loc 12 82 5 is_stmt 0 view .LVU372
 1213              	.LBE488:
 1214              	.LBE489:
 1215              	.LBE498:
 1216              	.LBB499:
 1217              	.LBI490:
 1218              		.loc 13 84 5 is_stmt 1 view .LVU373
 1219              		.loc 13 84 5 is_stmt 0 view .LVU374
 1220              	.LBE499:
 1221              	.LBE502:
 1222              	.LBE504:
 1223              	.LBE523:
 1224              	.LBE526:
  64:../../libDaisy//src/daisy_patch_sm.h ****         ~DaisyPatchSM() {}
 1225              		.loc 1 64 24 is_stmt 1 view .LVU375
 1226              	.LBB527:
 1227              	.LBB524:
 1228              	.LBB505:
 1229              	.LBB503:
 1230              	.LBB500:
 1231              	.LBI500:
  20:../../libDaisy//src/hid/gatein.h ****     /** GateIn~
 1232              		.loc 2 20 5 view .LVU376
  20:../../libDaisy//src/hid/gatein.h ****     /** GateIn~
 1233              		.loc 2 20 5 is_stmt 0 view .LVU377
 1234              	.LBE500:
 1235              	.LBB501:
 1236              	.LBI501:
  20:../../libDaisy//src/hid/gatein.h ****     /** GateIn~
 1237              		.loc 2 20 5 is_stmt 1 view .LVU378
  20:../../libDaisy//src/hid/gatein.h ****     /** GateIn~
 1238              		.loc 2 20 5 is_stmt 0 view .LVU379
 1239              	.LBE501:
 1240              	.LBE503:
 1241              	.LBE505:
  11:TFT_TEST.cpp  **** DisplayInit		di;
 1242              		.loc 8 11 14 view .LVU380
 1243 0024 FFF7FEFF 		bl	__aeabi_atexit
 1244              	.LVL54:
 1245              	.LBB506:
 1246              	.LBI506:
  57:ili9341_ui_driver.hpp **** {
 1247              		.loc 9 57 7 is_stmt 1 view .LVU381
 1248              	.LBB507:
 1249 0028 0E4A     		ldr	r2, .L45+16
 1250 002a 4FF44841 		mov	r1, #51200
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 58


 1251              	.LBE507:
 1252              	.LBE506:
 1253              	.LBB512:
 1254              	.LBB513:
 216:ili9341_ui_driver.hpp **** {
 1255              		.loc 9 216 7 is_stmt 0 view .LVU382
 1256 002e 0E4B     		ldr	r3, .L45+20
 1257 0030 1420     		movs	r0, #20
 1258              	.LBE513:
 1259              	.LBE512:
 1260              	.LBB520:
 1261              	.LBB511:
  57:ili9341_ui_driver.hpp **** {
 1262              		.loc 9 57 7 view .LVU383
 1263 0032 1470     		strb	r4, [r2]
 1264 0034 5460     		str	r4, [r2, #4]
 1265 0036 1181     		strh	r1, [r2, #8]	@ movhi
 1266              	.LVL55:
 1267              	.LBB508:
 1268              	.LBI508:
  94:../../libDaisy//src/per/spi.h ****         }
  95:../../libDaisy//src/per/spi.h **** 
  96:../../libDaisy//src/per/spi.h ****         Peripheral    periph;
  97:../../libDaisy//src/per/spi.h ****         Mode          mode;
  98:../../libDaisy//src/per/spi.h ****         Direction     direction;
  99:../../libDaisy//src/per/spi.h ****         unsigned long datasize;
 100:../../libDaisy//src/per/spi.h ****         ClockPolarity clock_polarity;
 101:../../libDaisy//src/per/spi.h ****         ClockPhase    clock_phase;
 102:../../libDaisy//src/per/spi.h ****         NSS           nss;
 103:../../libDaisy//src/per/spi.h ****         BaudPrescaler baud_prescaler;
 104:../../libDaisy//src/per/spi.h ****     };
 105:../../libDaisy//src/per/spi.h **** 
 106:../../libDaisy//src/per/spi.h ****     SpiHandle() : pimpl_(nullptr) {}
 1269              		.loc 10 106 5 is_stmt 1 view .LVU384
 1270              	.LBB509:
 1271              	.LBB510:
 1272              		.loc 10 106 33 is_stmt 0 view .LVU385
 1273 0038 D460     		str	r4, [r2, #12]
 1274              	.LVL56:
 1275              		.loc 10 106 33 view .LVU386
 1276              	.LBE510:
 1277              	.LBE509:
 1278              	.LBE508:
 1279              	.LBE511:
 1280              	.LBE520:
 1281              	.LBB521:
 1282              	.LBI512:
 216:ili9341_ui_driver.hpp **** {
 1283              		.loc 9 216 7 is_stmt 1 view .LVU387
 1284              	.LBB519:
 1285 003a 0F22     		movs	r2, #15
 1286 003c 1C80     		strh	r4, [r3]	@ movhi
 1287              	.LVL57:
 1288              	.LBB514:
 1289              	.LBI514:
  57:ili9341_ui_driver.hpp **** {
 1290              		.loc 9 57 7 view .LVU388
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 59


 1291              	.LBB515:
 1292 003e 1C74     		strb	r4, [r3, #16]
 1293 0040 5C61     		str	r4, [r3, #20]
 1294 0042 1983     		strh	r1, [r3, #24]	@ movhi
 1295              	.LVL58:
 1296              	.LBB516:
 1297              	.LBI516:
 1298              		.loc 10 106 5 view .LVU389
 1299              	.LBB517:
 1300              	.LBB518:
 1301              		.loc 10 106 33 is_stmt 0 view .LVU390
 1302 0044 DC61     		str	r4, [r3, #28]
 1303              	.LVL59:
 1304              		.loc 10 106 33 view .LVU391
 1305              	.LBE518:
 1306              	.LBE517:
 1307              	.LBE516:
 1308              	.LBE515:
 1309              	.LBE514:
 216:ili9341_ui_driver.hpp **** {
 1310              		.loc 9 216 7 view .LVU392
 1311 0046 83F88900 		strb	r0, [r3, #137]
 1312 004a A3F88E40 		strh	r4, [r3, #142]	@ movhi
 1313              	.LVL60:
 216:ili9341_ui_driver.hpp **** {
 1314              		.loc 9 216 7 view .LVU393
 1315 004e 83F88A20 		strb	r2, [r3, #138]
 1316              	.LBE519:
 1317              	.LBE521:
 1318              	.LBE524:
 1319              	.LBE527:
 1320              		.loc 8 34 1 view .LVU394
 1321 0052 10BD     		pop	{r4, pc}
 1322              	.L46:
 1323              		.align	2
 1324              	.L45:
 1325 0054 00000000 		.word	.LANCHOR1
 1326 0058 00000000 		.word	__dso_handle
 1327 005c 00000000 		.word	_ZN5daisy8patch_sm12DaisyPatchSMD1Ev
 1328 0060 00000000 		.word	.LANCHOR0
 1329 0064 00000000 		.word	.LANCHOR2
 1330 0068 00000000 		.word	.LANCHOR3
 1331              		.cfi_endproc
 1332              	.LFE5399:
 1334              		.section	.init_array,"aw",%init_array
 1335              		.align	2
 1336 0000 00000000 		.word	_GLOBAL__sub_I_psm(target1)
 1337              		.global	du
 1338              		.global	di
 1339              		.global	hw
 1340              		.global	_ZN19ILI9341SpiTransport7frm_bufE
 1341              		.global	psm
 1342              		.section	.bss.di,"aw",%nobits
 1343              		.align	2
 1344              		.set	.LANCHOR2,. + 0
 1347              	di:
 1348 0000 00000000 		.space	28
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 60


 1348      00000000 
 1348      00000000 
 1348      00000000 
 1348      00000000 
 1349              		.section	.bss.du,"aw",%nobits
 1350              		.align	2
 1351              		.set	.LANCHOR3,. + 0
 1354              	du:
 1355 0000 00000000 		.space	148
 1355      00000000 
 1355      00000000 
 1355      00000000 
 1355      00000000 
 1356              		.section	.bss.hw,"aw",%nobits
 1357              		.align	2
 1358              		.set	.LANCHOR0,. + 0
 1361              	hw:
 1362 0000 00000000 		.space	464
 1362      00000000 
 1362      00000000 
 1362      00000000 
 1362      00000000 
 1363              		.section	.bss.psm,"aw",%nobits
 1364              		.align	2
 1365              		.set	.LANCHOR1,. + 0
 1368              	psm:
 1369 0000 00000000 		.space	464
 1369      00000000 
 1369      00000000 
 1369      00000000 
 1369      00000000 
 1370              		.section	.sram1_bss,"aw"
 1371              		.align	2
 1374              	_ZN19ILI9341SpiTransport7frm_bufE:
 1375 0000 00000000 		.space	153600
 1375      00000000 
 1375      00000000 
 1375      00000000 
 1375      00000000 
 1376              		.text
 1377              	.Letext0:
 1378              		.file 14 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/machine/_d
 1379              		.file 15 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/sys/_stdin
 1380              		.file 16 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/stdint.h"
 1381              		.file 17 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/lib/gcc/arm-none-eabi/10.3.1/inc
 1382              		.file 18 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1383              		.file 19 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1384              		.file 20 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1385              		.file 21 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1386              		.file 22 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1387              		.file 23 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1388              		.file 24 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1389              		.file 25 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1390              		.file 26 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1391              		.file 27 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1392              		.file 28 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1393              		.file 29 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 61


 1394              		.file 30 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1395              		.file 31 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1396              		.file 32 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1397              		.file 33 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1398              		.file 34 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1399              		.file 35 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1400              		.file 36 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/sys/_types
 1401              		.file 37 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/sys/reent.
 1402              		.file 38 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/sys/lock.h
 1403              		.file 39 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/math.h"
 1404              		.file 40 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/stdlib.h"
 1405              		.file 41 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1406              		.file 42 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1407              		.file 43 "../../libDaisy//src/daisy_core.h"
 1408              		.file 44 "../../libDaisy//src/per/tim.h"
 1409              		.file 45 "../../libDaisy//src/per/sai.h"
 1410              		.file 46 "../../libDaisy//src/hid/ctrl.h"
 1411              		.file 47 "../../libDaisy//src/hid/disp/graphics_common.h"
 1412              		.file 48 "../../libDaisy//src/util/wav_format.h"
 1413              		.file 49 "../../libDaisy//src/dev/max11300.h"
 1414              		.file 50 "../../libDaisy//src/daisy_seed.h"
 1415              		.file 51 "../../libDaisy//src/per/gpio.h"
 1416              		.file 52 "../../libDaisy//src/dev/sdram.h"
 1417              		.file 53 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/lib/gcc/arm-none-eabi/10.3.1/inc
 1418              		.file 54 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/stdio.h"
 1419              		.file 55 "../../libDaisy//src/util/oled_fonts.h"
 1420              		.file 56 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/string.h"
 1421              		.file 57 "../../DaisySP//Source/Control/adenv.h"
 1422              		.file 58 "../../DaisySP//Source/Utility/dsp.h"
 1423              		.file 59 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/wchar.h"
 1424              		.file 60 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/locale.h"
 1425              		.file 61 "../../libDaisy//src/dev/sr_595.h"
 1426              		.file 62 "<built-in>"
ARM GAS  /var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s 			page 62


DEFINED SYMBOLS
                            *ABS*:0000000000000000 TFT_TEST.cpp
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:17     .text._ZN5daisy8patch_sm12DaisyPatchSMD2Ev:0000000000000000 $t
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:26     .text._ZN5daisy8patch_sm12DaisyPatchSMD2Ev:0000000000000000 _ZN5daisy8patch_sm12DaisyPatchSMD2Ev
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:26     .text._ZN5daisy8patch_sm12DaisyPatchSMD2Ev:0000000000000000 _ZN5daisy8patch_sm12DaisyPatchSMD1Ev
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:84     .text._Z13AudioCallbackPKPKfPPfj:0000000000000000 $t
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:92     .text._Z13AudioCallbackPKPKfPPfj:0000000000000000 _Z13AudioCallbackPKPKfPPfj
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:178    .text._Z13AudioCallbackPKPKfPPfj:0000000000000038 $d
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:183    .text._ZN19ILI9341SpiTransport4InitEv:0000000000000000 $t
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:191    .text._ZN19ILI9341SpiTransport4InitEv:0000000000000000 _ZN19ILI9341SpiTransport4InitEv
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:369    .text._ZN19ILI9341SpiTransport4InitEv:00000000000000a0 $d
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:374    .text.startup.main:0000000000000000 $t
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:382    .text.startup.main:0000000000000000 main
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:987    .text.startup.main:000000000000012c $d
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1374   .sram1_bss:0000000000000000 _ZN19ILI9341SpiTransport7frm_bufE
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:996    .text.startup._GLOBAL__sub_I_psm:0000000000000000 $t
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1003   .text.startup._GLOBAL__sub_I_psm:0000000000000000 _GLOBAL__sub_I_psm
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1325   .text.startup._GLOBAL__sub_I_psm:0000000000000054 $d
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1335   .init_array:0000000000000000 $d
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1354   .bss.du:0000000000000000 du
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1347   .bss.di:0000000000000000 di
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1361   .bss.hw:0000000000000000 hw
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1368   .bss.psm:0000000000000000 psm
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1343   .bss.di:0000000000000000 $d
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1350   .bss.du:0000000000000000 $d
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1357   .bss.hw:0000000000000000 $d
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1364   .bss.psm:0000000000000000 $d
/var/folders/hl/qgbwny5j0fd895c2c41bk3tw0000gp/T//ccG2lBvw.s:1371   .sram1_bss:0000000000000000 $d
                           .group:0000000000000000 _ZN5daisy8patch_sm12DaisyPatchSMD5Ev

UNDEFINED SYMBOLS
_ZN5daisy8patch_sm12DaisyPatchSM21ProcessAnalogControlsEv
_ZN5daisy8patch_sm12DaisyPatchSM22ProcessDigitalControlsEv
_ZN5daisy8patch_sm12DaisyPatchSM6GetPinENS1_7PinBankEi
dsy_gpio_init
_ZN5daisy9SpiHandle4InitERKNS0_6ConfigE
_ZN5daisy8patch_sm12DaisyPatchSM4InitEv
_ZN5daisy8patch_sm12DaisyPatchSM17SetAudioBlockSizeEj
_ZN5daisy8patch_sm12DaisyPatchSM18SetAudioSampleRateENS_9SaiHandle6Config10SampleRateE
_ZN5daisy8patch_sm12DaisyPatchSM10StartAudioEPFvPKPKfPPfjE
__aeabi_atexit
__dso_handle
